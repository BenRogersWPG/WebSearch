{"version":3,"file":"extension.js","mappings":"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","sources":["../.././src/web/extension.ts","../../external commonjs \"vscode\"","../../webpack/bootstrap","../../webpack/startup"],"sourcesContent":["// The module 'vscode' contains the VS Code extensibility API\r\n// Import the module and reference it with the alias vscode:\r\nimport * as vscode from 'vscode';\r\n\r\n// this method is called when the extension is activated:\r\nexport function activate(context: vscode.ExtensionContext) {\r\n\r\n\t// Notify the user that the extension has been activated successfully:\r\n\tconsole.log('Thank you for installing Web Search, the extension is now active! To use, right click some highlighted text in your editor or type \"web search\" in the command pallete.');\r\n\r\n\t// Provide the implementation of the command with registerCommand using the commandId parameter from the command field in package.json\r\n\tcontext.subscriptions.push(vscode.commands.registerCommand('WebSearch.webSearchMenu', () => {\r\n\t\tperformWebSearch();\r\n\t}));\r\n\r\n\tasync function performWebSearch() {\r\n\t\t//Function to perform the web search\r\n\r\n\t\t//Gather the user's currently selected text from the active text editor:\r\n\t\tconst editor = vscode.window.activeTextEditor;\r\n\t\tlet text = vscode.window.activeTextEditor?.document.getText(editor!.selection);\r\n\t\tconst manualSearch: boolean = vscode.workspace.getConfiguration('webSearch').get('allowManualSearch')!;\r\n\t\tconst defaultSearch: boolean = vscode.workspace.getConfiguration('webSearch').get('useDefaultSearchEnginesList')!;\r\n\r\n\t\t//Display a message to the user if no text was selected:\r\n\t\tif ((text === undefined || text === \"\") && (!manualSearch)) {\r\n\t\t\tvscode.window.showInformationMessage(`No text selected. Please select text in the editor and try again.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//If manual search setting is enabled, prompt the user for a search term:\r\n\t\telse if ((text === undefined || text === \"\") && (manualSearch)) {\r\n\t\t\ttext = await vscode.window.showInputBox({\r\n\t\t\t\tplaceHolder: 'Please enter the text you would like to search for.',\r\n\t\t\t\tprompt: 'Please enter the text you would like to search for.'\r\n\t\t\t});\r\n\t\t\tif (text === undefined || text === \"\") {\r\n\t\t\t\tvscode.window.showInformationMessage(`No text entered. Please enter text in the prompt, or select text.`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//Retrieve the extension's search engine configuration from the user settings:\r\n\t\tconst searchEngineOld: string = vscode.workspace.getConfiguration('webSearch').get('searchEngine')!;//Deprecated, will be removed in future versions\r\n\r\n\t\t//Get the user settings from the extension's settings.json file:\r\n\t\tconst searchEngine: string[] = new Array(vscode.workspace.getConfiguration('webSearch').get('searchEngines'));\r\n\r\n\t\t//Define default search engine signature:\r\n\t\tinterface IDefaultObject { sitename: string; url: string; }\r\n\r\n\t\t//use this interface to ghet the default search engine list from the settings.json file:\r\n\t\tconst defaultSearchEngines: IDefaultObject[] = new Array(vscode.workspace.getConfiguration('webSearch').get('defaultSearchEngines'));\r\n\r\n\t\t//Now that we have an array of search engines, we need to loop through them and display them in a quick pick list\r\n\t\tlet items: vscode.QuickPickItem[] = [];\r\n\r\n\t\t//Only populate the default search engine list if the user wishes to use default search engines:\r\n\t\tif (defaultSearch) {\r\n\t\t\t//Loop through the search engines array in the configuration settings and add them to the list:\r\n\t\t\tdefaultSearchEngines.forEach(site => {\r\n\t\t\t\tObject.entries(site).forEach(([key, value]) => {\r\n\t\t\t\t\t//console.log(key, value);\r\n\t\t\t\t\titems.push({\r\n\t\t\t\t\t\tlabel: value.sitename,\r\n\t\t\t\t\t\tdescription: value.url,\r\n\t\t\t\t\t\t//Display the selected text in the quick pick list. If the text exceeds 60 characters, it will be truncated with an ellipsis:\r\n\t\t\t\t\t\tdetail: `Search ${value.sitename} for ${text ? text.length <= 60 ? text.slice(0, 60) : text.slice(0, 60).concat('…') : \"\"}`,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//Convert the JSON object to string and parse the string to an object:\r\n\t\tvar searchEngineList = JSON.parse(JSON.stringify(searchEngine));\r\n\r\n\t\t//Map the searchEngineList to a new array:\r\n\t\tvar searchEngineArray = Object.keys(searchEngineList[0]).map((key) => [String(key), searchEngineList[0][key]]);\r\n\r\n\t\t//Loop through the search engines array in the configuration settings and add them to the list:\r\n\t\tfor (let i = 0; i < searchEngineArray.length; i++) {\r\n\t\t\titems.push({\r\n\t\t\t\tlabel: searchEngineArray[i][0],\r\n\t\t\t\tdescription: searchEngineArray[i][1],\r\n\t\t\t\t//Display the selected text in the quick pick list. If the text exceeds 60 characters, it will be truncated with an ellipsis:\r\n\t\t\t\tdetail: `Search ${searchEngineArray[i][0]} for ${text ? text.length <= 60 ? text.slice(0, 60) : text.slice(0, 60).concat('…') : \"\"}`,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t//Only populate the old search engine list if the user wishes to use default search engines:\r\n\t\tif (defaultSearch || items.length === 0) {\r\n\r\n\t\t\t//Create a quick pick list variable to handle the old search engine (defined as it is used a couple times, saving many lines of code):\r\n\t\t\tconst searchEngineOldArray: vscode.QuickPickItem = {\r\n\t\t\t\tlabel: \"Old Search Engine\",\r\n\t\t\t\tdescription: searchEngineOld,\r\n\t\t\t\tdetail: \"Search Engine from old settings\",\r\n\t\t\t};\r\n\r\n\t\t\titems.push(searchEngineOldArray);\r\n\t\t}\r\n\r\n\t\t//remove any duplicate items with the same description:\r\n\t\titems = items.filter((item, index, self) =>\r\n\t\t\tindex === self.findIndex((t) => (\r\n\t\t\t\tt.description === item.description\r\n\t\t\t))\r\n\t\t);\r\n\r\n\r\n\t\t//Initialize selectedSearchEngine variable as a QuickPickItem:\r\n\t\tlet selectedSearchEngine: vscode.QuickPickItem;\r\n\r\n\t\t//If more than one item is in the list, display the list in a quick pick list, otherwise, just run the search in the single search engine:\r\n\t\tif (items.length > 1) {\r\n\t\t\t//Use await to wait for the user to select an item from the list:\r\n\t\t\tselectedSearchEngine = await vscode.window.showQuickPick(items) as vscode.QuickPickItem;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//If only one item exits in the list, use that item as the search engine and no need to prompt the user:\r\n\t\t\tselectedSearchEngine = items[0];\r\n\r\n\t\t}\r\n\r\n\t\t//Create the final search url:\r\n\t\tlet searchUrl: string = \"\";\r\n\r\n\t\tif (selectedSearchEngine === null || selectedSearchEngine === undefined) {\r\n\t\t\t//Since no search engine was selected, notify the user and end the function:\r\n\t\t\tvscode.window.showWarningMessage(`No search engine selected. Please select one from the list and try again.`);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//Set the search engine to the selected Quick Pick engine:\r\n\t\t\tsearchUrl = selectedSearchEngine?.description!;\r\n\r\n\t\t}\r\n\r\n\t\t//Determine if the searchURL contains '%s', and if it does not, then display a message to the user that thir setting entry is not valid:\r\n\t\tif (searchUrl.includes(\"%s\")) {\r\n\r\n\t\t\t//Perform a string replacement to replace the %s placeholder of the search engine with the $text search query:\r\n\t\t\tsearchUrl = searchUrl.replace('%s', text ? text : \"\")!;\r\n\r\n\t\t\t//Display to the user what action is being taken and on what search engine:\r\n\t\t\tvscode.window.showInformationMessage(`Searching ${selectedSearchEngine?.label ? selectedSearchEngine?.label : \"web\"} for: ${text}`);\r\n\t\t\t//Perform the web search in the default browser:\r\n\t\t\tvscode.env.openExternal(vscode.Uri.parse(searchUrl!));\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//Display to the user that their search engine setting is not valid:\r\n\t\t\tconst errorMessage: string = `Search engine, *${selectedSearchEngine?.label ? selectedSearchEngine?.label : \"web\"}* setting is not valid. Please check your custom settings.`;\r\n\t\t\tvscode.window.showErrorMessage(errorMessage);\r\n\t\t\tconsole.log(errorMessage);\r\n\r\n\t\t\t//Log the error to the extension's output channel:\r\n\t\t\tlet webSearchConsole = vscode.window.createOutputChannel(\"Web Search\", \"markdown\");\r\n\t\t\twebSearchConsole.appendLine(errorMessage + \"\\nBe sure to include `%s` in the search engine URL.\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Extension is deactivated\r\nexport function deactivate() { }\r\n","module.exports = require(\"vscode\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(236);\n"],"names":["context","console","log","subscriptions","push","vscode","commands","registerCommand","editor","window","activeTextEditor","text","document","getText","selection","manualSearch","workspace","getConfiguration","get","defaultSearch","undefined","showInformationMessage","showInputBox","placeHolder","prompt","searchEngineOld","searchEngine","Array","defaultSearchEngines","items","forEach","site","Object","entries","key","value","label","sitename","description","url","detail","length","slice","concat","searchEngineList","JSON","parse","stringify","searchEngineArray","keys","map","String","i","searchEngineOldArray","selectedSearchEngine","filter","item","index","self","findIndex","t","showQuickPick","searchUrl","includes","replace","env","openExternal","Uri","errorMessage","showErrorMessage","createOutputChannel","appendLine","showWarningMessage","performWebSearch","module","exports","require","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call"],"sourceRoot":""}