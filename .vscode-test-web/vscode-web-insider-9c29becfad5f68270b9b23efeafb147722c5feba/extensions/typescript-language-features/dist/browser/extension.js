/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={8331:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Lc});var r,i,s,o,a,c,l,u,d,p,g,h,f=n(7549),m=Object.defineProperty,v=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,S=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w=(e,t)=>{for(var n in t||(t={}))y.call(t,n)&&S(e,n,t[n]);if(v)for(var n of v(t))C.call(t,n)&&S(e,n,t[n]);return e},b=(e,t)=>()=>(e&&(t=e(e=0)),t),x=(e,t,n)=>new Promise(((r,i)=>{var s=e=>{try{a(n.next(e))}catch(e){i(e)}},o=e=>{try{a(n.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,o);a((n=n.apply(e,t)).next())})),T=b((()=>{r={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}})),I=b((()=>{i="function",s="object",o="undefined",a="prototype",c="hasOwnProperty",u=(l=Object)[a],d=l.assign,p=l.create,g=l.defineProperty,h=u[c]}));function k(){return typeof globalThis!==o&&globalThis?globalThis:typeof self!==o&&self?self:typeof window!==o&&window?window:typeof n.g!==o&&n.g?n.g:null}function _(e){throw new TypeError(e)}function P(e){if(p)return p(e);if(null==e)return{};var t=typeof e;function n(){}return t!==s&&t!==i&&_("Object prototype may only be an Object:"+e),n[a]=e,new n}var E=b((()=>{I()}));function A(e,t){function n(){this.constructor=e}typeof t!==i&&null!==t&&_("Class extends value "+String(t)+" is not a constructor or null"),M(e,t),e[a]=null===t?P(t):(n[a]=t[a],new n)}var R,D,M,F=b((()=>{I(),E(),(k()||{}).Symbol,(k()||{}).Reflect,R=function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])u[c].call(t,i)&&(e[i]=t[i]);return e},D=d||R,M=function(e,t){return(M=l.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t[c](n)&&(e[n]=t[n])})(e,t)}})),L=b((()=>{})),N=b((()=>{I(),E(),F(),L()}));function j(e,t){return e&&le[X].hasOwnProperty.call(e,t)}function O(e){return e&&(e===le[X]||e===Array[X])}function V(e){return O(e)||e===Function[X]}function q(e){if(e){if(ue)return ue(e);var t=e[oe]||e[X]||(e[J]?e[J][X]:null);if(t)return t}return null}function K(e,t){var n=[],r=le.getOwnPropertyNames;if(r)n=r(e);else for(var i in e)"string"==typeof i&&j(e,i)&&n.push(i);if(n&&n.length>0)for(var s=0;s<n.length;s++)t(n[s])}function U(e,t,n){return t!==J&&typeof e[t]===Q&&(n||j(e,t))}function B(e){throw new TypeError("DynamicProto: "+e)}function z(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1}function W(e,t,n,r){var i=null;if(e&&j(n,ee)){var s=e[Z]||{};if((i=(s[n[ee]]||{})[t])||B("Missing ["+t+"] "+Q),!i[ne]&&!1!==s[re]){for(var o=!j(e,t),a=q(e),c=[];o&&a&&!V(a)&&!z(c,a);){var l=a[t];if(l){o=l===r;break}c.push(a),a=q(a)}try{o&&(e[t]=i),i[ne]=1}catch(e){s[re]=!1}}}return i}function H(e,t,n){var r=t[e];return r===n&&(r=q(t)[e]),typeof r!==Q&&B("["+e+"] is not a "+Q),r}function $(e,t){return j(e,X)?e.name||t||se:((e||{})[J]||{}).name||t||se}function G(e,t,n,r){j(e,X)||B("theClass is an invalid class definition.");var i=e[X];(function(e,t){if(ue)for(var n=[],r=q(t);r&&!V(r)&&!z(n,r);){if(r===e)return!0;n.push(r),r=q(r)}return!1})(i,t)||B("["+$(e)+"] is not in class hierarchy of ["+$(t)+"]");var s=null;j(i,ee)?s=i[ee]:(s=te+$(e,"_")+"$"+de,de++,i[ee]=s);var o=G[ie],a=!!o[ae];a&&r&&void 0!==r[ae]&&(a=!!r[ae]);var c=function(e){var t={};return K(e,(function(n){!t[n]&&U(e,n,!1)&&(t[n]=e[n])})),t}(t);n(t,function(e,t,n,r){function i(e,t,n){var i=t[n];if(i[Y]&&r){var s=e[Z]||{};!1!==s[re]&&(i=(s[t[ee]]||{})[n]||i)}return function(){return i.apply(e,arguments)}}var s={};K(n,(function(e){s[e]=i(t,n,e)}));for(var o=q(e),a=[];o&&!V(o)&&!z(a,o);)K(o,(function(e){!s[e]&&U(o,e,!ue)&&(s[e]=i(t,o,e))})),a.push(o),o=q(o);return s}(i,t,c,a));var l=!!ue&&!!o[ce];l&&r&&(l=!!r[ce]),function(e,t,n,r,i){if(!O(e)){var s=n[Z]=n[Z]||{},o=s[t]=s[t]||{};!1!==s[re]&&(s[re]=!!i),K(n,(function(t){U(n,t,!1)&&n[t]!==r[t]&&(o[t]=n[t],delete n[t],(!j(e,t)||e[t]&&!e[t][Y])&&(e[t]=function(e,t){var n=function(){return(W(this,t,e,n)||H(t,e,n)).apply(this,arguments)};return n[Y]=1,n}(e,t)))}))}}(i,s,t,c,!1!==l)}var J,X,Q,Z,Y,ee,te,ne,re,ie,se,oe,ae,ce,le,ue,de,pe,ge,he,fe,me=b((()=>{J="constructor",X="prototype",Q="function",Z="_dynInstFuncs",Y="_isDynProxy",ee="_dynClass",te="_dynCls$",re=ne="_dynInstChk",ie="_dfOpts",se="_unknown_",oe="__proto__",ae="useBaseInst",ce="setInstFuncs",ue=(le=Object).getPrototypeOf,de=0,pe={setInstFuncs:!0,useBaseInst:!0},G[ie]=pe,ge=G})),ve=b((()=>{var e;(e=he||(he={}))[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING",fe={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103}}));function ye(e){return u.toString.call(e)}function Ce(e,t){return typeof e===t}function Se(e){return void 0===e||typeof e===o}function we(e){return null===e||Se(e)}function be(e){return!we(e)}function xe(e,t){return e&&h.call(e,t)}function Te(e){return typeof e===s}function Ie(e){return typeof e===i}function ke(e,t,n,r){void 0===r&&(r=!1);var i=!1;if(!we(e))try{we(e[tt])?we(e[et])||(e[et](Ye+t,n),i=!0):(e[tt](t,n,r),i=!0)}catch(e){}return i}function _e(e,t,n,r){if(void 0===r&&(r=!1),!we(e))try{we(e[rt])?we(e[nt])||e[nt](Ye+t,n):e[rt](t,n,r)}catch(e){}}function Pe(e,t){if(e)for(var n in e)h.call(e,n)&&t.call(e,n,e[n])}function Ee(e,t){return!(!e||!t)&&-1!==e.indexOf(t)}function Ae(e){return"[object Date]"===ye(e)}function Re(e){return"[object Array]"===ye(e)}function De(e){return"[object Error]"===ye(e)}function Me(e){return"string"==typeof e}function Fe(e){return"number"==typeof e}function Le(e){return"boolean"==typeof e}function Ne(e){if(Ae(e)){var t=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function je(e,t,n){for(var r=e.length,i=0;i<r&&(!(i in e)||-1!==t.call(n||e,e[i],i,e));i++);}function Oe(e,t,n){for(var r=e.length,i=n||0,s=Math.max(i>=0?i:r-Math.abs(i),0);s<r;s++)if(s in e&&e[s]===t)return s;return-1}function Ve(e,t,n){for(var r=e.length,i=n||e,s=new Array(r),o=0;o<r;o++)o in e&&(s[o]=t.call(i,e[o],e));return s}function qe(e,t,n){var r,i=e.length,s=0;if(arguments.length>=3)r=arguments[2];else{for(;s<i&&!(s in e);)s++;r=e[s++]}for(;s<i;)s in e&&(r=t(r,e[s],s,e)),s++;return r}function Ke(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")}function Ue(e){var t=typeof e;t!==i&&(t!==s||null===e)&&_("objKeys called on non-object");var n=[];for(var r in e)e&&h.call(e,r)&&n.push(r);if(st)for(var o=ot.length,a=0;a<o;a++)e&&h.call(e,ot[a])&&n.push(ot[a]);return n}function Be(e,t,n,r){if(it)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),it(e,t,i),!0}catch(e){}return!1}function ze(){var e=Date;return e.now?e.now():(new e).getTime()}function We(e){return De(e)?e.name:""}function He(e,t,n,r,i){var s=n;return e&&(s=e[t])!==n&&(!i||i(s))&&(!r||r(n))&&(s=n,e[t]=s),s}function $e(e,t,n){var r;return e?!(r=e[t])&&we(r)&&(r=Se(n)?{}:n,e[t]=r):r=Se(n)?{}:n,r}function Ge(e){return!e}function Je(e){return!!e}function Xe(e){throw new Error(e)}function Qe(e,t,n){if(e&&t&&e!==t&&Te(e)&&Te(t)){var r=function(r){if(Me(r)){var i=t[r];Ie(i)?(!n||n(r,!0,t,e))&&(e[r]=(s=r,function(){var e=arguments;return t[s].apply(t,e)})):(!n||n(r,!1,t,e))&&(xe(e,r)&&delete e[r],Be(e,r,(function(){return t[r]}),(function(e){t[r]=e}))||(e[r]=i))}var s};for(var i in t)r(i)}return e}function Ze(e){return e&&(e=l(d?d({},e):e)),e}var Ye,et,tt,nt,rt,it,st,ot,at=b((()=>{N(),Ye="on",et="attachEvent",tt="addEventListener",nt="detachEvent",rt="removeEventListener",it=g,l.freeze,l.seal,st=!{toString:null}.propertyIsEnumerable("toString"),ot=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]}));function ct(e){var t=k();return t&&t[e]?t[e]:e===wt&&lt()?window:null}function lt(){return Boolean(typeof window===s&&window)}function ut(){return lt()?window:ct(wt)}function dt(){return Boolean(typeof document===s&&document)}function pt(){return dt()?document:ct(bt)}function gt(){return Boolean(typeof navigator===s&&navigator)?navigator:ct(xt)}function ht(e){if(e&&Nt){var t=ct("__mockLocation");if(t)return t}return typeof location===s&&location?location:ct(It)}function ft(){return ct(_t)}function mt(){return Boolean(typeof JSON===s&&JSON||null!==ct(Pt))}function vt(){return mt()?JSON||ct(Pt):null}function yt(){var e=gt();if(e&&(e.userAgent!==Lt||null===Ft)){var t=((Lt=e.userAgent)||"").toLowerCase();Ft=Ee(t,Dt)||Ee(t,Mt)}return Ft}function Ct(e){if(void 0===e&&(e=null),!e){var t=gt()||{};e=t?(t.userAgent||"").toLowerCase():""}var n=(e||"").toLowerCase();if(Ee(n,Dt))return parseInt(n.split(Dt)[1]);if(Ee(n,Mt)){var r=parseInt(n.split(Mt)[1]);if(r)return r+4}return null}function St(e){var t=Object[a].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":mt()&&(n=vt().stringify(e)),t+n}var wt,bt,xt,Tt,It,kt,_t,Pt,Et,At,Rt,Dt,Mt,Ft,Lt,Nt,jt=b((()=>{N(),at(),wt="window",bt="document",xt="navigator",Tt="history",It="location",kt="console",_t="performance",Pt="JSON",Et="crypto",At="msCrypto",Rt="ReactNative",Dt="msie",Mt="trident/",Ft=null,Lt=null,Nt=!1}));function Ot(e){return e?'"'+e.replace(/\"/g,"")+'"':""}function Vt(e,t){return(e||{}).logger||new Kt(t)}var qt,Kt,Ut=b((()=>{ve(),jt(),me(),at(),qt=function(){function e(e,t,n,r){void 0===n&&(n=!1);var i=this;i.messageId=e,i.message=(n?"AI: ":"AI (Internal): ")+e;var s="";mt()&&(s=vt().stringify(r));var o=(t?" message:"+Ot(t):"")+(r?" props:"+Ot(s):"");i.message+=o}return e.dataType="MessageData",e}(),Kt=function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={};ge(e,this,(function(e){function i(e,n){var r=t[e];return we(r)?n:r}we(t)&&(t={}),e.consoleLoggingLevel=function(){return i("loggingLevelConsole",0)},e.telemetryLoggingLevel=function(){return i("loggingLevelTelemetry",1)},e.maxInternalMessageLimit=function(){return i("maxMessageLimit",25)},e.enableDebugExceptions=function(){return i("enableDebugExceptions",!1)},e.throwInternal=function(t,n,i,s,o){void 0===o&&(o=!1);var a=new qt(n,i,o,s);if(e.enableDebugExceptions())throw a;if(!Se(a.message)){var c=e.consoleLoggingLevel();if(o){var l=+a.messageId;!r[l]&&c>=he.WARNING&&(e.warnToConsole(a.message),r[l]=!0)}else c>=he.WARNING&&e.warnToConsole(a.message);e.logInternalMessage(t,a)}},e.warnToConsole=function(e){var t=typeof console!==o?console:ct(kt);if(t){var n="log";t.warn&&(n="warn"),Ie(t[n])&&t[n](e)}},e.resetInternalMessageCount=function(){n=0,r={}},e.logInternalMessage=function(t,i){if(!(n>=e.maxInternalMessageLimit())){var s=!0,o="AITR_"+i.messageId;if(r[o]?s=!1:r[o]=!0,s&&(t<=e.telemetryLoggingLevel()&&(e.queue.push(i),n++),n===e.maxInternalMessageLimit())){var a="Internal events throttle limit per PageView reached for this app.",c=new qt(fe.MessageLimitPerPVExceeded,a,!1);e.queue.push(c),e.warnToConsole(a)}}}}))}}));function Bt(e,t,n,r,i){if(e){var s=e;if(Ie(s.getPerfMgr)&&(s=s.getPerfMgr()),s){var o=void 0,a=s.getCtx(Ht);try{if(o=s.create(t(),r,i)){if(a&&o.setCtx&&(o.setCtx(zt.ParentContextKey,a),a.getCtx&&a.setCtx)){var c=a.getCtx(zt.ChildrenContextKey);c||(c=[],a.setCtx(zt.ChildrenContextKey,c)),c.push(o)}return s.setCtx(Ht,o),n(o)}}catch(e){o&&o.setCtx&&o.setCtx("exception",e)}finally{o&&s.fire(o),s.setCtx(Ht,a)}}}return n()}var zt,Wt,Ht,$t,Gt=b((()=>{me(),at(),zt=function(){function e(t,n,r){var i,s=this,o=!1;s.start=ze(),s.name=t,s.isAsync=r,s.isChildEvt=function(){return!1},Ie(n)&&(o=Be(s,"payload",(function(){return!i&&Ie(n)&&(i=n(),n=null),i}))),s.getCtx=function(t){return t?t===e.ParentContextKey||t===e.ChildrenContextKey?s[t]:(s.ctx||{})[t]:null},s.setCtx=function(t,n){t&&(t===e.ParentContextKey?(s[t]||(s.isChildEvt=function(){return!0}),s[t]=n):t===e.ChildrenContextKey?s[t]=n:(s.ctx=s.ctx||{})[t]=n)},s.complete=function(){var t=0,r=s.getCtx(e.ChildrenContextKey);if(Re(r))for(var i=0;i<r.length;i++){var a=r[i];a&&(t+=a.time)}s.time=ze()-s.start,s.exTime=s.time-t,s.complete=function(){},!o&&Ie(n)&&(s.payload=n())}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),Wt=function e(t){this.ctx={},ge(e,this,(function(e){e.create=function(e,t,n){return new zt(e,t,n)},e.fire=function(e){e&&(e.complete(),t&&t.perfEvent(e))},e.setCtx=function(t,n){t&&((e.ctx=e.ctx||{})[t]=n)},e.getCtx=function(t){return(e.ctx||{})[t]}}))},Ht="CoreUtils.doPerf"})),Jt=b((()=>{Gt(),ve(),at(),$t=function(e,t){var n=this,r=null,i=Ie(e.processTelemetry),s=Ie(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return r},n.setNext=function(e){r=e},n.processTelemetry=function(o,a){a||(a=t);var c=e?e.identifier:"TelemetryPluginChain";Bt(a?a.core():null,(function(){return c+":processTelemetry"}),(function(){if(e&&i){n._hasRun=!0;try{a.setNext(r),s&&e.setNextPlugin(r),r&&(r._hasRun=!1),e.processTelemetry(o,a)}catch(n){var t=r&&r._hasRun;(!r||!t)&&a.diagLog().throwInternal(he.CRITICAL,fe.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+n),r&&!t&&r.processTelemetry(o,a)}}else r&&(n._hasRun=!0,r.processTelemetry(o,a))}),(function(){return{item:o}}),!o.sync)}}}));function Xt(e,t){var n=[];if(e&&e.length>0)for(var r=null,i=0;i<e.length;i++){var s=e[i];if(s&&Ie(s.processTelemetry)){var o=new $t(s,t);n.push(o),r&&r.setNext(o),r=o}}return n.length>0?n[0]:null}var Qt,Zt,Yt,en,tn,nn=b((()=>{Ut(),Jt(),at(),Qt=function e(t,n,r,i){var s=this,o=null;null!==i&&(t&&Ie(t.getPlugin)?o=function(e,t,n){var r=[],i=!n;if(e)for(;e;){var s=e.getPlugin();(i||s===n)&&(i=!0,r.push(s)),e=e.getNext()}return i||r.push(n),Xt(r,t)}(t,s,i||t.getPlugin()):i?o=function(e,t,n){var r=e,i=!1;return n&&e&&(r=[],je(e,(function(e){(i||e===n)&&(i=!0,r.push(e))}))),n&&!i&&(r||(r=[]),r.push(n)),Xt(r,t)}(t,s,i):Se(i)&&(o=Xt(t,s))),s.core=function(){return r},s.diagLog=function(){return Vt(r,n)},s.getCfg=function(){return n},s.getExtCfg=function(e,t){var r;if(void 0===t&&(t={}),n){var i=n.extensionConfig;i&&e&&(r=i[e])}return r||t},s.getConfig=function(e,t,r){void 0===r&&(r=!1);var i,o=s.getExtCfg(e,null);return o&&!we(o[t])?i=o[t]:n&&!we(n[t])&&(i=n[t]),we(i)?r:i},s.hasNext=function(){return null!=o},s.getNext=function(){return o},s.setNext=function(e){o=e},s.processNext=function(e){var t=o;t&&(o=t.getNext(),t.processTelemetry(e,s))},s.createNew=function(t,i){return void 0===t&&(t=null),new e(t||o,n,r,i)}}})),rn=b((()=>{Zt="iKey",Yt="extensionConfig"})),sn=b((()=>{nn(),at(),rn(),en="getPlugin",tn=function(){function e(){var e=this,t=!1,n=null,r=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){r=e},e.processNext=function(e,t){t?t.processNext(e):r&&Ie(r.processTelemetry)&&r.processTelemetry(e,null)},e._getTelCtx=function(t){void 0===t&&(t=null);var i=t;if(!i){var s=n||new Qt(null,{},e.core);i=r&&r[en]?s.createNew(null,r[en]):s.createNew(null,r)}return i},e._baseTelInit=function(i,s,o,a){i&&He(i,Yt,[],null,we),!a&&s&&(a=s.getProcessTelContext().getNext());var c=r;r&&r[en]&&(c=r[en]()),e.core=s,n=new Qt(a,i,s,c),t=!0}}return e.prototype.initialize=function(e,t,n,r){this._baseTelInit(e,t,n,r)},e}()}));function on(e,t){for(var n=[],r=null,i=e.getNext();i;){var s=i.getPlugin();s&&(r&&Ie(r[un])&&Ie(s[cn])&&r[un](s),(!Ie(s[dn])||!s[dn]())&&n.push(s),r=s,i=i.getNext())}je(n,(function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())}))}function an(e){return e.sort((function(e,t){var n=0,r=Ie(t[cn]);return Ie(e[cn])?n=r?e[ln]-t[ln]:1:r&&(n=-1),n}))}var cn,ln,un,dn,pn,gn=b((()=>{at(),cn="processTelemetry",ln="priority",un="setNextPlugin",dn="isInitialized"})),hn=b((()=>{N(),me(),sn(),nn(),gn(),at(),500,pn=function(e){function t(){var n,r=e.call(this)||this;function i(e){e&&e.length>0&&(function(e){je(e,(function(e){e.priority<500&&Xe("Channel has invalid priority"+e.identifier)}))}(e=e.sort((function(e,t){return e.priority-t.priority}))),n.push(e))}return r.identifier="ChannelControllerPlugin",r.priority=500,ge(t,r,(function(e,t){e.setNextPlugin=function(e){},e.processTelemetry=function(e,t){n&&je(n,(function(n){n.length>0&&r._getTelCtx(t).createNew(n).processNext(e)}))},e.getChannelControls=function(){return n},e.initialize=function(r,s,o){e.isInitialized()||(t.initialize(r,s,o),function(e,t){if(n=[],e&&je(e,(function(e){return i(e)})),t){var r=[];je(t,(function(e){e.priority>500&&r.push(e)})),i(r)}}((r||{}).channels,o),je(n,(function(e){return on(new Qt(e,r,s),o)})))}})),r}return A(t,e),t._staticInit=(Be(n=t.prototype,"ChannelControls",n.getChannelControls),void Be(n,"channelQueue",n.getChannelControls)),t;var n}(tn)}));function fn(e,t){var n=yn[Mn]||qn[Mn];return n||(n=yn[Mn]=yn(e,t),qn[Mn]=n),n}function mn(e){return!e||e.isEnabled()}function vn(e,t){var n;if(e)n=e.getCookieMgr();else if(t){var r=t.cookieCfg;n=r[Mn]?r[Mn]:yn(t)}return n||(n=fn(t,(e||{}).logger)),n}function yn(e,t){var n=function(e){var t=e.cookieCfg=e.cookieCfg||{};if(He(t,"domain",e.cookieDomain,be,we),He(t,"path",e.cookiePath||"/",null,we),we(t[An])){var n=void 0;Se(e[Rn])||(n=!e[Rn]),Se(e[Dn])||(n=!e[Dn]),t[An]=n}return t}(e||qn),r=n.path||"/",i=n.domain,s=!1!==n[An],o={isEnabled:function(){var e=s&&Cn(t),n=qn[Mn];return e&&n&&o!==n&&(e=mn(n)),e},setEnabled:function(e){s=!1!==e},set:function(e,t,s,a,c){if(mn(o)){var l={},u=Ke(t||Fn),d=u.indexOf(";");if(-1!==d&&(u=Ke(t.substring(0,d)),l=Sn(t.substring(d+1))),He(l,"domain",a||i,Je,Se),!we(s)){var p=yt();if(Se(l[En])){var g=ze()+1e3*s;if(g>0){var h=new Date;h.setTime(g),He(l,En,wn(h,p?kn:_n)||wn(h,p?kn:_n)||Fn,Je)}}p||He(l,"max-age",Fn+s,null,Se)}var f=ht();f&&"https:"===f.protocol&&(He(l,"secure",null,null,Se),null===Nn&&(Nn=!In((gt()||{}).userAgent)),Nn&&He(l,"SameSite","None",null,Se)),He(l,"path",c||r,null,Se),(n.setCookie||Tn)(e,bn(u,l))}},get:function(e){var t=Fn;return mn(o)&&(t=(n.getCookie||xn)(e)),t},del:function(e,t){mn(o)&&o.purge(e,t)},purge:function(e,r){if(Cn(t)){var i=((s={}).path=r||"/",s[En]="Thu, 01 Jan 1970 00:00:01 GMT",s);yt()||(i["max-age"]="0"),(n.delCookie||Tn)(e,bn(Fn,i))}var s}};return o[Mn]=o,o}function Cn(e){if(null===Ln){Ln=!1;try{Ln=void 0!==(On||{})[Pn]}catch(t){e&&e.throwInternal(he.WARNING,fe.CannotAccessCookie,"Cannot access document.cookie - "+We(t),{exception:St(t)})}}return Ln}function Sn(e){var t={};return e&&e.length&&je(Ke(e).split(";"),(function(e){if(e=Ke(e||Fn)){var n=e.indexOf("=");-1===n?t[e]=null:t[Ke(e.substring(0,n))]=Ke(e.substring(n+1))}})),t}function wn(e,t){return Ie(e[t])?e[t]():null}function bn(e,t){var n=e||Fn;return Pe(t,(function(e,t){n+="; "+e+(we(t)?Fn:"="+t)})),n}function xn(e){var t=Fn;if(On){var n=On[Pn]||Fn;jn!==n&&(Vn=Sn(n),jn=n),t=Ke(Vn[e]||Fn)}return t}function Tn(e,t){On&&(On[Pn]=e+"="+t)}function In(e){return!!Me(e)&&!!(Ee(e,"CPU iPhone OS 12")||Ee(e,"iPad; CPU OS 12")||Ee(e,"Macintosh; Intel Mac OS X 10_14")&&Ee(e,"Version/")&&Ee(e,"Safari")||Ee(e,"Macintosh; Intel Mac OS X 10_14")&&function(e,t){if(e){var n=t.length,r=e.length;if(e===t)return!0;if(r>=n){for(var i=r-1,s=n-1;s>=0;s--){if(e[i]!=t[s])return!1;i--}return!0}}return!1}(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Ee(e,"Chrome/5")||Ee(e,"Chrome/6")||Ee(e,"UnrealEngine")&&!Ee(e,"Chrome")||Ee(e,"UCBrowser/12")||Ee(e,"UCBrowser/11"))}var kn,_n,Pn,En,An,Rn,Dn,Mn,Fn,Ln,Nn,jn,On,Vn,qn,Kn,Un,Bn,zn,Wn=b((()=>{ve(),jt(),at(),kn="toGMTString",_n="toUTCString",Pn="cookie",En="expires",An="enabled",Rn="isCookieUseDisabled",Dn="disableCookiesUsage",Mn="_ckMgr",Fn="",Ln=null,Nn=null,jn=null,On=pt(),Vn={},qn={}})),Hn=b((()=>{N(),me(),hn(),nn(),gn(),Gt(),Wn(),at(),rn(),Kn="_notificationManager",Un=function e(){var t,n,r,i,s,o=!1;ge(e,this,(function(e){e._extensions=new Array,n=new pn,e.logger=P({throwInternal:function(e,t,n,r,i){void 0===i&&(i=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}}),t=[],e.isInitialized=function(){return o},e.initialize=function(t,i,s,a){e.isInitialized()&&Xe("Core should not be initialized more than once"),(!t||we(t.instrumentationKey))&&Xe("Please provide instrumentation key"),r=a,e[Kn]=a,e.config=t||{},t.extensions=we(t.extensions)?[]:t.extensions,$e(t,Yt).NotificationManager=a,s&&(e.logger=s);var c=[];c.push.apply(c,i.concat(t.extensions)),c=an(c);var l=[],u=[],d={};je(c,(function(e){(we(e)||we(e.initialize))&&Xe("Extensions must provide callback to initialize");var t=e.priority,r=e.identifier;e&&t&&(we(d[t])?d[t]=r:s.warnToConsole("Two extensions have same priority #"+t+" - "+d[t]+", "+r)),!t||t<n.priority?l.push(e):u.push(e)})),c.push(n),l.push(n),c=an(c),e._extensions=c,on(new Qt([n],t,e),c),on(new Qt(l,t,e),c),e._extensions=l,0===e.getTransmissionControls().length&&Xe("No channels available"),o=!0,e.releaseQueue()},e.getTransmissionControls=function(){return n.getChannelControls()},e.track=function(n){He(n,Zt,e.config.instrumentationKey,null,Ge),He(n,"time",Ne(new Date),null,Ge),He(n,"ver","4.0",null,we),e.isInitialized()?e.getProcessTelContext().processNext(n):t.push(n)},e.getProcessTelContext=function(){var t=e._extensions,r=t;return(!t||0===t.length)&&(r=[n]),new Qt(r,e.config,e)},e.getNotifyMgr=function(){return r||(r=P({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){},eventsSendRequest:function(e,t){}}),e[Kn]=r),r},e.getCookieMgr=function(){return s||(s=yn(e.config,e.logger)),s},e.setCookieMgr=function(e){s=e},e.getPerfMgr=function(){return i||e.config&&e.config.enablePerfMgr&&(i=new Wt(e.getNotifyMgr())),i},e.setPerfMgr=function(e){i=e},e.eventCnt=function(){return t.length},e.releaseQueue=function(){t.length>0&&(je(t,(function(t){e.getProcessTelContext().processNext(t)})),t=[])}}))}})),$n=b((()=>{me(),at(),Bn=function e(t){this.listeners=[];var n=!!(t||{}).perfEvtsSendAll;ge(e,this,(function(e){e.addNotificationListener=function(t){e.listeners.push(t)},e.removeNotificationListener=function(t){for(var n=Oe(e.listeners,t);n>-1;)e.listeners.splice(n,1),n=Oe(e.listeners,t)},e.eventsSent=function(t){je(e.listeners,(function(e){e&&e.eventsSent&&setTimeout((function(){return e.eventsSent(t)}),0)}))},e.eventsDiscarded=function(t,n){je(e.listeners,(function(e){e&&e.eventsDiscarded&&setTimeout((function(){return e.eventsDiscarded(t,n)}),0)}))},e.eventsSendRequest=function(t,n){je(e.listeners,(function(e){if(e&&e.eventsSendRequest)if(n)setTimeout((function(){return e.eventsSendRequest(t,n)}),0);else try{e.eventsSendRequest(t,n)}catch(e){}}))},e.perfEvent=function(t){t&&(n||!t.isChildEvt())&&je(e.listeners,(function(e){if(e&&e.perfEvent)if(t.isAsync)setTimeout((function(){return e.perfEvent(t)}),0);else try{e.perfEvent(t)}catch(e){}}))}}))}})),Gn=b((()=>{N(),Hn(),T(),$n(),Gt(),Ut(),me(),at(),zn=function(e){function t(){var n=e.call(this)||this;return ge(t,n,(function(e,t){function n(t){var n=e.getNotifyMgr();n&&n.eventsDiscarded([t],r.InvalidEvent)}e.initialize=function(e,n,r,i){t.initialize(e,n,r||new Kt(e),i||new Bn(e))},e.track=function(r){Bt(e.getPerfMgr(),(function(){return"AppInsightsCore:track"}),(function(){null===r&&(n(r),Xe("Invalid telemetry item")),function(e){if(we(e.name))throw n(e),Error("telemetry name required")}(r),t.track(r)}),(function(){return{item:r}}),!r.sync)},e.addNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.addNotificationListener(t)},e.removeNotificationListener=function(t){var n=e.getNotifyMgr();n&&n.removeNotificationListener(t)},e.pollInternalLogs=function(t){var n=e.config.diagnosticLogInterval;return(!n||!(n>0))&&(n=1e4),setInterval((function(){var n=e.logger?e.logger.queue:[];je(n,(function(n){var r={name:t||"InternalMessageId: "+n.messageId,iKey:e.config.instrumentationKey,time:Ne(new Date),baseType:qt.dataType,baseData:{message:n.message}};e.track(r)})),n.length=0}),n)}})),n}return A(t,e),t}(Un)}));function Jn(e){e<0&&(e>>>=0),ir=123456789+e&nr,sr=987654321-e&nr,rr=!0}function Xn(){try{var e=2147483647&ze();Jn((Math.random()*tr^e)+e)}catch(e){}}function Qn(e){return e>0?Math.floor(Zn()/nr*(e+1))>>>0:0}function Zn(e){var t,n=ct(Et)||ct(At);return n&&n.getRandomValues?t=n.getRandomValues(new Uint32Array(1))[0]&nr:yt()?(rr||Xn(),t=er()&nr):t=Math.floor(tr*Math.random()|0),e||(t>>>=0),t}function Yn(e){e?Jn(e):Xn()}function er(e){var t=((sr=36969*(65535&sr)+(sr>>16)&nr)<<16)+(65535&(ir=18e3*(65535&ir)+(ir>>16)&nr))>>>0&nr|0;return e||(t>>>=0),t}var tr,nr,rr,ir,sr,or=b((()=>{jt(),at(),tr=4294967296,nr=4294967295,rr=!1,ir=123456789,sr=987654321}));function ar(e,t){var n=!1,r=ut();r&&(n=ke(r,e,t),n=ke(r.body,e,t)||n);var i=pt();return i&&(n=br.Attach(i,e,t)||n),n}function cr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(wr,(function(e){var t=0|Qn(15);return("x"===e?t:3&t|8).toString(16)}))}function lr(){var e=ft();return e&&e.now?e.now():ze()}function ur(e){void 0===e&&(e=22);for(var t=Zn()>>>0,n=0,r="";r.length<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,5===n&&(t=(Zn()<<2&4294967295|3&t)>>>0,n=0);return r}function dr(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",r=0;r<4;r++)n+=t[15&(e=Zn())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var i=t[8+(3&Zn())|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)}function pr(e,t){var n=fn(e,t),r=Sr._canUseCookies;return null===yr&&(yr=[],Cr=r,Be(Sr,"_canUseCookies",(function(){return Cr}),(function(e){Cr=e,je(yr,(function(t){t.setEnabled(e)}))}))),-1===Oe(yr,n)&&yr.push(n),Le(r)&&n.setEnabled(r),Le(Cr)&&n.setEnabled(Cr),n}function gr(){pr().setEnabled(!1)}function hr(e){return pr(null,e).isEnabled()}function fr(e,t){return pr(null,e).get(t)}function mr(e,t,n,r){pr(null,e).set(t,n,null,r)}function vr(e,t){return pr(null,e).del(t)}var yr,Cr,Sr,wr,br,xr=b((()=>{N(),Wn(),jt(),at(),or(),yr=null,Sr={_canUseCookies:void 0,isTypeof:Ce,isUndefined:Se,isNullOrUndefined:we,hasOwnProperty:xe,isFunction:Ie,isObject:Te,isDate:Ae,isArray:Re,isError:De,isString:Me,isNumber:Fe,isBoolean:Le,toISOString:Ne,arrForEach:je,arrIndexOf:Oe,arrMap:Ve,arrReduce:qe,strTrim:Ke,objCreate:P,objKeys:Ue,objDefineAccessors:Be,addEventHandler:ar,dateNow:ze,isIE:yt,disableCookies:gr,newGuid:cr,perfNow:lr,newId:ur,randomValue:Qn,random32:Zn,mwcRandomSeed:Yn,mwcRandom32:er,generateW3CId:dr},wr=/[xy]/g,br={Attach:ke,AttachEvent:ke,Detach:_e,DetachEvent:_e}}));function Tr(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function Ir(e,t,n,r,i){i>=0&&i<=2&&Tr(e,(function(e,s){var o=e.cbks,a=o[Er[i]];if(a){t.ctx=function(){return r[s]=r[s]||{}};try{a.apply(t.inst,n)}catch(e){var c=t.err;try{var l=o[Er[2]];l&&(t.err=e,l.apply(t.inst,n))}catch(e){}finally{t.err=c}}}}))}function kr(e,t,n){var r=null;return e&&(xe(e,t)?r=e:n&&(r=kr(function(e){if(e){if(Dr)return Dr(e);var t=e[Ar]||e[a]||e[Rr];if(t)return t}return null}(e),t,!1))),r}function _r(e,t,n,r){if(void 0===r&&(r=!0),e&&t&&n){var s=kr(e,t,r);if(s){var o=s[t];if(typeof o===i){var a=o[Pr];if(!a){var c=function(e){return function(){var t=this,n=arguments,r=e.h,i={name:e.n,inst:t,ctx:null,set:c},s=[],o=a([i],n);function a(e,t){return Tr(t,(function(t){e.push(t)})),e}function c(e,t){(n=a([],n))[e]=t,o=a([i],n)}Ir(r,i,o,s,0);var l=e.f;try{i.rslt=l.apply(t,n)}catch(e){throw i.err=e,Ir(r,i,o,s,3),e}return Ir(r,i,o,s,1),i.rslt}}(a={i:0,n:t,f:o,h:[]});c[Pr]=a,s[t]=c}var l={id:a.i,cbks:n,rm:function(){var e=this.id;Tr(a.h,(function(t,n){if(t.id===e)return a.h.splice(n,1),1}))}};return a.i++,a.h.push(l),l}}}return null}var Pr,Er,Ar,Rr,Dr,Mr,Fr=b((()=>{N(),at(),Pr="_aiHooks",Er=["req","rsp","hkErr","fnErr"],Ar="__proto__",Rr="constructor",Dr=Object.getPrototypeOf})),Lr=b((()=>{Gn(),Hn(),sn(),or(),xr(),at(),jt(),N(),$n(),Gt(),Ut(),ve(),Fr(),Wn()})),Nr=b((()=>{Mr={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"}}));function jr(e,t,n){var r=t.length,i=Or(e,t);if(i.length!==r){for(var s=0,o=i;void 0!==n[o];)s++,o=i.substring(0,147)+$r(s);i=o}return i}function Or(e,t){var n;return t&&(t=Ke(t.toString())).length>150&&(n=t.substring(0,150),e.throwInternal(he.WARNING,fe.NameTooLong,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function Vr(e,t,n){var r;return void 0===n&&(n=1024),t&&(n=n||1024,(t=Ke(t)).toString().length>n&&(r=t.toString().substring(0,n),e.throwInternal(he.WARNING,fe.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0))),r||t}function qr(e,t){return Hr(e,t,2048,fe.UrlTooLong)}function Kr(e,t){var n;return t&&t.length>32768&&(n=t.substring(0,32768),e.throwInternal(he.WARNING,fe.MessageTruncated,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function Ur(e,t){var n;if(t){var r=""+t;r.length>32768&&(n=r.substring(0,32768),e.throwInternal(he.WARNING,fe.ExceptionTruncated,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0))}return n||t}function Br(e,t){if(t){var n={};Pe(t,(function(t,r){if(Te(r)&&mt())try{r=vt().stringify(r)}catch(t){e.throwInternal(he.WARNING,fe.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:t},!0)}r=Vr(e,r,8192),t=jr(e,t,n),n[t]=r})),t=n}return t}function zr(e,t){if(t){var n={};Pe(t,(function(t,r){t=jr(e,t,n),n[t]=r})),t=n}return t}function Wr(e,t){return t&&Hr(e,t,128,fe.IdTooLong).toString()}function Hr(e,t,n,r){var i;return t&&(t=Ke(t)).length>n&&(i=t.substring(0,n),e.throwInternal(he.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),i||t}function $r(e){var t="00"+e;return t.substr(t.length-3)}var Gr,Jr=b((()=>{Lr(),Gr={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768,sanitizeKeyAndAddUniqueness:jr,sanitizeKey:Or,sanitizeString:Vr,sanitizeUrl:qr,sanitizeMessage:Kr,sanitizeException:Ur,sanitizeProperties:Br,sanitizeMeasurements:zr,sanitizeId:Wr,sanitizeInput:Hr,padNumber:$r,trim:Ke}}));function Xr(e){var t=null;if(Ie(Event))t=new Event(e);else{var n=pt();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t}var Qr=b((()=>{Lr()}));function Zr(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()}function Yr(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,r=""+Math.floor(e/6e4)%60,i=""+Math.floor(e/36e5)%24,s=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,(s>0?s+".":"")+(i=i.length<2?"0"+i:i)+":"+r+":"+n+"."+t}function ei(){var e=gt();return"sendBeacon"in e&&e.sendBeacon}function ti(e,t){var n=null;return je(e,(function(e){if(e.identifier===t)return n=e,-1})),n}function ni(e,t,n,r,i){return!i&&Me(e)&&("Script error."===e||"Script error"===e)}var ri,ii,si,oi,ai,ci,li,ui,di=b((()=>{Lr()})),pi=b((()=>{ri="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",ii="sampleRate",si="ProcessLegacy",oi="http.method",ai="https://dc.services.visualstudio.com",ci="not_specified"})),gi=b((()=>{var e;(e=li||(li={}))[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage",function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C",e[e.W3C=2]="W3C"}(ui||(ui={}))}));function hi(){return yi()?fi(li.LocalStorage):null}function fi(e){try{if(we(k()))return null;var t=new Date,n=ct(e===li.LocalStorage?"localStorage":"sessionStorage");n.setItem(t.toString(),t.toString());var r=n.getItem(t.toString())!==t.toString();if(n.removeItem(t.toString()),!r)return n}catch(e){}return null}function mi(){return bi()?fi(li.SessionStorage):null}function vi(){_i=!1,Pi=!1}function yi(){return void 0===_i&&(_i=!!fi(li.LocalStorage)),_i}function Ci(e,t){var n=hi();if(null!==n)try{return n.getItem(t)}catch(t){_i=!1,e.throwInternal(he.WARNING,fe.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+We(t),{exception:St(t)})}return null}function Si(e,t,n){var r=hi();if(null!==r)try{return r.setItem(t,n),!0}catch(t){_i=!1,e.throwInternal(he.WARNING,fe.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+We(t),{exception:St(t)})}return!1}function wi(e,t){var n=hi();if(null!==n)try{return n.removeItem(t),!0}catch(t){_i=!1,e.throwInternal(he.WARNING,fe.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+We(t),{exception:St(t)})}return!1}function bi(){return void 0===Pi&&(Pi=!!fi(li.SessionStorage)),Pi}function xi(){var e=[];return bi()&&Pe(ct("sessionStorage"),(function(t){e.push(t)})),e}function Ti(e,t){var n=mi();if(null!==n)try{return n.getItem(t)}catch(t){Pi=!1,e.throwInternal(he.WARNING,fe.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+We(t),{exception:St(t)})}return null}function Ii(e,t,n){var r=mi();if(null!==r)try{return r.setItem(t,n),!0}catch(t){Pi=!1,e.throwInternal(he.WARNING,fe.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+We(t),{exception:St(t)})}return!1}function ki(e,t){var n=mi();if(null!==n)try{return n.removeItem(t),!0}catch(t){Pi=!1,e.throwInternal(he.WARNING,fe.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+We(t),{exception:St(t)})}return!1}var _i,Pi,Ei=b((()=>{Lr(),gi(),_i=void 0,Pi=void 0}));function Ai(e){var t=ji,n=Oi,r=n[t];return Ni.createElement?n[t]||(r=n[t]=Ni.createElement("a")):r={host:Fi(e,!0)},r.href=e,++t>=n.length&&(t=0),ji=t,r}function Ri(e){var t,n=Ai(e);return n&&(t=n.href),t}function Di(e){var t,n=Ai(e);return n&&(t=n.pathname),t}function Mi(e,t){return e?e.toUpperCase()+" "+t:t}function Fi(e,t){var n=Li(e,t)||"";if(n){var r=n.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&r.length>3&&Me(r[2])&&r[2].length>0)return r[2]+(r[3]||"")}return n}function Li(e,t){var n=null;if(e){var r=e.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(null!=r&&r.length>2&&Me(r[2])&&r[2].length>0&&(n=r[2]||"",t&&r.length>2)){var i=(r[1]||"").toLowerCase(),s=r[3]||"";("http"===i&&":80"===s||"https"===i&&":443"===s)&&(s=""),n+=s}}return n}var Ni,ji,Oi,Vi=b((()=>{Lr(),Ni=pt()||{},ji=0,Oi=[null,null,null,null,null]}));function qi(e){return-1!==Bi.indexOf(e.toLowerCase())}function Ki(){var e=ft();if(e&&e.now&&e.timing){var t=e.now()+e.timing.navigationStart;if(t>0)return t}return ze()}function Ui(e,t){var n=null;return 0!==e&&0!==t&&!we(e)&&!we(t)&&(n=t-e),n}var Bi,zi,Wi,Hi,$i,Gi=b((()=>{Lr(),Nr(),Jr(),Qr(),di(),pi(),Ei(),Vi(),Bi=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],zi={NotSpecified:ci,createDomEvent:Xr,disableStorage:vi,isInternalApplicationInsightsEndpoint:qi,canUseLocalStorage:yi,getStorage:Ci,setStorage:Si,removeStorage:wi,canUseSessionStorage:bi,getSessionStorageKeys:xi,getSessionStorage:Ti,setSessionStorage:Ii,removeSessionStorage:ki,disableCookies:gr,canUseCookies:hr,disallowsSameSiteNone:In,setCookie:mr,stringToBoolOrDefault:Zr,getCookie:fr,deleteCookie:vr,trim:Ke,newId:ur,random32:function(){return Zn(!0)},generateW3CId:dr,isArray:Re,isError:De,isDate:Ae,toISOStringForIE8:Ne,getIEVersion:Ct,msToTimeSpan:Yr,isCrossOriginError:ni,dump:St,getExceptionName:We,addEventHandler:ke,IsBeaconApiSupported:ei,getExtension:ti},Wi={parseUrl:Ai,getAbsoluteUrl:Ri,getPathName:Di,getCompleteUrl:Mi,parseHost:Fi,parseFullHost:Li},Hi={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(e,t,n){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e.correlationHeaderExcludePatterns)for(var r=0;r<e.correlationHeaderExcludePatterns.length;r++)if(e.correlationHeaderExcludePatterns[r].test(t))return!1;var i=Ai(t).host.toLowerCase();if(i&&(-1!==i.indexOf(":443")||-1!==i.indexOf(":80"))&&(i=(Li(t,!0)||"").toLowerCase()),(!e||!e.enableCorsCorrelation)&&i&&i!==n)return!1;var s,o=e&&e.correlationHeaderDomains;if(o&&(je(o,(function(e){var t=new RegExp(e.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||t.test(i)})),!s))return!1;var a=e&&e.correlationHeaderExcludedDomains;if(!a||0===a.length)return!0;for(r=0;r<a.length;r++)if(new RegExp(a[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(i))return!1;return i&&i.length>0},getCorrelationContext:function(e){if(e){var t=Hi.getCorrelationContextValue(e,Mr.requestContextTargetKey);if(t&&t!==Hi.correlationIdPrefix)return t}},getCorrelationContextValue:function(e,t){if(e)for(var n=e.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(2===i.length&&i[0]===t)return i[1]}}},$i={Now:Ki,GetDuration:Ui}}));function Ji(e){if(!e)return{};var t=qe(e.split(Xi),(function(e,t){var n=t.split(Qi);if(2===n.length){var r=n[0].toLowerCase(),i=n[1];e[r]=i}return e}),{});if(Ue(t).length>0){if(t.endpointsuffix){var n=t.location?t.location+".":"";t.ingestionendpoint=t.ingestionendpoint||"https://"+n+"dc."+t.endpointsuffix}t.ingestionendpoint=t.ingestionendpoint||ai}return t}var Xi,Qi,Zi,Yi,es,ts,ns,rs,is,ss,os,as,cs=b((()=>{pi(),Lr(),Xi=";",Qi="=",Zi={parse:Ji}})),ls=b((()=>{Yi=function(){}})),us=b((()=>{N(),ls(),es=function(e){function t(){return e.call(this)||this}return A(t,e),t}(Yi)})),ds=b((()=>{ts=function(){this.ver=1,this.sampleRate=100,this.tags={}}})),ps=b((()=>{N(),ds(),Jr(),Lr(),pi(),ns=function(e){function t(t,n,r){var i=e.call(this)||this;return i.name=Vr(t,r)||ci,i.data=n,i.time=Ne(new Date),i.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return 100===i.sampleRate?4:1},tags:1,data:1},i}return A(t,e),t}(ts)})),gs=b((()=>{rs=function(){this.ver=2,this.properties={},this.measurements={}}})),hs=b((()=>{N(),gs(),Jr(),pi(),is=function(e){function t(t,n,r,i){var s=e.call(this)||this;return s.aiDataContract={ver:1,name:1,properties:0,measurements:0},s.name=Vr(t,n)||ci,s.properties=Br(t,r),s.measurements=zr(t,i),s}return A(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}(rs)})),fs=b((()=>{ss=function(){}})),ms=b((()=>{os=function(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}})),vs=b((()=>{as=function(){this.hasFullStack=!0,this.parsedStack=[]}}));function ys(e,t){var n=e;return n&&!Me(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(e),t&&(!n||"{}"===n)&&(n=Ie(e.toString)?e.toString():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function Cs(e,t){var n=e;return e&&((n=e[Es]||e[As]||"")&&!Me(n)&&(n=ys(n,!0)),e.filename&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?"))),t&&"String"!==t&&"Object"!==t&&"Error"!==t&&-1===(n||"").indexOf(t)&&(n=t+": "+n),n||""}function Ss(e){return e&&e.src&&Me(e.src)&&e.obj&&Re(e.obj)}function ws(e){var t=e||"";Me(t)||(t=Me(t[ks])?t[ks]:""+t);var n=t.split("\n");return{src:t,obj:n}}function bs(e){var t=null;if(e)try{if(e[ks])t=ws(e[ks]);else if(e[Is]&&e[Is][ks])t=ws(e[Is][ks]);else if(e.exception&&e.exception[ks])t=ws(e.exception[ks]);else if(Ss(e))t=e;else if(Ss(e[_s]))t=e[_s];else if(window.opera&&e[Es])t=function(e){for(var t=[],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),t.push(i)}return{src:e,obj:t}}(e.message);else if(Me(e))t=ws(e);else{var n=e[Es]||e[As]||"";Me(e[Ps])&&(n&&(n+="\n"),n+=" from "+e[Ps]),n&&(t=ws(n))}}catch(e){t=ws(e)}return t||{src:"",obj:null}}function xs(e){var t="";if(e&&!(t=e.typeName||e.name||""))try{var n=/function (.{1,200})\(/.exec(e.constructor.toString());t=n&&n.length>1?n[1]:""}catch(e){}return t}function Ts(e){if(e)try{if(!Me(e)){var t=xs(e),n=ys(e,!1);return(!n||"{}"===n)&&(e[Is]&&(t=xs(e=e[Is])),n=ys(e,!0)),0!==n.indexOf(t)&&"String"!==t?t+":"+n:n}}catch(e){}return""+(e||"")}var Is,ks,_s,Ps,Es,As,Rs,Ds,Ms,Fs,Ls,Ns,js,Os,Vs,qs,Ks,Us,Bs,zs,Ws,Hs,$s,Gs,Js,Xs=b((()=>{N(),fs(),ms(),vs(),Jr(),Lr(),pi(),Is="error",ks="stack",_s="stackDetails",Ps="errorSrc",Es="message",As="description",Rs=function(e){function t(t,n,r,i,s,o){var a=e.call(this)||this;return a.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},function(e){return!!Te(e)&&"ver"in e&&"exceptions"in e&&"properties"in e}(n)?(a.exceptions=n.exceptions,a.properties=n.properties,a.measurements=n.measurements,n.severityLevel&&(a.severityLevel=n.severityLevel),n.id&&(a.id=n.id),n.problemGroup&&(a.problemGroup=n.problemGroup),a.ver=2,we(n.isManual)||(a.isManual=n.isManual)):(r||(r={}),a.exceptions=[new Ds(t,n,r)],a.properties=Br(t,r),a.measurements=zr(t,i),s&&(a.severityLevel=s),o&&(a.id=o)),a}return A(t,e),t.CreateAutoException=function(e,t,n,r,i,s,o,a){var c=xs(i||s||e);return{message:Cs(e,c),url:t,lineNumber:n,columnNumber:r,error:Ts(i||s||e),evt:Ts(s||e),typeName:c,stackDetails:bs(o||i||s),errorSrc:a}},t.CreateFromInterface=function(e,n,r,i){var s=n.exceptions&&Ve(n.exceptions,(function(t){return Ds.CreateFromInterface(e,t)}));return new t(e,D({},n,{exceptions:s}),r,i)},t.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,r=e.measurements,i=e.severityLevel,s=(e.ver,e.problemGroup),o=e.id,a=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&Ve(t,(function(e){return e.toInterface()}))||void 0,severityLevel:i,properties:n,measurements:r,problemGroup:s,id:o,isManual:a}},t.CreateSimpleException=function(e,t,n,r,i,s){return{exceptions:[{hasFullStack:!0,message:e,stack:i,typeName:t}]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=Ts,t}(os),Ds=function(e){function t(t,n,r){var i=e.call(this)||this;if(i.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},function(e){return!!Te(e)&&"hasFullStack"in e&&"typeName"in e}(n))i.typeName=n.typeName,i.message=n.message,i[ks]=n[ks],i.parsedStack=n.parsedStack,i.hasFullStack=n.hasFullStack;else{var s=n,o=s&&s.evt;De(s)||(s=s[Is]||o||s),i.typeName=Vr(t,xs(s))||ci,i.message=Kr(t,Cs(n||s,i.typeName))||ci;var a=n[_s]||bs(n);i.parsedStack=function(e){var t,n=e.obj;if(n&&n.length>0){t=[];var r=0,i=0;if(je(n,(function(e){var n=e.toString();if(Ms.regex.test(n)){var s=new Ms(n,r++);i+=s.sizeInBytes,t.push(s)}})),i>32768)for(var s=0,o=t.length-1,a=0,c=s,l=o;s<o;){if((a+=t[s].sizeInBytes+t[o].sizeInBytes)>32768){var u=l-c+1;t.splice(c,u);break}c=s,l=o,s++,o--}}return t}(a),i[ks]=Ur(t,function(e){var t="";return e&&(e.obj?je(e.obj,(function(e){t+=e+"\n"})):t=e.src||""),t}(a)),i.hasFullStack=Re(i.parsedStack)&&i.parsedStack.length>0,r&&(r.typeName=r.typeName||i.typeName)}return i}return A(t,e),t.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&Ve(this.parsedStack,(function(e){return e.toInterface()}));return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[ks],parsedStack:e||void 0}},t.CreateFromInterface=function(e,n){var r=n.parsedStack instanceof Array&&Ve(n.parsedStack,(function(e){return Ms.CreateFromInterface(e)}))||n.parsedStack;return new t(e,D({},n,{parsedStack:r}))},t}(as),Ms=function(e){function t(n,r){var i=e.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},"string"==typeof n){var s=n;i.level=r,i.method="<no_method>",i.assembly=Ke(s),i.fileName="",i.line=0;var o=s.match(t.regex);o&&o.length>=5&&(i.method=Ke(o[2])||i.method,i.fileName=Ke(o[4]),i.line=parseInt(o[5])||0)}else i.level=n.level,i.method=n.method,i.assembly=n.assembly,i.fileName=n.fileName,i.line=n.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=t.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}return A(t,e),t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},t.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}(ss)})),Qs=b((()=>{Fs=function(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}}})),Zs=b((()=>{var e;(e=Ls||(Ls={}))[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"})),Ys=b((()=>{Zs(),Ns=function(){this.kind=Ls.Measurement}})),eo=b((()=>{N(),Ys(),js=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},t}return A(t,e),t}(Ns)})),to=b((()=>{N(),Qs(),Jr(),eo(),pi(),Os=function(e){function t(t,n,r,i,s,o,a,c){var l=e.call(this)||this;l.aiDataContract={ver:1,metrics:1,properties:0};var u=new js;return u.count=i>0?i:void 0,u.max=isNaN(o)||null===o?void 0:o,u.min=isNaN(s)||null===s?void 0:s,u.name=Vr(t,n)||ci,u.value=r,l.metrics=[u],l.properties=Br(t,a),l.measurements=zr(t,c),l}return A(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}(Fs)})),no=b((()=>{N(),gs(),Vs=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return A(t,e),t}(rs)})),ro=b((()=>{N(),no(),Jr(),di(),pi(),qs=function(e){function t(t,n,r,i,s,o,a){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},c.id=Wr(t,a),c.url=qr(t,r),c.name=Vr(t,n)||ci,isNaN(i)||(c.duration=Yr(i)),c.properties=Br(t,s),c.measurements=zr(t,o),c}return A(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}(Vs)})),io=b((()=>{Ks=function(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}})),so=b((()=>{N(),Jr(),Gi(),io(),di(),Us=function(e){function t(t,n,r,i,s,o,a,c,l,u,d,p){void 0===l&&(l="Ajax");var g=e.call(this)||this;g.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},g.id=n,g.duration=Yr(s),g.success=o,g.resultCode=a+"",g.type=Vr(t,l);var h=function(e,t,n,r){var i,s=r,o=r;if(t&&t.length>0){var a=Ai(t);if(i=a.host,!s)if(null!=a.pathname){var c=0===a.pathname.length?"/":a.pathname;"/"!==c.charAt(0)&&(c="/"+c),o=a.pathname,s=Vr(e,n?n+" "+c:c)}else s=Vr(e,t)}else i=r,s=r;return{target:i,name:s,data:o}}(t,r,c,i);return g.data=qr(t,i)||h.data,g.target=Vr(t,h.target),u&&(g.target=g.target+" | "+u),g.name=Vr(t,h.name),g.properties=Br(t,d),g.measurements=zr(t,p),g}return A(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}(Ks)})),oo=b((()=>{Bs=function(){this.ver=2,this.properties={},this.measurements={}}})),ao=b((()=>{N(),oo(),Jr(),pi(),zs=function(e){function t(t,n,r,i,s){var o=e.call(this)||this;return o.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},n=n||ci,o.message=Kr(t,n),o.properties=Br(t,i),o.measurements=zr(t,s),r&&(o.severityLevel=r),o}return A(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}(Bs)})),co=b((()=>{N(),no(),Ws=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return A(t,e),t}(Vs)})),lo=b((()=>{N(),co(),Jr(),pi(),Hs=function(e){function t(t,n,r,i,s,o,a){var c=e.call(this)||this;return c.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},c.url=qr(t,r),c.name=Vr(t,n)||ci,c.properties=Br(t,s),c.measurements=zr(t,o),a&&(c.domProcessing=a.domProcessing,c.duration=a.duration,c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c.receivedResponse=a.receivedResponse,c.sentRequest=a.sentRequest),c}return A(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}(Ws)})),uo=b((()=>{N(),us(),$s=function(e){function t(t,n){var r=e.call(this)||this;return r.aiDataContract={baseType:1,baseData:1},r.baseType=t,r.baseData=n,r}return A(t,e),t}(es)})),po=b((()=>{var e;(e=Gs||(Gs={}))[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"})),go=b((()=>{Lr(),Js=function(){function e(){}return e.getConfig=function(e,t,n,r){var i;return void 0===r&&(r=!1),i=n&&e.extensionConfig&&e.extensionConfig[n]&&!we(e.extensionConfig[n][t])?e.extensionConfig[n][t]:e[t],we(i)?r:i},e}()}));function ho(e){var t="ai."+e+".";return function(e){return t+e}}var fo,mo,vo,yo,Co,So,wo,bo,xo,To,Io,ko,_o,Po,Eo,Ao,Ro,Do,Mo,Fo=b((()=>{var e;N(),Lr(),fo=ho("application"),mo=ho("device"),vo=ho("location"),yo=ho("operation"),Co=ho("session"),So=ho("user"),wo=ho("cloud"),bo=ho("internal"),xo=function(e){function t(){return e.call(this)||this}return A(t,e),t}((e={applicationVersion:fo("ver"),applicationBuild:fo("build"),applicationTypeId:fo("typeId"),applicationId:fo("applicationId"),applicationLayer:fo("layer"),deviceId:mo("id"),deviceIp:mo("ip"),deviceLanguage:mo("language"),deviceLocale:mo("locale"),deviceModel:mo("model"),deviceFriendlyName:mo("friendlyName"),deviceNetwork:mo("network"),deviceNetworkName:mo("networkName"),deviceOEMName:mo("oemName"),deviceOS:mo("os"),deviceOSVersion:mo("osVersion"),deviceRoleInstance:mo("roleInstance"),deviceRoleName:mo("roleName"),deviceScreenResolution:mo("screenResolution"),deviceType:mo("type"),deviceMachineName:mo("machineName"),deviceVMName:mo("vmName"),deviceBrowser:mo("browser"),deviceBrowserVersion:mo("browserVersion"),locationIp:vo("ip"),locationCountry:vo("country"),locationProvince:vo("province"),locationCity:vo("city"),operationId:yo("id"),operationName:yo("name"),operationParentId:yo("parentId"),operationRootId:yo("rootId"),operationSyntheticSource:yo("syntheticSource"),operationCorrelationVector:yo("correlationVector"),sessionId:Co("id"),sessionIsFirst:Co("isFirst"),sessionIsNew:Co("isNew"),userAccountAcquisitionDate:So("accountAcquisitionDate"),userAccountId:So("accountId"),userAgent:So("userAgent"),userId:So("id"),userStoreRegion:So("storeRegion"),userAuthUserId:So("authUserId"),userAnonymousUserAcquisitionDate:So("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:So("authUserAcquisitionDate"),cloudName:wo("name"),cloudRole:wo("role"),cloudRoleVer:wo("roleVer"),cloudRoleInstance:wo("roleInstance"),cloudEnvironment:wo("environment"),cloudLocation:wo("location"),cloudDeploymentUnit:wo("deploymentUnit"),internalNodeName:bo("nodeName"),internalSdkVersion:bo("sdkVersion"),internalAgentVersion:bo("agentVersion"),internalSnippet:bo("snippet"),internalSdkSrc:bo("sdkSrc")},function(){var t=this;e&&Pe(e,(function(e,n){t[e]=n}))}))})),Lo=b((()=>{Jr(),Lr(),pi(),To=function(){function e(){}return e.create=function(e,t,n,r,i,s){if(n=Vr(r,n)||ci,we(e)||we(t)||we(n))throw Error("Input doesn't contain all required fields");var o={name:n,time:Ne(new Date),iKey:"",ext:s||{},tags:[],data:{},baseType:t,baseData:e};return we(i)||Pe(i,(function(e,t){o.data[e]=t})),o},e}()})),No=b((()=>{Fo(),Io={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},ko=new xo})),jo=b((()=>{Gi(),cs(),Nr(),pi(),us(),ls(),ps(),hs(),Xs(),to(),ro(),no(),so(),ao(),lo(),uo(),po(),go(),Fo(),Jr(),Lo(),No(),gi(),di(),Qr(),Ei(),Vi(),_o="AppInsightsPropertiesPlugin",Po="AppInsightsChannelPlugin",Eo="ApplicationInsightsAnalytics"})),Oo=b((()=>{jo(),Lr(),me(),Ao=function e(t,n,r,i){ge(e,this,(function(e){var s,o=null,a=[],c=!1;function l(){r&&je(r.getTransmissionControls(),(function(e){je(e,(function(e){return e.flush(!0)}))}))}r&&(s=r.logger),e.trackPageView=function(e,r){var u=e.name;if(we(u)||"string"!=typeof u){var d=pt();u=e.name=d&&d.title||""}var p=e.uri;if(we(p)||"string"!=typeof p){var g=ht();p=e.uri=g&&g.href||""}if(!i.isPerformanceTimingSupported())return t.sendPageViewInternal(e,r),l(),void s.throwInternal(he.WARNING,fe.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var h,f,m=!1,v=i.getPerformanceTiming().navigationStart;v>0&&(h=Ui(v,+new Date),i.shouldCollectDuration(h)||(h=void 0)),!we(r)&&!we(r.duration)&&(f=r.duration),(n||!isNaN(f))&&(isNaN(f)&&(r||(r={}),r.duration=h),t.sendPageViewInternal(e,r),l(),m=!0),r||(r={}),function(e){a.push(e),o||(o=setInterval((function(){var e=a.slice(0),t=!1;a=[],je(e,(function(e){e()?t=!0:a.push(e)})),0===a.length&&(clearInterval(o),o=null),t&&l()}),100))}((function(){var n=!1;try{if(i.isPerformanceTimingDataReady()){n=!0;var o={name:u,uri:p};i.populatePageViewPerformanceEvent(o),o.isValid||m?(m||(r.duration=o.durationMs,t.sendPageViewInternal(e,r)),c||(t.sendPageViewPerformanceInternal(o,r),c=!0)):(r.duration=h,t.sendPageViewInternal(e,r))}else v>0&&Ui(v,+new Date)>6e4&&(n=!0,m||(r.duration=6e4,t.sendPageViewInternal(e,r)))}catch(e){s.throwInternal(he.CRITICAL,fe.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+We(e),{exception:St(e)})}return n}))}}))}})),Vo=b((()=>{jo(),Lr(),Ro=function(){function e(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}return e.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+St(e))}},e.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(e){return this._logger.warnToConsole("Call to restart failed: "+St(e)),null}},e.prototype.startPageVisitTimer=function(e,t){try{if(bi()){null!=Ti(this._logger,this.prevPageVisitDataKeyName)&&Xe("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new Do(e,t),r=vt().stringify(n);Ii(this._logger,this.prevPageVisitDataKeyName,r)}}catch(e){this._logger.warnToConsole("Call to start failed: "+St(e))}},e.prototype.stopPageVisitTimer=function(){try{if(bi()){var e=ze(),t=Ti(this._logger,this.prevPageVisitDataKeyName);if(t&&mt()){var n=vt().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,ki(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+St(e)),null}},e}(),Do=function(e,t){this.pageVisitStartTime=ze(),this.pageName=e,this.pageUrl=t}})),qo=b((()=>{jo(),Lr(),Mo=function(){function e(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return e.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming(),r=0,i=0,s=0,o=0,a=0;(t||n)&&(t?(r=t.duration,i=0===t.startTime?t.connectEnd:Ui(t.startTime,t.connectEnd),s=Ui(t.requestStart,t.responseStart),o=Ui(t.responseStart,t.responseEnd),a=Ui(t.responseEnd,t.loadEventEnd)):(r=Ui(n.navigationStart,n.loadEventEnd),i=Ui(n.navigationStart,n.connectEnd),s=Ui(n.requestStart,n.responseStart),o=Ui(n.responseStart,n.responseEnd),a=Ui(n.responseEnd,n.loadEventEnd)),0===r?this._logger.throwInternal(he.WARNING,fe.ErrorPVCalc,"error calculating page view performance.",{total:r,network:i,request:s,response:o,dom:a}):this.shouldCollectDuration(r,i,s,o,a)?r<Math.floor(i)+Math.floor(s)+Math.floor(o)+Math.floor(a)?this._logger.throwInternal(he.WARNING,fe.ClientPerformanceMathError,"client performance math error.",{total:r,network:i,request:s,response:o,dom:a}):(e.durationMs=r,e.perfTotal=e.duration=Yr(r),e.networkConnect=Yr(i),e.sentRequest=Yr(s),e.receivedResponse=Yr(o),e.domProcessing=Yr(a),e.isValid=!0):this._logger.throwInternal(he.WARNING,fe.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:r,network:i,request:s,response:o,dom:a}))},e.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?ft().timing:null},e.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?ft().getEntriesByType("navigation")[0]:null},e.prototype.isPerformanceNavigationTimingSupported=function(){var e=ft();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},e.prototype.isPerformanceTimingSupported=function(){var e=ft();return e&&e.timing},e.prototype.isPerformanceTimingDataReady=function(){var e=ft(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t.navigationStart>0&&t.responseStart>0&&t.requestStart>0&&t.loadEventEnd>0&&t.responseEnd>0&&t.connectEnd>0&&t.domLoading>0},e.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=gt()||{},r=["googlebot","adsbot-google","apis-google","mediapartners-google"],i=n.userAgent,s=!1;if(i)for(var o=0;o<r.length;o++)s=s||-1!==i.toLowerCase().indexOf(r[o]);if(s)return!1;for(o=0;o<e.length;o++)if(e[o]<0||e[o]>=this.MAX_DURATION_ALLOWED)return!1;return!0},e}()}));function Ko(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var Uo,Bo,zo,Wo,Ho,$o,Go=b((()=>{N(),jo(),Lr(),Oo(),Vo(),qo(),me(),Uo="duration",Bo="event",zo=function(e){function t(){var n,r,i,o,a,c=e.call(this)||this;return c.identifier=Eo,c.priority=180,c.autoRoutePVDelay=500,ge(t,c,(function(e,l){var u=ht(!0);o=u&&u.href||"",e.getCookieMgr=function(){return vn(e.core)},e.processTelemetry=function(t,n){Bt(e.core,(function(){return e.identifier+":processTelemetry"}),(function(){var r=!1,i=e._telemetryInitializers.length;n=e._getTelCtx(n);for(var s=0;s<i;++s){var o=e._telemetryInitializers[s];if(o)try{if(!1===o.apply(null,[t])){r=!0;break}}catch(e){n.diagLog().throwInternal(he.CRITICAL,fe.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+We(e),{exception:St(e)},!0)}}r||e.processNext(t,n)}),(function(){return{item:t}}),!t.sync)},e.trackEvent=function(t,n){try{var r=To.create(t,is.dataType,is.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(he.WARNING,fe.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+We(t),{exception:St(t)})}},e.startTrackEvent=function(t){try{n.start(t)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+We(t),{exception:St(t)})}},e.stopTrackEvent=function(t,r,i){try{n.stop(t,void 0,r)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+We(t),{exception:St(t)})}},e.trackTrace=function(t,n){try{var r=To.create(t,zs.dataType,zs.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(he.WARNING,fe.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+We(t),{exception:St(t)})}},e.trackMetric=function(t,n){try{var r=To.create(t,Os.dataType,Os.envelopeType,e.diagLog(),n);e.core.track(r)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+We(t),{exception:St(t)})}},e.trackPageView=function(t,n){try{var r=t||{};e._pageViewManager.trackPageView(r,D({},r.properties,r.measurements,n)),e.config.autoTrackPageVisitTime&&e._pageVisitTimeManager.trackPreviousPageVisit(r.name,r.uri)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.TrackPVFailed,"trackPageView failed, page view will not be collected: "+We(t),{exception:St(t)})}},e.sendPageViewInternal=function(t,n,r){var i=pt();i&&(t.refUri=void 0===t.refUri?i.referrer:t.refUri);var s=To.create(t,qs.dataType,qs.envelopeType,e.diagLog(),n,r);e.core.track(s)},e.sendPageViewPerformanceInternal=function(t,n,r){var i=To.create(t,Hs.dataType,Hs.envelopeType,e.diagLog(),n,r);e.core.track(i)},e.trackPageViewPerformance=function(t,n){try{e._pageViewPerformanceManager.populatePageViewPerformanceEvent(t),e.sendPageViewPerformanceInternal(t,n)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+We(t),{exception:St(t)})}},e.startTrackPage=function(t){try{if("string"!=typeof t){var n=pt();t=n&&n.title||""}r.start(t)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+We(t),{exception:St(t)})}},e.stopTrackPage=function(t,n,i,s){try{if("string"!=typeof t){var o=pt();t=o&&o.title||""}if("string"!=typeof n){var a=ht();n=a&&a.href||""}r.stop(t,n,i,s),e.config.autoTrackPageVisitTime&&e._pageVisitTimeManager.trackPreviousPageVisit(t,n)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+We(t),{exception:St(t)})}},e.sendExceptionInternal=function(t,n,r){var i=t.exception||t.error||new Error(ci),s=new Rs(e.diagLog(),i,t.properties||n,t.measurements,t.severityLevel,t.id).toInterface(),o=To.create(s,Rs.dataType,Rs.envelopeType,e.diagLog(),n,r);e.core.track(o)},e.trackException=function(t,n){try{e.sendExceptionInternal(t,n)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.TrackExceptionFailed,"trackException failed, exception will not be collected: "+We(t),{exception:St(t)})}},e._onerror=function(t){var n=t&&t.error,r=t&&t.evt;try{if(!r){var i=ut();i&&(r=i[Bo])}var s=t&&t.url||(pt()||{}).URL,o=t.errorSrc||"window.onerror@"+s+":"+(t.lineNumber||0)+":"+(t.columnNumber||0),a={errorSrc:o,url:s,lineNumber:t.lineNumber||0,columnNumber:t.columnNumber||0,message:t.message};ni(t.message,t.url,t.lineNumber,t.columnNumber,t.error)?function(t,n){var r=To.create(t,Rs.dataType,Rs.envelopeType,e.diagLog(),n);e.core.track(r)}(Rs.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",s,t.lineNumber||0,t.columnNumber||0,n,r,null,o),a):(t.errorSrc||(t.errorSrc=o),e.trackException({exception:t,severityLevel:Gs.Error},a))}catch(t){var c=n?n.name+", "+n.message:"null";e.diagLog().throwInternal(he.CRITICAL,fe.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+We(t),{exception:St(t),errorString:c})}},e.addTelemetryInitializer=function(t){e._telemetryInitializers.push(t)},e.initialize=function(u,d,p,g){if(!e.isInitialized()){if(we(d))throw Error("Error initializing");l.initialize(u,d,p,g),e.setInitialized(!1);var h=e._getTelCtx(),f=e.identifier;e.config=h.getExtCfg(f);var m=t.getDefaultConfig(u);void 0!==m&&Pe(m,(function(t,n){e.config[t]=h.getConfig(f,t,n),void 0===e.config[t]&&(e.config[t]=n)})),e.config.isStorageUseDisabled&&vi();var v={instrumentationKey:function(){return u.instrumentationKey},accountId:function(){return e.config.accountId||u.accountId},sessionRenewalMs:function(){return e.config.sessionRenewalMs||u.sessionRenewalMs},sessionExpirationMs:function(){return e.config.sessionExpirationMs||u.sessionExpirationMs},sampleRate:function(){return e.config.samplingPercentage||u.samplingPercentage},sdkExtension:function(){return e.config.sdkExtension||u.sdkExtension},isBrowserLinkTrackingEnabled:function(){return e.config.isBrowserLinkTrackingEnabled||u.isBrowserLinkTrackingEnabled},appId:function(){return e.config.appId||u.appId}};e._pageViewPerformanceManager=new Mo(e.core),e._pageViewManager=new Ao(c,e.config.overridePageViewDuration,e.core,e._pageViewPerformanceManager),e._pageVisitTimeManager=new Ro(e.diagLog(),(function(t,n,r){return function(t,n,r){var i={PageName:t,PageUrl:n};e.trackMetric({name:"PageVisitTime",average:r,max:r,min:r,sampleCount:1},i)}(t,n,r)})),e._telemetryInitializers=e._telemetryInitializers||[],function(t){if(!t.isBrowserLinkTrackingEnabled()){var n=["/browserLinkSignalR/","/__browserLink/"];e._telemetryInitializers.push((function(e){if(e.baseType===Us.dataType){var t=e.baseData;if(t)for(var r=0;r<n.length;r++)if(t.target&&t.target.indexOf(n[r])>=0)return!1}return!0}))}}(v),(n=new Wo(e.diagLog(),"trackEvent")).action=function(t,n,r,i){i||(i={}),i[Uo]=r.toString(),e.trackEvent({name:t,properties:i})},(r=new Wo(e.diagLog(),"trackPageView")).action=function(t,n,r,i,s){we(i)&&(i={}),i[Uo]=r.toString();var o={name:t,uri:n,properties:i,measurements:s};e.sendPageViewInternal(o,i)};var y=ut(),C=Boolean(typeof history===s&&history)?history:ct(Tt),S=ht(!0),w=c;if(!1===e.config.disableExceptionTracking&&!e.config.autoExceptionInstrumented&&y){var b=y.onerror;y.onerror=function(e,t,n,r,i){var s=y[Bo],o=b&&b(e,t,n,r,i);return!0!==o&&w._onerror(Rs.CreateAutoException(e,t,n,r,i,s)),o},e.config.autoExceptionInstrumented=!0}if(!1===e.config.disableExceptionTracking&&!0===e.config.enableUnhandledPromiseRejectionTracking&&!e.config.autoUnhandledPromiseInstrumented&&y){var x="onunhandledrejection",T=y[x];y[x]=function(e){var t=y[Bo],n=T&&T.call(y,e);return!0!==n&&w._onerror(Rs.CreateAutoException(e.reason.toString(),S?S.href:"",0,0,e,t)),n},e.config.autoUnhandledPromiseInstrumented=!0}if(!0===e.config.enableAutoRouteTracking&&C&&Ie(C.pushState)&&Ie(C.replaceState)&&y&&"undefined"!=typeof Event){var I=c;je(p,(function(e){e.identifier===_o&&(i=e)})),C.pushState=(k=C.pushState,function(){var e=k.apply(this,arguments);return Ko(y,Xr(I.config.namePrefix+"pushState")),Ko(y,Xr(I.config.namePrefix+"locationchange")),e}),C.replaceState=function(e){return function(){var t=e.apply(this,arguments);return Ko(y,Xr(I.config.namePrefix+"replaceState")),Ko(y,Xr(I.config.namePrefix+"locationchange")),t}}(C.replaceState),y.addEventListener&&(y.addEventListener(I.config.namePrefix+"popstate",(function(){Ko(y,Xr(I.config.namePrefix+"locationchange"))})),y.addEventListener(I.config.namePrefix+"locationchange",(function(){if(i&&i.context&&i.context.telemetryTrace){i.context.telemetryTrace.traceID=dr();var e="_unknown_";S&&S.pathname&&(e=S.pathname+(S.hash||"")),i.context.telemetryTrace.name=e}a&&(o=a),a=S&&S.href||"",setTimeout(function(e){I.trackPageView({refUri:e,properties:{duration:0}})}.bind(c,o),I.autoRoutePVDelay)})))}e.setInitialized(!0)}var k}})),c}return A(t,e),t.getDefaultConfig=function(e){return e||(e={}),e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=Zr(e.disableExceptionTracking),e.autoTrackPageVisitTime=Zr(e.autoTrackPageVisitTime),e.overridePageViewDuration=Zr(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=Zr(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.isStorageUseDisabled=Zr(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=Zr(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=Zr(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e.enableDebug=Zr(e.enableDebug),e.disableFlushOnBeforeUnload=Zr(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=Zr(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e},t.Version="2.6.4",t}(tn),Wo=function(e,t){var n=this,r={};n.start=function(t){void 0!==r[t]&&e.throwInternal(he.WARNING,fe.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:t,key:t},!0),r[t]=+new Date},n.stop=function(t,i,s,o){var a=r[t];if(isNaN(a))e.throwInternal(he.WARNING,fe.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:t,key:t},!0);else{var c=Ui(a,+new Date);n.action(t,i,c,s,o)}delete r[t],r[t]=void 0}}})),Jo=b((()=>{Go()})),Xo=b((()=>{jo(),Lr(),me(),Ho=function e(t){var n=[];ge(e,this,(function(e){e.enqueue=function(e){n.push(e)},e.count=function(){return n.length},e.clear=function(){n.length=0},e.getItems=function(){return n.slice(0)},e.batchPayloads=function(e){return e&&e.length>0?t.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.markAsSent=function(t){e.clear()},e.clearSent=function(e){}}))},$o=function(){function e(t,n){var r,i=!1;ge(e,this,(function(s){var o=l(e.BUFFER_KEY),a=l(e.SENT_BUFFER_KEY);function c(e,t){var n=[];return je(t,(function(t){!Ie(t)&&-1===Oe(e,t)&&n.push(t)})),n}function l(e){var r=e;try{r=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+r:r;var i=Ti(t,r);if(i){var s=vt().parse(i);if(Me(s)&&(s=vt().parse(s)),s&&Re(s))return s}}catch(e){t.throwInternal(he.CRITICAL,fe.FailedToRestoreStorageBuffer," storage key: "+r+", "+We(e),{exception:St(e)})}return[]}function u(e,r){var i=e;try{i=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+i:i;var s=JSON.stringify(r);Ii(t,i,s)}catch(e){Ii(t,i,JSON.stringify([])),t.throwInternal(he.WARNING,fe.FailedToSetStorageBuffer," storage key: "+i+", "+We(e)+". Buffer cleared",{exception:St(e)})}}(r=o.concat(a)).length>e.MAX_BUFFER_SIZE&&(r.length=e.MAX_BUFFER_SIZE),u(e.SENT_BUFFER_KEY,[]),u(e.BUFFER_KEY,r),s.enqueue=function(n){r.length>=e.MAX_BUFFER_SIZE?i||(t.throwInternal(he.WARNING,fe.SessionStorageBufferFull,"Maximum buffer size reached: "+r.length,!0),i=!0):(r.push(n),u(e.BUFFER_KEY,r))},s.count=function(){return r.length},s.clear=function(){r=[],u(e.BUFFER_KEY,[]),u(e.SENT_BUFFER_KEY,[]),i=!1},s.getItems=function(){return r.slice(0)},s.batchPayloads=function(e){return e&&e.length>0?n.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},s.markAsSent=function(n){r=c(n,r),u(e.BUFFER_KEY,r);var i=l(e.SENT_BUFFER_KEY);i instanceof Array&&n instanceof Array&&((i=i.concat(n)).length>e.MAX_BUFFER_SIZE&&(t.throwInternal(he.CRITICAL,fe.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+i.length,!0),i.length=e.MAX_BUFFER_SIZE),u(e.SENT_BUFFER_KEY,i))},s.clearSent=function(t){var n=l(e.SENT_BUFFER_KEY);n=c(t,n),u(e.SENT_BUFFER_KEY,n)}}))}return e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}()}));function Qo(e,t,n){return He(e,t,n,Je)}var Zo,Yo,ea,ta,na,ra,ia,sa,oa,aa,ca,la,ua,da,pa,ga,ha,fa,ma=b((()=>{N(),jo(),Lr(),Zo="baseType",Yo="baseData",ea="properties",ta="true",na=function(){function e(){}return e.extractPropsAndMeasurements=function(e,t,n){we(e)||Pe(e,(function(e,r){Fe(r)?n[e]=r:Me(r)?t[e]=r:mt()&&(t[e]=vt().stringify(r))}))},e.createEnvelope=function(t,n,r,i){var s=new ns(t,i,n);Qo(s,"sampleRate",r[ii]),(r[Yo]||{}).startTime&&(s.time=Ne(r[Yo].startTime)),s.iKey=r.iKey;var o=r.iKey.replace(/-/g,"");return s.name=s.name.replace("{0}",o),e.extractPartAExtensions(r,s),r.tags=r.tags||[],Ze(s)},e.extractPartAExtensions=function(t,n){var r=n.tags=n.tags||{},i=t.ext=t.ext||{},s=t.tags=t.tags||[],o=i.user;o&&(Qo(r,ko.userAuthUserId,o.authId),Qo(r,ko.userId,o.id||o.localId));var a=i.app;a&&Qo(r,ko.sessionId,a.sesId);var c=i.device;c&&(Qo(r,ko.deviceId,c.id||c.localId),Qo(r,ko.deviceType,c.deviceClass),Qo(r,ko.deviceIp,c.ip),Qo(r,ko.deviceModel,c.model),Qo(r,ko.deviceType,c.deviceType));var l=t.ext.web;if(l){Qo(r,ko.deviceLanguage,l.browserLang),Qo(r,ko.deviceBrowserVersion,l.browserVer),Qo(r,ko.deviceBrowser,l.browser);var u=n.data=n.data||{},d=u[Yo]=u[Yo]||{},p=d[ea]=d[ea]||{};Qo(p,"domain",l.domain),Qo(p,"isManual",l.isManual?ta:null),Qo(p,"screenRes",l.screenRes),Qo(p,"userConsent",l.userConsent?ta:null)}var g=i.os;g&&Qo(r,ko.deviceOS,g.name);var h=i.trace;h&&(Qo(r,ko.operationParentId,h.parentID),Qo(r,ko.operationName,h.name),Qo(r,ko.operationId,h.traceID));for(var f={},m=s.length-1;m>=0;m--)Pe(s[m],(function(e,t){f[e]=t})),s.splice(m,1);Pe(s,(function(e,t){f[e]=t}));var v=D({},r,f);v[ko.internalSdkVersion]||(v[ko.internalSdkVersion]="javascript:"+e.Version),n.tags=Ze(v)},e.prototype.Init=function(e,t){this._logger=e,we(t[Yo])&&this._logger.throwInternal(he.CRITICAL,fe.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},e.Version="2.6.4",e}(),ra=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[Yo].measurements||{},i=n[Yo][ea]||{};na.extractPropsAndMeasurements(n.data,i,r);var s=n[Yo];if(we(s))return t.warnToConsole("Invalid input for dependency data"),null;var o=s[ea]&&s[ea][oi]?s[ea][oi]:"GET",a=new Us(t,s.id,s.target,s.name,s.duration,s.success,s.responseCode,o,s.type,s.correlationContext,i,r),c=new $s(Us.dataType,a);return na.createEnvelope(t,Us.envelopeType,n,c)},t.DependencyEnvelopeCreator=new t,t}(na),ia=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r={},i={};n[Zo]!==is.dataType&&(r.baseTypeSource=n[Zo]),n[Zo]===is.dataType?(r=n[Yo][ea]||{},i=n[Yo].measurements||{}):n[Yo]&&na.extractPropsAndMeasurements(n[Yo],r,i),na.extractPropsAndMeasurements(n.data,r,i);var s=n[Yo].name,o=new is(t,s,r,i),a=new $s(is.dataType,o);return na.createEnvelope(t,is.envelopeType,n,a)},t.EventEnvelopeCreator=new t,t}(na),sa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[Yo].measurements||{},i=n[Yo][ea]||{};na.extractPropsAndMeasurements(n.data,i,r);var s=n[Yo],o=Rs.CreateFromInterface(t,s,i,r),a=new $s(Rs.dataType,o);return na.createEnvelope(t,Rs.envelopeType,n,a)},t.ExceptionEnvelopeCreator=new t,t}(na),oa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[Yo],i=r[ea]||{},s=r.measurements||{};na.extractPropsAndMeasurements(n.data,i,s);var o=new Os(t,r.name,r.average,r.sampleCount,r.min,r.max,i,s),a=new $s(Os.dataType,o);return na.createEnvelope(t,Os.envelopeType,n,a)},t.MetricEnvelopeCreator=new t,t}(na),aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r,i="duration",s=n[Yo];we(s)||we(s[ea])||we(s[ea][i])?!we(n.data)&&!we(n.data[i])&&(r=n.data[i],delete n.data[i]):(r=s[ea][i],delete s[ea][i]);var o,a=n[Yo];((n.ext||{}).trace||{}).traceID&&(o=n.ext.trace.traceID);var c=a.id||o,l=a.name,u=a.uri,d=a[ea]||{},p=a.measurements||{};we(a.refUri)||(d.refUri=a.refUri),we(a.pageType)||(d.pageType=a.pageType),we(a.isLoggedIn)||(d.isLoggedIn=a.isLoggedIn.toString()),we(a[ea])||Pe(a[ea],(function(e,t){d[e]=t})),na.extractPropsAndMeasurements(n.data,d,p);var g=new qs(t,l,u,r,d,p,c),h=new $s(qs.dataType,g);return na.createEnvelope(t,qs.envelopeType,n,h)},t.PageViewEnvelopeCreator=new t,t}(na),ca=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[Yo],i=r.name,s=r.uri||r.url,o=r[ea]||{},a=r.measurements||{};na.extractPropsAndMeasurements(n.data,o,a);var c=new Hs(t,i,s,void 0,o,a,r),l=new $s(Hs.dataType,c);return na.createEnvelope(t,Hs.envelopeType,n,l)},t.PageViewPerformanceEnvelopeCreator=new t,t}(na),la=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.Create=function(t,n){e.prototype.Init.call(this,t,n);var r=n[Yo].message,i=n[Yo].severityLevel,s=n[Yo][ea]||{},o=n[Yo].measurements||{};na.extractPropsAndMeasurements(n.data,s,o);var a=new zs(t,r,i,s,o),c=new $s(zs.dataType,a);return na.createEnvelope(t,zs.envelopeType,n,c)},t.TraceEnvelopeCreator=new t,t}(na)})),va=b((()=>{Lr(),me(),ua=function e(t){ge(e,this,(function(e){function n(e,s){var o="__aiCircularRefCheck",a={};if(!e)return t.throwInternal(he.CRITICAL,fe.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:s},!0),a;if(e[o])return t.throwInternal(he.WARNING,fe.CircularReferenceDetected,"Circular reference detected while serializing object",{name:s},!0),a;if(!e.aiDataContract){if("measurements"===s)a=i(e,"number",s);else if("properties"===s)a=i(e,"string",s);else if("tags"===s)a=i(e,"string",s);else if(Re(e))a=r(e,s);else{t.throwInternal(he.WARNING,fe.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:s},!0);try{vt().stringify(e),a=e}catch(e){t.throwInternal(he.CRITICAL,fe.CannotSerializeObject,e&&Ie(e.toString)?e.toString():"Error serializing object",null,!0)}}return a}return e[o]=!0,Pe(e.aiDataContract,(function(i,o){var c=Ie(o)?1&o():1&o,l=Ie(o)?4&o():4&o,u=2&o,d=void 0!==e[i],p=Te(e[i])&&null!==e[i];if(!c||d||u){if(!l){var g;void 0!==(g=p?u?r(e[i],i):n(e[i],i):e[i])&&(a[i]=g)}}else t.throwInternal(he.CRITICAL,fe.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:i,name:s})})),delete e[o],a}function r(e,r){var i;if(e)if(Re(e)){i=[];for(var s=0;s<e.length;s++){var o=n(e[s],r+"["+s+"]");i.push(o)}}else t.throwInternal(he.CRITICAL,fe.ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:r},!0);return i}function i(e,n,r){var i;return e&&(i={},Pe(e,(function(e,s){if("string"===n)void 0===s?i[e]="undefined":null===s?i[e]="null":s.toString?i[e]=s.toString():i[e]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===s)i[e]="undefined";else if(null===s)i[e]="null";else{var o=parseFloat(s);isNaN(o)?i[e]="NaN":i[e]=o}else i[e]="invalid field: "+r+" is of unknown type.",t.throwInternal(he.CRITICAL,i[e],null,!0)}))),i}e.serialize=function(e){var r=n(e,"root");try{return vt().stringify(r)}catch(e){t.throwInternal(he.CRITICAL,fe.CannotSerializeObject,e&&Ie(e.toString)?e.toString():"Error serializing object",null,!0)}}}))}})),ya=b((()=>{Lr(),me(),da=function(){function e(){var t=ut(),n=pt(),r=!1,i=!0;ge(e,this,(function(e){try{if(t&&br.Attach(t,"online",a)&&(br.Attach(t,"offline",c),r=!0),n){var s=n.body||n;Se(s.ononline)||(s.ononline=a,s.onoffline=c,r=!0)}if(r){var o=gt();o&&!we(o.onLine)&&(i=o.onLine)}}catch(e){r=!1}function a(){i=!0}function c(){i=!1}e.isListening=r,e.isOnline=function(){var e=!0,t=gt();return r?e=i:t&&!we(t.onLine)&&(e=t.onLine),e},e.isOffline=function(){return!e.isOnline()}}))}return e.Offline=new e,e}(),pa=da.Offline})),Ca=b((()=>{ga=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return this.getHashCode(t)/e.INT_MAX_VALUE*100},e.prototype.getHashCode=function(t){if(""===t)return 0;for(;t.length<e.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,r=0;r<t.length;++r)n=(n<<5)+n+t.charCodeAt(r),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e.MIN_INPUT_LENGTH=8,e}()})),Sa=b((()=>{Ca(),jo(),ha=function(){function e(){this.hashCodeGeneragor=new ga,this.keys=new xo}return e.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},e}()})),wa=b((()=>{Sa(),jo(),Lr(),fa=function(){function e(e,t){this.INT_MAX_VALUE=2147483647,this._logger=t||Vt(null),(e>100||e<0)&&(this._logger.throwInternal(he.WARNING,fe.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new ha}return e.prototype.isSampledIn=function(e){var t=this.sampleRate;return null==t||t>=100||e.baseType===Os.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t},e}()}));function ba(e){try{return e.responseText}catch(e){}return null}var xa,Ta,Ia,ka,_a,Pa,Ea=b((()=>{N(),Xo(),ma(),va(),jo(),Lr(),ya(),wa(),me(),xa=function(e){function t(){var n=e.call(this)||this;n.priority=1001,n.identifier=Po,n._XMLHttpRequestSupported=!1;var r,i,s,a,c,l={};return ge(t,n,(function(e,u){function d(){Xe("Method not implemented.")}function p(t,n,i,s,o,a){var c=null;if(e._appId||(c=v(a))&&c.appId&&(e._appId=c.appId),(t<200||t>=300)&&0!==t){if((301===t||307===t||308===t)&&!g(i))return void e._onError(n,o);!e._senderConfig.isRetryDisabled()&&S(t)?(y(n),e.diagLog().throwInternal(he.WARNING,fe.TransmissionFailed,". Response code "+t+". Will retry to send "+n.length+" items.")):e._onError(n,o)}else pa.isOffline()?e._senderConfig.isRetryDisabled()||(y(n,10),e.diagLog().throwInternal(he.WARNING,fe.TransmissionFailed,". Offline - Response Code: "+t+". Offline status: "+pa.isOffline()+". Will retry to send "+n.length+" items.")):(g(i),206===t?(c||(c=v(a)),c&&!e._senderConfig.isRetryDisabled()?e._onPartialSuccess(n,c):e._onError(n,o)):(r=0,e._onSuccess(n,s)))}function g(t){return!(c>=10||we(t)||""===t||t===e._senderConfig.endpointUrl()||(e._senderConfig.endpointUrl=function(){return t},++c,0))}function h(t,n){var r=e._senderConfig.endpointUrl(),i=e._buffer.batchPayloads(t),s=new Blob([i],{type:"text/plain;charset=UTF-8"});gt().sendBeacon(r,s)?(e._buffer.markAsSent(t),e._onSuccess(t,t.length)):(f(t,!0),e.diagLog().throwInternal(he.WARNING,fe.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}function f(t,n){var r=new XMLHttpRequest,i=e._senderConfig.endpointUrl();try{r[ri]=!0}catch(e){}r.open("POST",i,n),r.setRequestHeader("Content-type","application/json"),qi(i)&&r.setRequestHeader(Mr.sdkContextHeader,Mr.sdkContextHeaderAppIdRequest),je(Ue(l),(function(e){r.setRequestHeader(e,l[e])})),r.onreadystatechange=function(){return e._xhrReadyStateChange(r,t,t.length)},r.onerror=function(n){return e._onError(t,w(r),n)};var s=e._buffer.batchPayloads(t);r.send(s),e._buffer.markAsSent(t)}function m(t,n){var r=e._senderConfig.endpointUrl(),i=e._buffer.batchPayloads(t),s=new Blob([i],{type:"text/plain;charset=UTF-8"}),o=new Headers;qi(r)&&o.append(Mr.sdkContextHeader,Mr.sdkContextHeaderAppIdRequest),je(Ue(l),(function(e){o.append(e,l[e])}));var a=new Request(r,{method:"POST",headers:o,body:s});fetch(a).then((function(n){if(!n.ok)throw Error(n.statusText);n.text().then((function(e){p(n.status,t,n.url,t.length,n.statusText,e)})),e._buffer.markAsSent(t)})).catch((function(n){e._onError(t,n.message)}))}function v(t){try{if(t&&""!==t){var n=vt().parse(t);if(n&&n.itemsReceived&&n.itemsReceived>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors.length)return n}}catch(n){e.diagLog().throwInternal(he.CRITICAL,fe.InvalidBackendResponse,"Cannot parse the response. "+We(n),{response:t})}return null}function y(t,n){if(void 0===n&&(n=1),t&&0!==t.length){e._buffer.clearSent(t),r++;for(var s=0,o=t;s<o.length;s++){var a=o[s];e._buffer.enqueue(a)}(function(e){var t;if(r<=1)t=10;else{var n=(Math.pow(2,r)-1)/2,s=Math.floor(Math.random()*n*10)+1;s*=e,t=Math.max(Math.min(s,3600),10)}var o=ze()+1e3*t;i=o})(n),C()}}function C(){if(!s){var t=i?Math.max(0,i-ze()):0,n=Math.max(e._senderConfig.maxBatchInterval(),t);s=setTimeout((function(){e.triggerSend(!0,null,1)}),n)}}function S(e){return 408===e||429===e||500===e||503===e}function w(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+ba(e)||0:t}function b(t,n){var r=ut(),i=new XDomainRequest;i.onload=function(){return e._xdrOnLoad(i,t)},i.onerror=function(n){return e._onError(t,x(i),n)};var s=r&&r.location&&r.location.protocol||"";if(0!==e._senderConfig.endpointUrl().lastIndexOf(s,0))return e.diagLog().throwInternal(he.WARNING,fe.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void e._buffer.clear();var o=e._senderConfig.endpointUrl().replace(/^(https?:)/,"");i.open("POST",o);var a=e._buffer.batchPayloads(t);i.send(a),e._buffer.markAsSent(t)}function x(e,t){return e?"XDomainRequest,Response:"+ba(e)||0:t}e.pause=d,e.resume=d,e.flush=function(){try{e.triggerSend(!0,null,1)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.FlushFailed,"flush failed, telemetry will not be collected: "+We(t),{exception:St(t)})}},e.onunloadFlush=function(){if(!1!==e._senderConfig.onunloadDisableBeacon()&&!1!==e._senderConfig.isBeaconApiDisabled()||!ei())e.flush();else try{e.triggerSend(!0,h,2)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+We(t),{exception:St(t)})}},e.teardown=d,e.addHeader=function(e,t){l[e]=t},e.initialize=function(s,l,d,p){u.initialize(s,l,d,p);var g=e._getTelCtx(),v=e.identifier;a=new ua(l.logger),r=0,i=null,e._sender=null,c=0;var y=t._getDefaultAppInsightsChannelConfig();if(e._senderConfig=t._getEmptyAppInsightsChannelConfig(),Pe(y,(function(t,n){e._senderConfig[t]=function(){return g.getConfig(v,t,n())}})),e._buffer=e._senderConfig.enableSessionStorageBuffer()&&bi()?new $o(e.diagLog(),e._senderConfig):new Ho(e._senderConfig),e._sample=new fa(e._senderConfig.samplingPercentage(),e.diagLog()),function(e){return!(we(e.disableInstrumentationKeyValidation)||!e.disableInstrumentationKeyValidation)||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(e.instrumentationKey)}(s)||e.diagLog().throwInternal(he.CRITICAL,fe.InvalidInstrumentationKey,"Invalid Instrumentation key "+s.instrumentationKey),!qi(e._senderConfig.endpointUrl())&&e._senderConfig.customHeaders()&&e._senderConfig.customHeaders().length>0&&je(e._senderConfig.customHeaders(),(function(e){n.addHeader(e.header,e.value)})),!e._senderConfig.isBeaconApiDisabled()&&ei())e._sender=h;else{var C=ct("XMLHttpRequest");C?"withCredentials"in new C?(e._sender=f,e._XMLHttpRequestSupported=!0):typeof XDomainRequest!==o&&(e._sender=b):ct("fetch")&&(e._sender=m)}},e.processTelemetry=function(n,r){r=e._getTelCtx(r);try{if(e._senderConfig.disableTelemetry())return;if(!n)return void r.diagLog().throwInternal(he.CRITICAL,fe.CannotSendEmptyTelemetry,"Cannot send empty telemetry");if(n.baseData&&!n.baseType)return void r.diagLog().throwInternal(he.CRITICAL,fe.InvalidEvent,"Cannot send telemetry without baseData and baseType");if(n.baseType||(n.baseType="EventData"),!e._sender)return void r.diagLog().throwInternal(he.CRITICAL,fe.SenderNotInitialized,"Sender was not initialized");if(!function(t){return e._sample.isSampledIn(t)}(n))return void r.diagLog().throwInternal(he.WARNING,fe.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:e._sample.sampleRate});n[ii]=e._sample.sampleRate;var i=t.constructEnvelope(n,e._senderConfig.instrumentationKey(),r.diagLog());if(!i)return void r.diagLog().throwInternal(he.CRITICAL,fe.CreateEnvelopeError,"Unable to create an AppInsights envelope");var s=!1;if(n.tags&&n.tags[si]&&(je(n.tags[si],(function(e){try{e&&!1===e(i)&&(s=!0,r.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(e){r.diagLog().throwInternal(he.CRITICAL,fe.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+We(e),{exception:St(e)},!0)}})),delete n.tags[si]),s)return;var o=a.serialize(i),c=e._buffer.getItems(),l=e._buffer.batchPayloads(c);l&&l.length+o.length>e._senderConfig.maxBatchSizeInBytes()&&e.triggerSend(!0,null,10),e._buffer.enqueue(o),C()}catch(e){r.diagLog().throwInternal(he.WARNING,fe.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+We(e),{exception:St(e)})}e.processNext(n,r)},e._xhrReadyStateChange=function(e,t,n){4===e.readyState&&p(e.status,t,e.responseURL,n,w(e),ba(e)||e.response)},e.triggerSend=function(t,r,o){void 0===t&&(t=!0);try{if(e._senderConfig.disableTelemetry())e._buffer.clear();else{if(e._buffer.count()>0){var a=e._buffer.getItems();(function(t,n){var r=function(){var t="getNotifyMgr";return e.core[t]?e.core[t]():e.core._notificationManager}();if(r&&r.eventsSendRequest)try{r.eventsSendRequest(t,n)}catch(t){e.diagLog().throwInternal(he.CRITICAL,fe.NotificationException,"send request notification failed: "+We(t),{exception:St(t)})}})(o||0,t),r?r.call(n,a,t):e._sender(a,t)}new Date}clearTimeout(s),s=null,i=null}catch(t){var c=Ct();(!c||c>9)&&e.diagLog().throwInternal(he.CRITICAL,fe.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+We(t),{exception:St(t)})}},e._onError=function(t,n,r){e.diagLog().throwInternal(he.WARNING,fe.OnError,"Failed to send telemetry.",{message:n}),e._buffer.clearSent(t)},e._onPartialSuccess=function(t,n){for(var r=[],i=[],s=0,o=n.errors.reverse();s<o.length;s++){var a=o[s],c=t.splice(a.index,1)[0];S(a.statusCode)?i.push(c):r.push(c)}t.length>0&&e._onSuccess(t,n.itemsAccepted),r.length>0&&e._onError(r,w(null,["partial success",n.itemsAccepted,"of",n.itemsReceived].join(" "))),i.length>0&&(y(i),e.diagLog().throwInternal(he.WARNING,fe.TransmissionFailed,"Partial success. Delivered: "+t.length+", Failed: "+r.length+". Will retry to send "+i.length+" our of "+n.itemsReceived+" items"))},e._onSuccess=function(t,n){e._buffer.clearSent(t)},e._xdrOnLoad=function(t,n){var i=ba(t);if(!t||i+""!="200"&&""!==i){var s=v(i);s&&s.itemsReceived&&s.itemsReceived>s.itemsAccepted&&!e._senderConfig.isRetryDisabled()?e._onPartialSuccess(n,s):e._onError(n,x(t))}else r=0,e._onSuccess(n,0)}})),n}return A(t,e),t.constructEnvelope=function(e,t,n){var r;switch((r=t===e.iKey||we(t)?e:D({},e,{iKey:t})).baseType){case is.dataType:return ia.EventEnvelopeCreator.Create(n,r);case zs.dataType:return la.TraceEnvelopeCreator.Create(n,r);case qs.dataType:return aa.PageViewEnvelopeCreator.Create(n,r);case Hs.dataType:return ca.PageViewPerformanceEnvelopeCreator.Create(n,r);case Rs.dataType:return sa.ExceptionEnvelopeCreator.Create(n,r);case Os.dataType:return oa.MetricEnvelopeCreator.Create(n,r);case Us.dataType:return ra.DependencyEnvelopeCreator.Create(n,r);default:return ia.EventEnvelopeCreator.Create(n,r)}},t._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},t._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},t}(tn)})),Aa=b((()=>{Ea()})),Ra=b((()=>{me(),jo(),Lr(),Ta=function(){},Ia=function(){function e(t,n){var r,i,s=Vt(n),o=vn(n);ge(e,this,(function(n){t||(t={}),Ie(t.sessionExpirationMs)||(t.sessionExpirationMs=function(){return e.acquisitionSpan}),Ie(t.sessionRenewalMs)||(t.sessionRenewalMs=function(){return e.renewalSpan}),n.config=t;var a=n.config.sessionCookiePostfix&&n.config.sessionCookiePostfix()?n.config.sessionCookiePostfix():n.config.namePrefix&&n.config.namePrefix()?n.config.namePrefix():"";function c(e,t){var n=!1,r=", session will be reset",i=t.split("|");if(i.length>=2)try{var o=+i[1]||0,a=+i[2]||0;isNaN(o)||o<=0?s.throwInternal(he.WARNING,fe.SessionRenewalDateIsZero,"AI session acquisition date is 0"+r):isNaN(a)||a<=0?s.throwInternal(he.WARNING,fe.SessionRenewalDateIsZero,"AI session renewal date is 0"+r):i[0]&&(e.id=i[0],e.acquisitionDate=o,e.renewalDate=a,n=!0)}catch(e){s.throwInternal(he.CRITICAL,fe.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(t||"")+"]"+r+" - "+We(e),{exception:St(e)})}return n}function l(e,t){var s=e.acquisitionDate;e.renewalDate=t;var a,c=n.config,l=c.sessionRenewalMs(),u=s+c.sessionExpirationMs()-t,d=[e.id,s,t];a=u<l?u/1e3:l/1e3;var p=c.cookieDomain?c.cookieDomain():null;o.set(r(),d.join("|"),c.sessionExpirationMs()>0?a:null,p),i=t}r=function(){return"ai_session"+a},n.automaticSession=new Ta,n.update=function(){var t=ze(),a=!1,u=n.automaticSession;u.id||(a=!function(e,t){var n=!1,i=o.get(r());if(i&&Ie(i.split))n=c(e,i);else{var a=Ci(s,r());a&&(n=c(e,a))}return n||!!e.id}(u));var d=n.config.sessionExpirationMs();if(!a&&d>0){var p=n.config.sessionRenewalMs(),g=t-u.acquisitionDate,h=t-u.renewalDate;a=(a=(a=g<0||h<0)||g>d)||h>p}a?function(e){var t=n.config||{},r=(t.getNewId?t.getNewId():null)||ur;n.automaticSession.id=r(t.idLength?t.idLength():22),n.automaticSession.acquisitionDate=e,l(n.automaticSession,e),yi()||s.throwInternal(he.WARNING,fe.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}(t):(!i||t-i>e.cookieUpdateInterval)&&l(u,t)},n.backup=function(){var e=n.automaticSession;!function(e,t,n){Si(s,r(),[e,t,n].join("|"))}(e.id,e.acquisitionDate,e.renewalDate)}}))}return e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e}()})),Da=b((()=>{ka=function(){}})),Ma=b((()=>{_a=function(){this.id="browser",this.deviceClass="Browser"}})),Fa=b((()=>{Pa=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.6.4"}}));function La(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))}var Na,ja,Oa,Va=b((()=>{me(),jo(),Lr(),Na=function(){function e(t,n){this.isNewUser=!1;var r,i=Vt(n),s=vn(n);ge(e,this,(function(n){n.config=t;var o=n.config.userCookiePostfix&&n.config.userCookiePostfix()?n.config.userCookiePostfix():"";r=function(){return e.userCookieName+o};var a=s.get(r());if(a){n.isNewUser=!1;var c=a.split(e.cookieSeparator);c.length>0&&(n.id=c[0])}if(!n.id){var l=t||{},u=(l.getNewId?l.getNewId():null)||ur;n.id=u(l.idLength?t.idLength():22);var d=Ne(new Date);n.accountAcquisitionDate=d,n.isNewUser=!0;var p=[n.id,d];s.set(r(),p.join(e.cookieSeparator),31536e3);var g=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";wi(i,g)}n.accountId=t.accountId?t.accountId():void 0;var h=s.get(e.authUserCookieName);if(h){var f=(h=decodeURI(h)).split(e.cookieSeparator);f[0]&&(n.authenticatedId=f[0]),f.length>1&&f[1]&&(n.accountId=f[1])}n.setAuthenticatedUserContext=function(t,r,o){if(void 0===o&&(o=!1),!La(t)||r&&!La(r))i.throwInternal(he.WARNING,fe.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{n.authenticatedId=t;var a=n.authenticatedId;r&&(n.accountId=r,a=[n.authenticatedId,n.accountId].join(e.cookieSeparator)),o&&s.set(e.authUserCookieName,encodeURI(a))}},n.clearAuthenticatedUserContext=function(){n.authenticatedId=null,n.accountId=null,s.del(e.authUserCookieName)}}))}return e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}()})),qa=b((()=>{ja=function(){}})),Ka=b((()=>{jo(),Lr(),Oa=function(e,t,n,r){var i=this;i.traceID=e||dr(),i.parentID=t,i.name=n;var s=ht();!n&&s&&s.pathname&&(i.name=s.pathname),i.name=Vr(r,i.name)}}));function Ua(e,t){e&&e[t]&&0===Ue(e[t]).length&&delete e[t]}var Ba,za,Wa,Ha,$a,Ga=b((()=>{me(),Lr(),Ra(),jo(),Da(),Ma(),Fa(),Va(),qa(),Ka(),Ba="ext",za="tags",Wa=function e(t,n){var r=this,i=t.logger;this.appId=function(){return null},ge(e,this,(function(e){e.application=new ka,e.internal=new Pa(n),lt()&&(e.sessionManager=new Ia(n,t),e.device=new _a,e.location=new ja,e.user=new Na(n,t),e.telemetryTrace=new Oa(void 0,void 0,void 0,i),e.session=new Ta),e.applySessionContext=function(t,n){var r=e.session,i=e.sessionManager;r&&Me(r.id)?He($e(t.ext,Io.AppExt),"sesId",r.id):i&&i.automaticSession&&He($e(t.ext,Io.AppExt),"sesId",i.automaticSession.id,Me)},e.applyOperatingSystemContxt=function(t,n){He(t.ext,Io.OSExt,e.os)},e.applyApplicationContext=function(t,n){var r=e.application;if(r){var i=$e(t,za);He(i,ko.applicationVersion,r.ver,Me),He(i,ko.applicationBuild,r.build,Me)}},e.applyDeviceContext=function(t,n){var r=e.device;if(r){var i=$e($e(t,Ba),Io.DeviceExt);He(i,"localId",r.id,Me),He(i,"ip",r.ip,Me),He(i,"model",r.model,Me),He(i,"deviceClass",r.deviceClass,Me)}},e.applyInternalContext=function(t,n){var r=e.internal;if(r){var i=$e(t,za);He(i,ko.internalAgentVersion,r.agentVersion,Me),He(i,ko.internalSdkVersion,r.sdkVersion,Me),(t.baseType===qt.dataType||t.baseType===qs.dataType)&&(He(i,ko.internalSnippet,r.snippetVer,Me),He(i,ko.internalSdkSrc,r.sdkSrc,Me))}},e.applyLocationContext=function(e,t){var n=r.location;n&&He($e(e,za,[]),ko.locationIp,n.ip,Me)},e.applyOperationContext=function(t,n){var r=e.telemetryTrace;if(r){var i=$e($e(t,Ba),Io.TraceExt,{traceID:void 0,parentID:void 0});He(i,"traceID",r.traceID,Me),He(i,"name",r.name,Me),He(i,"parentID",r.parentID,Me)}},e.applyWebContext=function(e,t){var n=r.web;n&&He($e(e,Ba),Io.WebExt,n)},e.applyUserContext=function(t,n){var r=e.user;if(r){He($e(t,za,[]),ko.userAccountId,r.accountId,Me);var i=$e($e(t,Ba),Io.UserExt);He(i,"id",r.id,Me),He(i,"authId",r.authenticatedId,Me)}},e.cleanUp=function(e,t){var n=e.ext;n&&(Ua(n,Io.DeviceExt),Ua(n,Io.UserExt),Ua(n,Io.WebExt),Ua(n,Io.OSExt),Ua(n,Io.AppExt),Ua(n,Io.TraceExt))}}))}})),Ja=b((()=>{N(),me(),Lr(),Ga(),jo(),Ha=function(e){function t(){var n,r,i=e.call(this)||this;return i.priority=110,i.identifier=_o,ge(t,i,(function(e,i){e.initialize=function(s,o,a,c){i.initialize(s,o,a,c);var l=e._getTelCtx(),u=e.identifier,d=t.getDefaultConfig();r=r||{},Pe(d,(function(e,t){r[e]=function(){return l.getConfig(u,e,t())}})),e.context=new Wa(o,r),n=ti(a,Po),e.context.appId=function(){return n?n._appId:null},e._extConfig=r},e.processTelemetry=function(t,n){if(!we(t)){n=e._getTelCtx(n),t.name===qs.envelopeType&&n.diagLog().resetInternalMessageCount();var r=e.context||{};if(r.session&&"string"!=typeof e.context.session.id&&r.sessionManager&&r.sessionManager.update(),function(t,n){$e(t,"tags",[]),$e(t,"ext",{});var r=e.context;r.applySessionContext(t,n),r.applyApplicationContext(t,n),r.applyDeviceContext(t,n),r.applyOperationContext(t,n),r.applyUserContext(t,n),r.applyOperatingSystemContxt(t,n),r.applyWebContext(t,n),r.applyLocationContext(t,n),r.applyInternalContext(t,n),r.cleanUp(t,n)}(t,n),r.user&&r.user.isNewUser){r.user.isNewUser=!1;var i=new qt(fe.SendBrowserInfoOnUserInit,(gt()||{}).userAgent||"");n.diagLog().logInternalMessage(he.CRITICAL,i)}e.processNext(t,n)}}})),i}return A(t,e),t.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}}},t}(tn),$a=Ha})),Xa=b((()=>{Ja()}));function Qa(e,t,n){var r=0,i=e[t],s=e[n];return i&&s&&(r=Ui(i,s)),r}function Za(e,t,n,r,i){var s=0,o=Qa(n,r,i);return o&&(s=Ya(e,t,Yr(o))),s}function Ya(e,t,n){var r="ajaxPerf",i=0;return e&&t&&n&&((e[r]=e[r]||{})[t]=n,i=1),i}var ec,tc,nc,rc,ic=b((()=>{jo(),Lr(),me(),ec="properties",tc=function(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1},nc=function e(t,n,r){var i=this,s=r,o="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new tc,i.clientFailure=0,i.traceID=t,i.spanID=n,ge(e,i,(function(e){e.getAbsoluteUrl=function(){return e.requestUrl?Ri(e.requestUrl):null},e.getPathName=function(){return e.requestUrl?qr(s,Mi(e.method,e.requestUrl)):null},e.CreateTrackItem=function(t,n,r){if(e.ajaxTotalDuration=Math.round(1e3*Ui(e.requestSentTime,e.responseFinishedTime))/1e3,e.ajaxTotalDuration<0)return null;var i,s=((i={id:"|"+e.traceID+"."+e.spanID,target:e.getAbsoluteUrl(),name:e.getPathName(),type:t,startTime:null,duration:e.ajaxTotalDuration,success:+e.status>=200&&+e.status<400,responseCode:+e.status,method:e.method})[ec]={HttpMethod:e.method},i);if(e.requestSentTime&&(s.startTime=new Date,s.startTime.setTime(e.requestSentTime)),function(e,t){var n=e.perfTiming,r=t[ec]||{},i=0,s="name",o="Start",a="End",c="connect",l="redirect",u="request",d="response",p="duration",g="startTime",h=c+a,f=u+o,m=d+a,v=l+o,y=l=a,C="transferSize",S="encodedBodySize",w="decodedBodySize",b="serverTiming";if(n){i|=Za(r,l,n,v,y),i|=Za(r,"domainLookup",n,"domainLookupStart","domainLookupEnd"),i|=Za(r,c,n,"connectStart",h),i|=Za(r,u,n,f,"requestEnd"),i|=Za(r,d,n,"responseStart",m),i|=Za(r,"networkConnect",n,g,h),i|=Za(r,"sentRequest",n,f,m);var x=n[p];x||(x=Qa(n,g,m)||0),i|=Ya(r,p,x),i|=Ya(r,"perfTotal",x);var T=n[b];if(T){var I={};je(T,(function(e,t){var n=function(e){var t=e,n=/([^\w\d_$])/g;return n.test(e)&&(t=e.replace(n,"_")),t}(e[s]||""+t),r=I[n]||{};Pe(e,(function(e,t){(e!==s&&Me(t)||Fe(t))&&(r[e]&&(t=r[e]+";"+t),(t||!Me(t))&&(r[e]=t))})),I[n]=r})),i|=Ya(r,b,I)}i|=Ya(r,C,n[C]),i|=Ya(r,S,n[S]),i|=Ya(r,w,n[w])}else e.perfMark&&(i|=Ya(r,"missing",e.perfAttempts));i&&(t[ec]=r)}(e,s),n&&Ue(e.requestHeaders).length>0&&(s[ec]=s[ec]||{},s[ec].requestHeaders=e.requestHeaders),r){var a=r();if(a){var c=a.correlationContext;if(c&&(s.correlationContext=c),a.headerMap&&Ue(a.headerMap).length>0&&(s[ec]=s[ec]||{},s[ec].responseHeaders=a.headerMap),e.status>=400){var l=a.type;s[ec]=s[ec]||{},(""===l||"text"===l)&&(s[ec][o]=a[o]?a.statusText+" - "+a[o]:a.statusText),"json"===l&&(s[ec][o]=a.response?a.statusText+" - "+JSON.stringify(a.response):a.statusText)}}}return s}}))}})),sc=b((()=>{Lr(),Lr(),function(){function e(){}e.GetLength=function(e){var t=0;if(!we(e)){var n="";try{n=e.toString()}catch(e){}t=n.length,t=isNaN(t)?0:t}return t}}()})),oc=b((()=>{Lr(),rc=function(){function e(t,n){var r=this;r.traceFlag=e.DEFAULT_TRACE_FLAG,r.version=e.DEFAULT_VERSION,t&&e.isValidTraceId(t)?r.traceId=t:r.traceId=dr(),n&&e.isValidSpanId(n)?r.spanId=n:r.spanId=dr().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.prototype.toString=function(){var e=this;return e.version+"-"+e.traceId+"-"+e.spanId+"-"+e.traceFlag},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}()}));function ac(e){var t="";try{!we(e)&&!we(e[hc])&&!we(e[hc].requestUrl)&&(t+="(url: '"+e[hc].requestUrl+"')")}catch(e){}return t}function cc(e,t,n,r,i){e[gc]()[fc](he.CRITICAL,t,n,r,i)}function lc(e,t,n,r,i){e[gc]()[fc](he.WARNING,t,n,r,i)}function uc(e,t,n){return function(r){cc(e,t,n,{ajaxDiagnosticsMessage:ac(r.inst),exception:St(r.err)})}}function dc(e,t){return e&&t?e.indexOf(t):-1}var pc,gc,hc,fc,mc,vc,yc,Cc,Sc,wc,bc,xc,Tc,Ic,kc=b((()=>{N(),jo(),Lr(),ic(),sc(),oc(),me(),pc="ai.ajxmn.",gc="diagLog",hc="ajaxData",fc="throwInternal",mc="fetch",vc=0,yc=function(e){function t(){var n=e.call(this)||this;n.identifier=t.identifier,n.priority=120;var r,i,s,c,l,u="trackDependencyDataInternal",d=ht(),p=!1,g=!1,h=d&&d.host&&d.host.toLowerCase(),f=t.getEmptyConfig(),m=!1,v=0,y=!1,C=0,S=!1,w=[],b={};return ge(t,n,(function(e,n){function d(e){var t=!0;return(e||f.ignoreHeaders)&&je(f.ignoreHeaders,(function(n){if(n.toLowerCase()===e.toLowerCase())return t=!1,-1})),t}function x(e,t,n){w.push(function(e,t,n){return e?_r(e[a],t,n,!1):null}(e,t,n))}function T(e,t,n){var r=!1,i=((Me(t)?t:(t||{}).url||"")||"").toLowerCase();if(je(l,(function(e){var t=e;Me(e)&&(t=new RegExp(e)),r||(r=t.test(i))})),r)return r;var s=dc(i,"?"),o=dc(i,"#");return(-1===s||-1!==o&&o<s)&&(s=o),-1!==s&&(i=i.substring(0,s)),we(e)?we(t)||(r="object"==typeof t&&!0===t[ri]||!!n&&!0===n[ri]):r=!0===e[ri]||!0===i[ri],r?b[i]||(b[i]=1):b[i]&&(r=!0),r}function I(e,t){var n=!0,r=g;return we(e)||(n=!0===t||!we(e[hc])),r&&n}function _(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(e){}return null}function P(t){try{var n=t.getAllResponseHeaders();if(null!==n&&-1!==dc(n.toLowerCase(),Mr.requestContextHeaderLowerCase)){var r=t.getResponseHeader(Mr.requestContextHeader);return Hi.getCorrelationContext(r)}}catch(n){lc(e,fe.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:ac(t),exception:St(n)})}}function E(e,t){if(t.requestUrl&&c&&y){var n=ft();if(n&&Ie(n.mark)){vc++;var r=c+e+"#"+vc;n.mark(r);var i=n.getEntriesByName(r);i&&1===i.length&&(t.perfMark=i[0])}}}function A(e,t,n,r){var i=t.perfMark,s=ft(),o=f.maxAjaxPerfLookupAttempts,a=f.ajaxPerfLookupDelay,c=t.requestUrl,l=0;!function u(){try{if(s&&i){l++;for(var d=null,p=s.getEntries(),g=p.length-1;g>=0;g--){var h=p[g];if(h){if("resource"===h.entryType)h.initiatorType===e&&(-1!==dc(h.name,c)||-1!==dc(c,h.name))&&(d=h);else if("mark"===h.entryType&&h.name===i.name){t.perfTiming=d;break}if(h.startTime<i.startTime-1e3)break}}}!i||t.perfTiming||l>=o||!1===t.async?(i&&Ie(s.clearMarks)&&s.clearMarks(i.name),t.perfAttempts=l,n()):setTimeout(u,a)}catch(e){r(e)}}()}function R(t){var n="";try{we(t)||(n+="string"==typeof t?"(url: '"+t+"')":"(url: '"+t.url+"')")}catch(t){cc(e,fe.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:St(t)})}return n}function D(t,n,r,i,s,o){function a(t,n,i){var s=i||{};s.fetchDiagnosticsMessage=R(r),n&&(s.exception=St(n)),lc(e,t,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",s)}i&&(i.responseFinishedTime=Ki(),i.status=n,A("fetch",i,(function(){var t=i.CreateTrackItem("Fetch",m,s);t?e[u](t):a(fe.FailedMonitorAjaxDur,null,{requestSentTime:i.requestSentTime,responseFinishedTime:i.responseFinishedTime})}),(function(e){a(fe.FailedMonitorAjaxGetCorrelationHeader,e,null)})))}function M(t){if(t&&t.headers)try{var n=t.headers.get(Mr.requestContextHeader);return Hi.getCorrelationContext(n)}catch(n){lc(e,fe.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:R(t),exception:St(n)})}}e.initialize=function(h,v,b,R){if(!e.isInitialized()){n.initialize(h,v,b,R);var F=e._getTelCtx();Pe(t.getDefaultConfig(),(function(e,n){f[e]=F.getConfig(t.identifier,e,n)}));var L=f.distributedTracingMode;if(m=f.enableRequestHeaderTracking,y=f.enableAjaxPerfTracking,C=f.maxAjaxCallsPerView,S=f.enableResponseHeaderTracking,l=f.excludeRequestFromAutoTrackingPatterns,s=L===ui.AI||L===ui.AI_AND_W3C,i=L===ui.AI_AND_W3C||L===ui.W3C,y){var N=h.instrumentationKey||"unkwn";c=N.length>5?pc+N.substring(N.length-5)+".":pc+N+"."}if(!1===f.disableAjaxTracking&&function(e){var t=!1;if(typeof XMLHttpRequest!==o&&!we(XMLHttpRequest)){var n=XMLHttpRequest[a];t=!(we(n)||we(n.open)||we(n.send)||we(n.abort))}var r=Ct();if(r&&r<9&&(t=!1),t)try{(new XMLHttpRequest)[hc]={};var i=XMLHttpRequest[a].open;XMLHttpRequest[a].open=i}catch(n){t=!1,cc(e,fe.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:St(n)})}return t}(e)&&!g&&(x(XMLHttpRequest,"open",{req:function(t,n,i,s){var o=t.inst,a=o[hc];!T(o,i)&&I(o,!0)&&(!a||!a.xhrMonitoringState.openDone)&&function(t,n,i,s){var o=r&&r.telemetryTrace&&r.telemetryTrace.traceID||dr(),a=dr().substr(0,16),c=new nc(o,a,e[gc]());c.method=n,c.requestUrl=i,c.xhrMonitoringState.openDone=!0,c.requestHeaders={},c.async=s,t[hc]=c,function(t){t[hc].xhrMonitoringState.stateChangeAttached=br.Attach(t,"readystatechange",(function(){try{t&&4===t.readyState&&I(t)&&function(t){var n=t[hc];function r(n,r){var i=r||{};i.ajaxDiagnosticsMessage=ac(t),n&&(i.exception=St(n)),lc(e,fe.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",i)}n.responseFinishedTime=Ki(),n.status=t.status,A("xmlhttprequest",n,(function(){try{var i=n.CreateTrackItem("Ajax",m,(function(){var e={statusText:t.statusText,headerMap:null,correlationContext:P(t),type:t.responseType,responseText:_(t),response:t.response};if(S){var n=t.getAllResponseHeaders();if(n){var r=Ke(n).split(/[\r\n]+/),i={};je(r,(function(e){var t=e.split(": "),n=t.shift(),r=t.join(": ");d(n)&&(i[n]=r)})),e.headerMap=i}}return e}));i?e[u](i):r(null,{requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime})}finally{try{t[hc]=null}catch(e){}}}),(function(e){r(e,null)}))}(t)}catch(r){var n=St(r);(!n||-1===dc(n.toLowerCase(),"c00c023f"))&&cc(e,fe.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:ac(t),exception:n})}}))}(t)}(o,n,i,s)},hkErr:uc(e,fe.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),x(XMLHttpRequest,"send",{req:function(t,n){var r=t.inst,i=r[hc];I(r)&&!i.xhrMonitoringState.sendDone&&(E("xhr",i),i.requestSentTime=Ki(),e.includeCorrelationHeaders(i,void 0,void 0,r),i.xhrMonitoringState.sendDone=!0)},hkErr:uc(e,fe.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),x(XMLHttpRequest,"abort",{req:function(e){var t=e.inst,n=t[hc];I(t)&&!n.xhrMonitoringState.abortDone&&(n.aborted=1,n.xhrMonitoringState.abortDone=!0)},hkErr:uc(e,fe.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),m&&x(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){var r=e.inst;I(r)&&d(t)&&(r[hc].requestHeaders[t]=n)},hkErr:uc(e,fe.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),g=!0),function(){var t=function(){var e=k();return!e||we(e.Request)||we(e.Request[a])||we(e[mc])?null:e[mc]}();if(t){var n=k(),i=t.polyfill;!1===f.disableFetchTracking?(w.push(_r(n,mc,{req:function(t,n,s){var o;if(p&&!T(null,n,s)&&(!i||!g)){var a=t.ctx();o=function(t,n){var i=r&&r.telemetryTrace&&r.telemetryTrace.traceID||dr(),s=dr().substr(0,16),o=new nc(i,s,e[gc]());o.requestSentTime=Ki(),t instanceof Request?o.requestUrl=t?t.url:"":o.requestUrl=t;var a="GET";n&&n.method?a=n.method:t&&t instanceof Request&&(a=t.method),o.method=a;var c={};return m&&new Headers((n?n.headers:0)||t instanceof Request&&t.headers||{}).forEach((function(e,t){d(t)&&(c[t]=e)})),o.requestHeaders=c,E("fetch",o),o}(n,s);var c=e.includeCorrelationHeaders(o,n,s);c!==s&&t.set(1,c),a.data=o}},rsp:function(e,t){var n=e.ctx().data;n&&(e.rslt=e.rslt.then((function(e){return D(0,(e||{}).status,e,n,(function(){var t={statusText:e.statusText,headerMap:null,correlationContext:M(e)};if(S){var n={};e.headers.forEach((function(e,t){d(t)&&(n[t]=e)})),t.headerMap=n}return t})),e})).catch((function(e){throw D(0,0,t,n,null,e.message),e})))},hkErr:uc(e,fe.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),p=!0):i&&w.push(_r(n,mc,{req:function(e,t,n){T(null,t,n)}})),i&&(n[mc].polyfill=i)}}(),b.length>0&&b){for(var j=void 0,O=0;!j&&O<b.length;)b[O]&&b[O].identifier===_o&&(j=b[O]),O++;j&&(r=j.context)}}},e.teardown=function(){je(w,(function(e){e.rm()})),w=[],p=!1,g=!1,e.setInitialized(!1)},e.trackDependencyData=function(t,n){e[u](t,n)},e.includeCorrelationHeaders=function(t,n,o,a){var c=e._currentWindowHost||h;if(n){if(Hi.canIncludeCorrelationHeader(f,t.getAbsoluteUrl(),c)){if(o||(o={}),o.headers=new Headers(o.headers||n instanceof Request&&n.headers||{}),s){var l="|"+t.traceID+"."+t.spanID;o.headers.set(Mr.requestIdHeader,l),m&&(t.requestHeaders[Mr.requestIdHeader]=l)}if((d=f.appId||r&&r.appId())&&(o.headers.set(Mr.requestContextHeader,Mr.requestContextAppIdFormat+d),m&&(t.requestHeaders[Mr.requestContextHeader]=Mr.requestContextAppIdFormat+d)),i){var u=new rc(t.traceID,t.spanID);o.headers.set(Mr.traceParentHeader,u.toString()),m&&(t.requestHeaders[Mr.traceParentHeader]=u.toString())}}return o}if(a){var d;if(Hi.canIncludeCorrelationHeader(f,t.getAbsoluteUrl(),c))s&&(l="|"+t.traceID+"."+t.spanID,a.setRequestHeader(Mr.requestIdHeader,l),m&&(t.requestHeaders[Mr.requestIdHeader]=l)),(d=f.appId||r&&r.appId())&&(a.setRequestHeader(Mr.requestContextHeader,Mr.requestContextAppIdFormat+d),m&&(t.requestHeaders[Mr.requestContextHeader]=Mr.requestContextAppIdFormat+d)),i&&(u=new rc(t.traceID,t.spanID),a.setRequestHeader(Mr.traceParentHeader,u.toString()),m&&(t.requestHeaders[Mr.traceParentHeader]=u.toString()));return a}},e[u]=function(t,n,r){if(-1===C||v<C){(f.distributedTracingMode===ui.W3C||f.distributedTracingMode===ui.AI_AND_W3C)&&"string"==typeof t.id&&"."!==t.id[t.id.length-1]&&(t.id+="."),we(t.startTime)&&(t.startTime=new Date);var i=To.create(t,Us.dataType,Us.envelopeType,e[gc](),n,r);e.core.track(i)}else v===C&&cc(e,fe.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++v}})),n}return A(t,e),t.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:ui.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]}},t.getEmptyConfig=function(){var e=this.getDefaultConfig();return Pe(e,(function(t){e[t]=void 0})),e},t.prototype.processTelemetry=function(e,t){this.processNext(e,t)},t.identifier="AjaxDependencyPlugin",t}(tn)})),_c=b((()=>{kc()})),Pc=b((()=>{Lr(),Jo(),Aa(),Xa(),_c(),jo(),Sc=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],wc={__proto__:null,PropertiesPluginIdentifier:_o,BreezeChannelIdentifier:Po,AnalyticsPluginIdentifier:Eo,Util:zi,CorrelationIdHelper:Hi,UrlHelper:Wi,DateTimeUtils:$i,ConnectionStringParser:Zi,FieldType:{Default:0,Required:1,Array:2,Hidden:4},RequestHeaders:Mr,DisabledPropertyName:ri,ProcessLegacy:si,SampleRate:ii,HttpMethod:oi,DEFAULT_BREEZE_ENDPOINT:ai,AIData:es,AIBase:Yi,Envelope:ns,Event:is,Exception:Rs,Metric:Os,PageView:qs,PageViewData:Vs,RemoteDependencyData:Us,Trace:zs,PageViewPerformance:Hs,Data:$s,SeverityLevel:Gs,ConfigurationManager:Js,ContextTagKeys:xo,DataSanitizer:Gr,TelemetryItemCreator:To,CtxTagKeys:ko,Extensions:Io,DistributedTracingModes:ui},bc=function(){function e(e){var t=this;t._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var n=e.config||{};if(n.connectionString){var r=Ji(n.connectionString),i=r.ingestionendpoint;n.endpointUrl=i?i+"/v2/track":n.endpointUrl,n.instrumentationKey=r.instrumentationkey||n.instrumentationKey}t.appInsights=new zo,t.properties=new $a,t.dependencies=new yc,t.core=new zn,t._sender=new xa,t.snippet=e,t.config=n,t.getSKUDefaults()}return e.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},e.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},e.prototype.trackPageView=function(e){var t=e||{};this.appInsights.trackPageView(t)},e.prototype.trackPageViewPerformance=function(e){var t=e||{};this.appInsights.trackPageViewPerformance(t)},e.prototype.trackException=function(e){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},e.prototype._onerror=function(e){this.appInsights._onerror(e)},e.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},e.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},e.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,r){this.appInsights.stopTrackPage(e,t,n,r)},e.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},e.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){void 0===n&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},e.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},e.prototype.flush=function(e){var t=this;void 0===e&&(e=!0),Bt(this.core,(function(){return"AISKU.flush"}),(function(){je(t.core.getTransmissionControls(),(function(t){je(t,(function(t){t.flush(e)}))}))}),null,e)},e.prototype.onunloadFlush=function(e){void 0===e&&(e=!0),je(this.core.getTransmissionControls(),(function(t){je(t,(function(t){t.onunloadFlush?t.onunloadFlush():t.flush(e)}))}))},e.prototype.loadAppInsights=function(e,t,n){var r=this;void 0===e&&(e=!1);var i=this;return e&&i.config.extensions&&i.config.extensions.length>0&&Xe("Extensions not allowed in legacy mode"),Bt(i.core,(function(){return"AISKU.loadAppInsights"}),(function(){var s=[];s.push(i._sender),s.push(i.properties),s.push(i.dependencies),s.push(i.appInsights),i.core.initialize(i.config,s,t,n),i.context=i.properties.context,Cc&&i.context&&(i.context.internal.sdkSrc=Cc),function(t){if(t){var n="";we(i._snippetVersion)||(n+=i._snippetVersion),e&&(n+=".lg"),i.context&&i.context.internal&&(i.context.internal.snippetVer=n||"-"),Pe(i,(function(e,n){Me(e)&&!Ie(n)&&e&&"_"!==e[0]&&-1===Sc.indexOf(e)&&(t[e]=n)}))}}(i.snippet),i.emptyQueue(),i.pollInternalLogs(),i.addHousekeepingBeforeUnload(r)})),i},e.prototype.updateSnippetDefinitions=function(e){Qe(e,this,(function(e){return e&&-1===Sc.indexOf(e)}))},e.prototype.emptyQueue=function(){var e=this;try{if(Re(e.snippet.queue)){for(var t=e.snippet.queue.length,n=0;n<t;n++)(0,e.snippet.queue[n])();e.snippet.queue=void 0,delete e.snippet.queue}}catch(e){e&&Ie(e.toString)&&e.toString()}},e.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},e.prototype.addHousekeepingBeforeUnload=function(e){if(lt()||dt()){var t=function(){e.onunloadFlush(!1),je(e.appInsights.core._extensions,(function(e){if(e.identifier===_o)return e&&e.context&&e.context._sessionManager&&e.context._sessionManager.backup(),-1}))};if(!e.appInsights.config.disableFlushOnBeforeUnload){var n=ar("beforeunload",t);n=ar("unload",t)||n,n=ar("pagehide",t)||n,!(n=ar("visibilitychange",t)||n)&&!function(){var e=gt();return!(!e||!e.product)&&e.product===Rt}()&&e.appInsights.core.logger.throwInternal(he.CRITICAL,fe.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||(ar("pagehide",t),ar("visibilitychange",t))}},e.prototype.getSender=function(){return this._sender},e.prototype.getSKUDefaults=function(){var e=this;e.config.diagnosticLogInterval=e.config.diagnosticLogInterval&&e.config.diagnosticLogInterval>0?e.config.diagnosticLogInterval:1e4},e}(),function(){var e=null,t=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var n=(document||{}).currentScript;n&&(e=n.src)}catch(e){}if(e)try{var r=e.toLowerCase();if(r)for(var i="",s=0;s<t.length;s++)if(-1!==r.indexOf(t[s])){i="cdn"+(s+1),-1===r.indexOf("/scripts/")&&(-1!==r.indexOf("/next/")?i+="-next":-1!==r.indexOf("/beta/")&&(i+="-beta")),Cc=i+"";break}}catch(e){}}()})),Ec=b((()=>{jo(),Lr(),xc=["snippet","getDefaultConfig","_hasLegacyInitializers","_queue","_processLegacyInitializers"],Tc=function(){function e(t,n){this._hasLegacyInitializers=!1,this._queue=[],this.config=e.getDefaultConfig(t.config),this.appInsightsNew=n,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}return e.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||"https://dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:102400,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=Zr(e.enableDebug),e.disableExceptionTracking=Zr(e.disableExceptionTracking),e.disableTelemetry=Zr(e.disableTelemetry),e.verboseLogging=Zr(e.verboseLogging),e.emitLineDelimitedJson=Zr(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=Zr(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.disableAjaxTracking=Zr(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.isBeaconApiDisabled=Zr(e.isBeaconApiDisabled,!0),e.disableCorrelationHeaders=Zr(e.disableCorrelationHeaders),e.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],e.disableFlushOnBeforeUnload=Zr(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=Zr(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e.enableSessionStorageBuffer=Zr(e.enableSessionStorageBuffer,!0),e.isRetryDisabled=Zr(e.isRetryDisabled),e.isCookieUseDisabled=Zr(e.isCookieUseDisabled),e.isStorageUseDisabled=Zr(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=Zr(e.isBrowserLinkTrackingEnabled),e.enableCorsCorrelation=Zr(e.enableCorsCorrelation),e},e.prototype.addTelemetryInitializers=function(e){var t=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer((function(e){t._processLegacyInitializers(e)})),this._hasLegacyInitializers=!0),this._queue.push(e)},e.prototype.getCookieMgr=function(){return this.appInsightsNew.getCookieMgr()},e.prototype.startTrackPage=function(e){this.appInsightsNew.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,r){this.appInsightsNew.stopTrackPage(e,t,n)},e.prototype.trackPageView=function(e,t,n,r,i){var s={name:e,uri:t,properties:n,measurements:r};this.appInsightsNew.trackPageView(s)},e.prototype.trackEvent=function(e,t,n){this.appInsightsNew.trackEvent({name:e})},e.prototype.trackDependency=function(e,t,n,r,i,s,o){this.appInsightsNew.trackDependencyData({id:e,target:n,type:r,duration:i,properties:{HttpMethod:t},success:s,responseCode:o})},e.prototype.trackException=function(e,t,n,r,i){this.appInsightsNew.trackException({exception:e})},e.prototype.trackMetric=function(e,t,n,r,i,s){this.appInsightsNew.trackMetric({name:e,average:t,sampleCount:n,min:r,max:i})},e.prototype.trackTrace=function(e,t,n){this.appInsightsNew.trackTrace({message:e,severityLevel:n})},e.prototype.flush=function(e){this.appInsightsNew.flush(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){this.appInsightsNew.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},e.prototype._onerror=function(e,t,n,r,i){this.appInsightsNew._onerror({message:e,url:t,lineNumber:n,columnNumber:r,error:i})},e.prototype.startTrackEvent=function(e){this.appInsightsNew.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsightsNew.stopTrackEvent(e,t,n)},e.prototype.downloadAndSetup=function(e){Xe("downloadAndSetup not implemented in web SKU")},e.prototype.updateSnippetDefinitions=function(e){Qe(e,this,(function(e){return e&&-1===xc.indexOf(e)}))},e.prototype.loadAppInsights=function(){var e=this;if(this.config.iKey){var t=this.trackPageView;this.trackPageView=function(n,r,i){t.apply(e,[null,n,r,i])}}var n="logPageView";"function"==typeof this.snippet[n]&&(this[n]=function(t,n,r){e.trackPageView(null,t,n,r)});var r="logEvent";return"function"==typeof this.snippet[r]&&(this[r]=function(t,n,r){e.trackEvent(t,n,r)}),this},e.prototype._processLegacyInitializers=function(e){return e.tags[si]=this._queue,e},e}()})),Ac=b((()=>{Ec(),Pc(),Lr(),Ic=function(){function e(){}return e.getAppInsights=function(e,t){var n=new bc(e),r=2!==t;if(pr(),2===t)return n.updateSnippetDefinitions(e),n.loadAppInsights(r),n;var i=new Tc(e,n);return i.updateSnippetDefinitions(e),n.loadAppInsights(r),i},e}()})),Rc={};((e,t)=>{for(var n in t)m(e,n,{get:t[n],enumerable:!0})})(Rc,{AppInsightsCore:()=>zn,ApplicationAnalytics:()=>zo,ApplicationInsights:()=>bc,ApplicationInsightsContainer:()=>Ic,BaseCore:()=>Un,BaseTelemetryPlugin:()=>tn,CoreUtils:()=>Sr,DependenciesPlugin:()=>yc,DistributedTracingModes:()=>ui,Event:()=>is,Exception:()=>Rs,LoggingSeverity:()=>he,Metric:()=>Os,NotificationManager:()=>Bn,PageView:()=>qs,PageViewPerformance:()=>Hs,PerfEvent:()=>zt,PerfManager:()=>Wt,PropertiesPlugin:()=>$a,RemoteDependencyData:()=>Us,Sender:()=>xa,SeverityLevel:()=>Gs,Telemetry:()=>wc,Trace:()=>zs,Util:()=>zi,_InternalMessageId:()=>fe,doPerf:()=>Bt});var Dc=b((()=>{Pc(),Ac(),Lr(),jo(),Aa(),Jo(),Xa(),_c()}));function Mc(){try{let e=f.env.telemetryConfiguration;return e.isUsageEnabled&&e.isErrorsEnabled&&e.isCrashEnabled?"on":e.isErrorsEnabled&&e.isCrashEnabled?"error":"off"}catch(e){return void 0!==f.env.isTelemetryEnabled?f.env.isTelemetryEnabled?"on":"off":f.workspace.getConfiguration("telemetry").get("enableTelemetry")?"on":"off"}}var Fc=e=>x(void 0,null,(function*(){let t;try{let n,r=yield Promise.resolve().then((()=>(Dc(),Rc)));e&&0===e.indexOf("AIF-")&&(n="https://vortex.data.microsoft.com/collect/v1"),t=new r.ApplicationInsights({config:{instrumentationKey:e,endpointUrl:n,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!0,disableInstrumentationKeyValidation:!0}}),t.loadAppInsights();let i=Mc();n&&"off"!==i&&fetch(n).catch((()=>t=void 0))}catch(e){return Promise.reject(e)}return{logEvent:(e,n)=>{null==t||t.trackEvent({name:e},w(w({},null==n?void 0:n.properties),null==n?void 0:n.measurements))},logException:(e,n)=>{null==t||t.trackException({exception:e,properties:w(w({},null==n?void 0:n.properties),null==n?void 0:n.measurements)})},flush:()=>x(void 0,null,(function*(){null==t||t.flush()}))}})),Lc=class extends class{constructor(e,t,n,r,i){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=n,this.osShim=r,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!i,this.updateUserOptStatus(),void 0!==f.env.onDidChangeTelemetryEnabled?(this.disposables.push(f.env.onDidChangeTelemetryEnabled((()=>this.updateUserOptStatus()))),this.disposables.push(f.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))):this.disposables.push(f.workspace.onDidChangeConfiguration((()=>this.updateUserOptStatus())))}updateUserOptStatus(){let e=Mc();this.userOptIn="on"===e,this.errorOptIn="error"===e||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach((n=>{0===e.indexOf(`${n}`)&&(t=n)})),t}get extension(){return void 0===this._extension&&(this._extension=f.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(null===e||"object"!=typeof e||"function"!=typeof t)return e;let n={};for(let r in e)n[r]=t(r,e[r]);return n}shouldSendErrorTelemetry(){return!(!1===this.errorOptIn||this.firstParty&&f.env.remoteName&&"other"===this.cleanRemoteName(f.env.remoteName))}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,f&&f.env){switch(e["common.vscodemachineid"]=f.env.machineId,e["common.vscodesessionid"]=f.env.sessionId,e["common.vscodeversion"]=f.version,e["common.isnewappinstall"]=f.env.isNewAppInstall?f.env.isNewAppInstall.toString():"false",e["common.product"]=f.env.appHost,f.env.uiKind){case f.UIKind.Web:e["common.uikind"]="web";break;case f.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(f.env.remoteName)}return e}anonymizeFilePaths(e,t){let n;if(null==e)return"";let r=[];""!==f.env.appRoot&&r.push(new RegExp(f.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=e;if(t){let t=[];for(let i of r)for(;(n=i.exec(e))&&n;)t.push([n.index,i.lastIndex]);let s=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,o=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,a=0;for(i="";(n=o.exec(e))&&n;)n[0]&&!s.test(n[0])&&t.every((([e,t])=>n.index<e||n.index>=t))&&(i+=e.substring(a,n.index)+"<REDACTED: user-file-path>",a=o.lastIndex);a<e.length&&(i+=e.substr(a))}for(let e of r)i=i.replace(e,"");return i}removePropertiesWithPossibleUserInfo(e){if("object"!=typeof e)return;let t=Object.create(null);for(let n of Object.keys(e)){let r=e[n];if(!r)continue;let i=/@[a-zA-Z0-9-.]+/,s=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/.test(r.toLowerCase())?t[n]="<REDACTED: secret>":i.test(r)?t[n]="<REDACTED: email>":s.test(r)?t[n]="<REDACTED: token>":t[n]=r}return t}get telemetryLevel(){switch(Mc()){case"on":return"all";case"error":return"error";case"off":return"off"}}sendTelemetryEvent(e,t,n){if(this.userOptIn&&""!==e){t=w(w({},t),this.getCommonProperties());let r=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(r),measurements:n})}}sendRawTelemetryEvent(e,t,n){this.userOptIn&&""!==e&&(t=w(w({},t),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:t,measurements:n}))}sendTelemetryErrorEvent(e,t,n,r){if(this.errorOptIn&&""!==e){t=w(w({},t),this.getCommonProperties());let i=this.cloneAndChange(t,((e,t)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(t,this.firstParty):void 0===r||-1!==r.indexOf(e)?"REDACTED":this.anonymizeFilePaths(t,this.firstParty)));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(i),measurements:n})}}sendTelemetryException(e,t,n){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&e){t=w(w({},t),this.getCommonProperties());let r=this.cloneAndChange(t,((e,t)=>this.anonymizeFilePaths(t,this.firstParty)));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(r),measurements:n})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map((e=>e.dispose())))}}{constructor(e,t,n,r){let i=new class{constructor(e,t){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e,"off"!==Mc()&&this.instantiateAppender()}logEvent(e,t){this._telemetryClient?this._telemetryClient.logEvent(e,t):!this._isInstantiated&&"on"===Mc()&&this._eventQueue.push({eventName:e,data:t})}logException(e,t){this._telemetryClient?this._telemetryClient.logException(e,t):!this._isInstantiated&&"off"!==Mc()&&this._exceptionQueue.push({exception:e,data:t})}flush(){return x(this,null,(function*(){this._telemetryClient&&(yield this._telemetryClient.flush(),this._telemetryClient=void 0)}))}_flushQueues(){this._eventQueue.forEach((({eventName:e,data:t})=>this.logEvent(e,t))),this._eventQueue=[],this._exceptionQueue.forEach((({exception:e,data:t})=>this.logException(e,t))),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then((e=>{this._telemetryClient=e,this._isInstantiated=!0,this._flushQueues()})).catch((e=>{console.error(e)}))}}(n,Fc);n&&0===n.indexOf("AIF-")&&(r=!0),super(e,t,i,{release:navigator.appVersion,platform:"web",architecture:"web"},r)}}},516:(e,t,n)=>{"use strict";function r(e,t){void 0===t&&(t=!1);var n=e.length,r=0,a="",c=0,l=16,u=0,d=0,p=0,g=0,h=0;function f(t,n){for(var i=0,s=0;i<t||!n;){var o=e.charCodeAt(r);if(o>=48&&o<=57)s=16*s+o-48;else if(o>=65&&o<=70)s=16*s+o-65+10;else{if(!(o>=97&&o<=102))break;s=16*s+o-97+10}r++,i++}return i<t&&(s=-1),s}function m(){if(a="",h=0,c=r,d=u,g=p,r>=n)return c=n,l=17;var t=e.charCodeAt(r);if(i(t)){do{r++,a+=String.fromCharCode(t),t=e.charCodeAt(r)}while(i(t));return l=15}if(s(t))return r++,a+=String.fromCharCode(t),13===t&&10===e.charCodeAt(r)&&(r++,a+="\n"),u++,p=r,l=14;switch(t){case 123:return r++,l=1;case 125:return r++,l=2;case 91:return r++,l=3;case 93:return r++,l=4;case 58:return r++,l=6;case 44:return r++,l=5;case 34:return r++,a=function(){for(var t="",i=r;;){if(r>=n){t+=e.substring(i,r),h=2;break}var o=e.charCodeAt(r);if(34===o){t+=e.substring(i,r),r++;break}if(92!==o){if(o>=0&&o<=31){if(s(o)){t+=e.substring(i,r),h=2;break}h=6}r++}else{if(t+=e.substring(i,r),++r>=n){h=2;break}switch(e.charCodeAt(r++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var a=f(4,!0);a>=0?t+=String.fromCharCode(a):h=4;break;default:h=5}i=r}}return t}(),l=10;case 47:var m=r-1;if(47===e.charCodeAt(r+1)){for(r+=2;r<n&&!s(e.charCodeAt(r));)r++;return a=e.substring(m,r),l=12}if(42===e.charCodeAt(r+1)){r+=2;for(var y=n-1,C=!1;r<y;){var S=e.charCodeAt(r);if(42===S&&47===e.charCodeAt(r+1)){r+=2,C=!0;break}r++,s(S)&&(13===S&&10===e.charCodeAt(r)&&r++,u++,p=r)}return C||(r++,h=1),a=e.substring(m,r),l=13}return a+=String.fromCharCode(t),r++,l=16;case 45:if(a+=String.fromCharCode(t),++r===n||!o(e.charCodeAt(r)))return l=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return a+=function(){var t=r;if(48===e.charCodeAt(r))r++;else for(r++;r<e.length&&o(e.charCodeAt(r));)r++;if(r<e.length&&46===e.charCodeAt(r)){if(!(++r<e.length&&o(e.charCodeAt(r))))return h=3,e.substring(t,r);for(r++;r<e.length&&o(e.charCodeAt(r));)r++}var n=r;if(r<e.length&&(69===e.charCodeAt(r)||101===e.charCodeAt(r)))if((++r<e.length&&43===e.charCodeAt(r)||45===e.charCodeAt(r))&&r++,r<e.length&&o(e.charCodeAt(r))){for(r++;r<e.length&&o(e.charCodeAt(r));)r++;n=r}else h=3;return e.substring(t,n)}(),l=11;default:for(;r<n&&v(t);)r++,t=e.charCodeAt(r);if(c!==r){switch(a=e.substring(c,r)){case"true":return l=8;case"false":return l=9;case"null":return l=7}return l=16}return a+=String.fromCharCode(t),r++,l=16}}function v(e){if(i(e)||s(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){r=e,a="",c=0,l=16,h=0},getPosition:function(){return r},scan:t?function(){var e;do{e=m()}while(e>=12&&e<=15);return e}:m,getToken:function(){return l},getTokenValue:function(){return a},getTokenOffset:function(){return c},getTokenLength:function(){return r-c},getTokenStartLine:function(){return d},getTokenStartCharacter:function(){return c-g},getTokenError:function(){return h}}}function i(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function s(e){return 10===e||13===e||8232===e||8233===e}function o(e){return e>=48&&e<=57}function a(e,t,n){var i,s,o,a,u;if(t){for(a=t.offset,u=a+t.length,o=a;o>0&&!l(e,o-1);)o--;for(var d=u;d<e.length&&!l(e,d);)d++;s=e.substring(o,d),i=function(e,t){for(var n=0,r=0,i=t.tabSize||4;n<e.length;){var s=e.charAt(n);if(" "===s)r++;else{if("\t"!==s)break;r+=i}n++}return Math.floor(r/i)}(s,n)}else s=e,i=0,o=0,a=0,u=e.length;var p,g=function(e,t){for(var n=0;n<t.length;n++){var r=t.charAt(n);if("\r"===r)return n+1<t.length&&"\n"===t.charAt(n+1)?"\r\n":"\r";if("\n"===r)return"\n"}return e&&e.eol||"\n"}(n,e),h=!1,f=0;p=n.insertSpaces?c(" ",n.tabSize||4):"\t";var m=r(s,!1),v=!1;function y(){return g+c(p,i+f)}function C(){var e=m.scan();for(h=!1;15===e||14===e;)h=h||14===e,e=m.scan();return v=16===e||0!==m.getTokenError(),e}var S=[];function w(t,n,r){!v&&n<u&&r>a&&e.substring(n,r)!==t&&S.push({offset:n,length:r-n,content:t})}var b=C();if(17!==b){var x=m.getTokenOffset()+o;w(c(p,i),o,x)}for(;17!==b;){for(var T=m.getTokenOffset()+m.getTokenLength()+o,I=C(),k="";!h&&(12===I||13===I);)w(" ",T,m.getTokenOffset()+o),T=m.getTokenOffset()+m.getTokenLength()+o,k=12===I?y():"",I=C();if(2===I)1!==b&&(f--,k=y());else if(4===I)3!==b&&(f--,k=y());else{switch(b){case 3:case 1:f++,k=y();break;case 5:case 12:k=y();break;case 13:k=h?y():" ";break;case 6:k=" ";break;case 10:if(6===I){k="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===I||13===I?k=" ":5!==I&&17!==I&&(v=!0);break;case 16:v=!0}!h||12!==I&&13!==I||(k=y())}w(k,T,m.getTokenOffset()+o),b=I}return S}function c(e,t){for(var n="",r=0;r<t;r++)n+=e;return n}function l(e,t){return-1!=="\r\n".indexOf(e.charAt(t))}var u;function d(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=u.DEFAULT);var r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(e){"property"===r.type&&(r.length=e-r.offset,r=r.parent)}function s(e){return r.children.push(e),e}g(e,{onObjectBegin:function(e){r=s({type:"object",offset:e,length:-1,parent:r,children:[]})},onObjectProperty:function(e,t,n){(r=s({type:"property",offset:t,length:-1,parent:r,children:[]})).children.push({type:"string",value:e,offset:t,length:n,parent:r})},onObjectEnd:function(e,t){i(e+t),r.length=e+t-r.offset,r=r.parent,i(e+t)},onArrayBegin:function(e,t){r=s({type:"array",offset:e,length:-1,parent:r,children:[]})},onArrayEnd:function(e,t){r.length=e+t-r.offset,r=r.parent,i(e+t)},onLiteralValue:function(e,t,n){s({type:h(e),offset:t,length:n,parent:r,value:e}),i(t+n)},onSeparator:function(e,t,n){"property"===r.type&&(":"===e?r.colonOffset=t:","===e&&i(t))},onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n);var o=r.children[0];return o&&delete o.parent,o}function p(e,t){if(e){for(var n=e,r=0,i=t;r<i.length;r++){var s=i[r];if("string"==typeof s){if("object"!==n.type||!Array.isArray(n.children))return;for(var o=!1,a=0,c=n.children;a<c.length;a++){var l=c[a];if(Array.isArray(l.children)&&l.children[0].value===s){n=l.children[1],o=!0;break}}if(!o)return}else{var u=s;if("array"!==n.type||u<0||!Array.isArray(n.children)||u>=n.children.length)return;n=n.children[u]}}return n}}function g(e,t,n){void 0===n&&(n=u.DEFAULT);var i=r(e,!1);function s(e){return e?function(){return e(i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}function o(e){return e?function(t){return e(t,i.getTokenOffset(),i.getTokenLength(),i.getTokenStartLine(),i.getTokenStartCharacter())}:function(){return!0}}var a=s(t.onObjectBegin),c=o(t.onObjectProperty),l=s(t.onObjectEnd),d=s(t.onArrayBegin),p=s(t.onArrayEnd),g=o(t.onLiteralValue),h=o(t.onSeparator),f=s(t.onComment),m=o(t.onError),v=n&&n.disallowComments,y=n&&n.allowTrailingComma;function C(){for(;;){var e=i.scan();switch(i.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:v||S(11);break;case 2:S(12);break;case 6:S(16)}switch(e){case 12:case 13:v?S(10):f();break;case 16:S(1);break;case 15:case 14:break;default:return e}}}function S(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),m(e),t.length+n.length>0)for(var r=i.getToken();17!==r;){if(-1!==t.indexOf(r)){C();break}if(-1!==n.indexOf(r))break;r=C()}}function w(e){var t=i.getTokenValue();return e?g(t):c(t),C(),!0}return C(),17===i.getToken()?!!n.allowEmptyContent||(S(4,[],[]),!1):function e(){switch(i.getToken()){case 3:return function(){d(),C();for(var t=!1;4!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(t||S(4,[],[]),h(","),C(),4===i.getToken()&&y)break}else t&&S(6,[],[]);e()||S(4,[],[4,5]),t=!0}return p(),4!==i.getToken()?S(8,[4],[]):C(),!0}();case 1:return function(){a(),C();for(var t=!1;2!==i.getToken()&&17!==i.getToken();){if(5===i.getToken()){if(t||S(4,[],[]),h(","),C(),2===i.getToken()&&y)break}else t&&S(6,[],[]);(10!==i.getToken()?(S(3,[],[2,5]),0):(w(!1),6===i.getToken()?(h(":"),C(),e()||S(4,[],[2,5])):S(5,[],[2,5]),1))||S(4,[],[2,5]),t=!0}return l(),2!==i.getToken()?S(7,[2],[]):C(),!0}();case 10:return w(!0);default:return function(){switch(i.getToken()){case 11:var e=i.getTokenValue(),t=Number(e);isNaN(t)&&(S(2),t=0),g(t);break;case 7:g(null);break;case 8:g(!0);break;case 9:g(!1);break;default:return!1}return C(),!0}()}}()?(17!==i.getToken()&&S(9,[],[]),!0):(S(4,[],[]),!1)}function h(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":return e?Array.isArray(e)?"array":"object":"null";default:return"null"}}function f(e,t,n){if(!n.formattingOptions)return[t];var r=m(e,t),i=t.offset,s=t.offset+t.content.length;if(0===t.length||0===t.content.length){for(;i>0&&!l(r,i-1);)i--;for(;s<r.length&&!l(r,s);)s++}for(var o=a(r,{offset:i,length:s-i},n.formattingOptions),c=o.length-1;c>=0;c--){var u=o[c];r=m(r,u),i=Math.min(i,u.offset),s=Math.max(s,u.offset+u.length),s+=u.content.length-u.length}return[{offset:i,length:e.length-(r.length-s)-i,content:r.substring(i,s)}]}function m(e,t){return e.substring(0,t.offset)+t.content+e.substring(t.offset+t.length)}n.r(t),n.d(t,{applyEdits:()=>A,createScanner:()=>v,findNodeAtLocation:()=>w,findNodeAtOffset:()=>b,format:()=>P,getLocation:()=>y,getNodePath:()=>x,getNodeValue:()=>T,modify:()=>E,parse:()=>C,parseTree:()=>S,printParseErrorCode:()=>_,stripComments:()=>k,visit:()=>I}),function(e){e.DEFAULT={allowTrailingComma:!1}}(u||(u={}));var v=r,y=function(e,t){var n=[],r=new Object,i=void 0,s={value:{},offset:0,length:0,type:"object",parent:void 0},o=!1;function a(e,t,n,r){s.value=e,s.offset=t,s.length=n,s.type=r,s.colonOffset=void 0,i=s}try{g(e,{onObjectBegin:function(e,s){if(t<=e)throw r;i=void 0,o=t>e,n.push("")},onObjectProperty:function(e,i,s){if(t<i)throw r;if(a(e,i,s,"property"),n[n.length-1]=e,t<=i+s)throw r},onObjectEnd:function(e,s){if(t<=e)throw r;i=void 0,n.pop()},onArrayBegin:function(e,s){if(t<=e)throw r;i=void 0,n.push(0)},onArrayEnd:function(e,s){if(t<=e)throw r;i=void 0,n.pop()},onLiteralValue:function(e,n,i){if(t<n)throw r;if(a(e,n,i,h(e)),t<=n+i)throw r},onSeparator:function(e,s,a){if(t<=s)throw r;if(":"===e&&i&&"property"===i.type)i.colonOffset=s,o=!1,i=void 0;else if(","===e){var c=n[n.length-1];"number"==typeof c?n[n.length-1]=c+1:(o=!0,n[n.length-1]=""),i=void 0}}})}catch(e){if(e!==r)throw e}return{path:n,previousNode:i,isAtPropertyKey:o,matches:function(e){for(var t=0,r=0;t<e.length&&r<n.length;r++)if(e[t]===n[r]||"*"===e[t])t++;else if("**"!==e[t])return!1;return t===e.length}}},C=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=u.DEFAULT);var r=null,i=[],s=[];function o(e){Array.isArray(i)?i.push(e):null!==r&&(i[r]=e)}return g(e,{onObjectBegin:function(){var e={};o(e),s.push(i),i=e,r=null},onObjectProperty:function(e){r=e},onObjectEnd:function(){i=s.pop()},onArrayBegin:function(){var e=[];o(e),s.push(i),i=e,r=null},onArrayEnd:function(){i=s.pop()},onLiteralValue:o,onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n),i[0]},S=d,w=p,b=function e(t,n,r){if(void 0===r&&(r=!1),function(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}(t,n,r)){var i=t.children;if(Array.isArray(i))for(var s=0;s<i.length&&i[s].offset<=n;s++){var o=e(i[s],n,r);if(o)return o}return t}},x=function e(t){if(!t.parent||!t.parent.children)return[];var n=e(t.parent);if("property"===t.parent.type){var r=t.parent.children[0].value;n.push(r)}else if("array"===t.parent.type){var i=t.parent.children.indexOf(t);-1!==i&&n.push(i)}return n},T=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var n=Object.create(null),r=0,i=t.children;r<i.length;r++){var s=i[r],o=s.children[1];o&&(n[s.children[0].value]=e(o))}return n;case"null":case"string":case"number":case"boolean":return t.value;default:return}},I=g,k=function(e,t){var n,i,s=r(e),o=[],a=0;do{switch(i=s.getPosition(),n=s.scan()){case 12:case 13:case 17:a!==i&&o.push(e.substring(a,i)),void 0!==t&&o.push(s.getTokenValue().replace(/[^\r\n]/g,t)),a=s.getPosition()}}while(17!==n);return o.join("")};function _(e){switch(e){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}function P(e,t,n){return a(e,t,n)}function E(e,t,n,r){return function(e,t,n,r){for(var i,s=t.slice(),o=d(e,[]),a=void 0,c=void 0;s.length>0&&(c=s.pop(),void 0===(a=p(o,s))&&void 0!==n);)"string"==typeof c?((i={})[c]=n,n=i):n=[n];if(a){if("object"===a.type&&"string"==typeof c&&Array.isArray(a.children)){var l=p(a,[c]);if(void 0!==l){if(void 0===n){if(!l.parent)throw new Error("Malformed AST");var u=a.children.indexOf(l.parent),g=void 0,h=l.parent.offset+l.parent.length;return u>0?g=(x=a.children[u-1]).offset+x.length:(g=a.offset+1,a.children.length>1&&(h=a.children[1].offset)),f(e,{offset:g,length:h-g,content:""},r)}return f(e,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r)}if(void 0===n)return[];var m=JSON.stringify(c)+": "+JSON.stringify(n),v=void 0;return f(e,v=(T=r.getInsertionIndex?r.getInsertionIndex(a.children.map((function(e){return e.children[0].value}))):a.children.length)>0?{offset:(x=a.children[T-1]).offset+x.length,length:0,content:","+m}:0===a.children.length?{offset:a.offset+1,length:0,content:m}:{offset:a.offset+1,length:0,content:m+","},r)}if("array"===a.type&&"number"==typeof c&&Array.isArray(a.children)){var y=c;if(-1===y)return m=""+JSON.stringify(n),v=void 0,f(e,v=0===a.children.length?{offset:a.offset+1,length:0,content:m}:{offset:(x=a.children[a.children.length-1]).offset+x.length,length:0,content:","+m},r);if(void 0===n&&a.children.length>=0){var C=c,S=a.children[C];if(v=void 0,1===a.children.length)v={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===C){var w=(x=a.children[C-1]).offset+x.length;v={offset:w,length:a.offset+a.length-2-w,content:""}}else v={offset:S.offset,length:a.children[C+1].offset-S.offset,content:""};return f(e,v,r)}if(void 0!==n){if(v=void 0,m=""+JSON.stringify(n),!r.isArrayInsertion&&a.children.length>c){var b=a.children[c];v={offset:b.offset,length:b.length,content:m}}else if(0===a.children.length||0===c)v={offset:a.offset+1,length:0,content:0===a.children.length?m:m+","};else{var x,T=c>a.children.length?a.children.length:c;v={offset:(x=a.children[T-1]).offset+x.length,length:0,content:","+m}}return f(e,v,r)}throw new Error("Can not "+(void 0===n?"remove":r.isArrayInsertion?"insert":"modify")+" Array index "+y+" as length is not sufficient")}throw new Error("Can not add "+("number"!=typeof c?"index":"property")+" to parent of type "+a.type)}if(void 0===n)throw new Error("Can not delete in empty document");return f(e,{offset:o?o.offset:0,length:o?o.length:0,content:JSON.stringify(n)},r)}(e,t,n,r)}function A(e,t){for(var n=t.length-1;n>=0;n--)e=m(e,t[n]);return e}},6625:(e,t)=>{var n;t=e.exports=H,n="object"==typeof process&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],s=t.src=[],o=0,a=o++;s[a]="0|[1-9]\\d*";var c=o++;s[c]="[0-9]+";var l=o++;s[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=o++;s[u]="("+s[a]+")\\.("+s[a]+")\\.("+s[a]+")";var d=o++;s[d]="("+s[c]+")\\.("+s[c]+")\\.("+s[c]+")";var p=o++;s[p]="(?:"+s[a]+"|"+s[l]+")";var g=o++;s[g]="(?:"+s[c]+"|"+s[l]+")";var h=o++;s[h]="(?:-("+s[p]+"(?:\\."+s[p]+")*))";var f=o++;s[f]="(?:-?("+s[g]+"(?:\\."+s[g]+")*))";var m=o++;s[m]="[0-9A-Za-z-]+";var v=o++;s[v]="(?:\\+("+s[m]+"(?:\\."+s[m]+")*))";var y=o++,C="v?"+s[u]+s[h]+"?"+s[v]+"?";s[y]="^"+C+"$";var S="[v=\\s]*"+s[d]+s[f]+"?"+s[v]+"?",w=o++;s[w]="^"+S+"$";var b=o++;s[b]="((?:<|>)?=?)";var x=o++;s[x]=s[c]+"|x|X|\\*";var T=o++;s[T]=s[a]+"|x|X|\\*";var I=o++;s[I]="[v=\\s]*("+s[T]+")(?:\\.("+s[T]+")(?:\\.("+s[T]+")(?:"+s[h]+")?"+s[v]+"?)?)?";var k=o++;s[k]="[v=\\s]*("+s[x]+")(?:\\.("+s[x]+")(?:\\.("+s[x]+")(?:"+s[f]+")?"+s[v]+"?)?)?";var _=o++;s[_]="^"+s[b]+"\\s*"+s[I]+"$";var P=o++;s[P]="^"+s[b]+"\\s*"+s[k]+"$";var E=o++;s[E]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var A=o++;s[A]="(?:~>?)";var R=o++;s[R]="(\\s*)"+s[A]+"\\s+",i[R]=new RegExp(s[R],"g");var D=o++;s[D]="^"+s[A]+s[I]+"$";var M=o++;s[M]="^"+s[A]+s[k]+"$";var F=o++;s[F]="(?:\\^)";var L=o++;s[L]="(\\s*)"+s[F]+"\\s+",i[L]=new RegExp(s[L],"g");var N=o++;s[N]="^"+s[F]+s[I]+"$";var j=o++;s[j]="^"+s[F]+s[k]+"$";var O=o++;s[O]="^"+s[b]+"\\s*("+S+")$|^$";var V=o++;s[V]="^"+s[b]+"\\s*("+C+")$|^$";var q=o++;s[q]="(\\s*)"+s[b]+"\\s*("+S+"|"+s[I]+")",i[q]=new RegExp(s[q],"g");var K=o++;s[K]="^\\s*("+s[I]+")\\s+-\\s+("+s[I]+")\\s*$";var U=o++;s[U]="^\\s*("+s[k]+")\\s+-\\s+("+s[k]+")\\s*$";var B=o++;s[B]="(<|>)?=?\\s*\\*";for(var z=0;z<35;z++)n(z,s[z]),i[z]||(i[z]=new RegExp(s[z]));function W(e,t){if(e instanceof H)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t?i[w]:i[y]).test(e))return null;try{return new H(e,t)}catch(e){return null}}function H(e,t){if(e instanceof H){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof H))return new H(e,t);n("SemVer",e,t),this.loose=t;var s=e.trim().match(t?i[w]:i[y]);if(!s)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<r)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}t.parse=W,t.valid=function(e,t){var n=W(e,t);return n?n.version:null},t.clean=function(e,t){var n=W(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=H,H.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},H.prototype.toString=function(){return this.version},H.prototype.compare=function(e){return n("SemVer.compare",this.version,this.loose,e),e instanceof H||(e=new H(e,this.loose)),this.compareMain(e)||this.comparePre(e)},H.prototype.compareMain=function(e){return e instanceof H||(e=new H(e,this.loose)),G(this.major,e.major)||G(this.minor,e.minor)||G(this.patch,e.patch)},H.prototype.comparePre=function(e){if(e instanceof H||(e=new H(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return G(r,i)}while(++t)},H.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new H(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(Z(e,t))return null;var n=W(e),r=W(t);if(n.prerelease.length||r.prerelease.length){for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return"pre"+i;return"prerelease"}for(var i in n)if(("major"===i||"minor"===i||"patch"===i)&&n[i]!==r[i])return i},t.compareIdentifiers=G;var $=/^[0-9]+$/;function G(e,t){var n=$.test(e),r=$.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function J(e,t,n){return new H(e,n).compare(new H(t,n))}function X(e,t,n){return J(e,t,n)>0}function Q(e,t,n){return J(e,t,n)<0}function Z(e,t,n){return 0===J(e,t,n)}function Y(e,t,n){return 0!==J(e,t,n)}function ee(e,t,n){return J(e,t,n)>=0}function te(e,t,n){return J(e,t,n)<=0}function ne(e,t,n,r){var i;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),i=e!==n;break;case"":case"=":case"==":i=Z(e,n,r);break;case"!=":i=Y(e,n,r);break;case">":i=X(e,n,r);break;case">=":i=ee(e,n,r);break;case"<":i=Q(e,n,r);break;case"<=":i=te(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return i}function re(e,t){if(e instanceof re){if(e.loose===t)return e;e=e.value}if(!(this instanceof re))return new re(e,t);n("comparator",e,t),this.loose=t,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return G(t,e)},t.major=function(e,t){return new H(e,t).major},t.minor=function(e,t){return new H(e,t).minor},t.patch=function(e,t){return new H(e,t).patch},t.compare=J,t.compareLoose=function(e,t){return J(e,t,!0)},t.rcompare=function(e,t,n){return J(t,e,n)},t.sort=function(e,n){return e.sort((function(e,r){return t.compare(e,r,n)}))},t.rsort=function(e,n){return e.sort((function(e,r){return t.rcompare(e,r,n)}))},t.gt=X,t.lt=Q,t.eq=Z,t.neq=Y,t.gte=ee,t.lte=te,t.cmp=ne,t.Comparator=re;var ie={};function se(e,t){if(e instanceof se)return e.loose===t?e:new se(e.raw,t);if(e instanceof re)return new se(e.value,t);if(!(this instanceof se))return new se(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function oe(e){return!e||"x"===e.toLowerCase()||"*"===e}function ae(e,t,n,r,i,s,o,a,c,l,u,d,p){return((t=oe(n)?"":oe(r)?">="+n+".0.0":oe(i)?">="+n+"."+r+".0":">="+t)+" "+(a=oe(c)?"":oe(l)?"<"+(+c+1)+".0.0":oe(u)?"<"+c+"."+(+l+1)+".0":d?"<="+c+"."+l+"."+u+"-"+d:"<="+a)).trim()}function ce(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==ie&&e[r].semver.prerelease.length>0){var i=e[r].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,n){try{t=new se(t,n)}catch(e){return!1}return t.test(e)}function ue(e,t,n,r){var i,s,o,a,c;switch(e=new H(e,r),t=new se(t,r),n){case">":i=X,s=te,o=Q,a=">",c=">=";break;case"<":i=Q,s=ee,o=X,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],d=null,p=null;if(u.forEach((function(e){e.semver===ie&&(e=new re(">=0.0.0")),d=d||e,p=p||e,i(e.semver,d.semver,r)?d=e:o(e.semver,p.semver,r)&&(p=e)})),d.operator===a||d.operator===c)return!1;if((!p.operator||p.operator===a)&&s(e,p.semver))return!1;if(p.operator===c&&o(e,p.semver))return!1}return!0}re.prototype.parse=function(e){var t=this.loose?i[O]:i[V],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new H(n[2],this.loose):this.semver=ie},re.prototype.toString=function(){return this.value},re.prototype.test=function(e){return n("Comparator.test",e,this.loose),this.semver===ie||("string"==typeof e&&(e=new H(e,this.loose)),ne(e,this.operator,this.semver,this.loose))},re.prototype.intersects=function(e,t){if(!(e instanceof re))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new se(e.value,t),le(this.value,n,t);if(""===e.operator)return n=new se(this.value,t),le(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=ne(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=ne(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||i||s&&o||a||c},t.Range=se,se.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},se.prototype.toString=function(){return this.range},se.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),n("range",e,t);var r=t?i[U]:i[K];e=e.replace(r,ae),n("hyphen replace",e),e=e.replace(i[q],"$1$2$3"),n("comparator trim",e,i[q]),e=(e=(e=e.replace(i[R],"$1~")).replace(i[L],"$1^")).split(/\s+/).join(" ");var s=t?i[O]:i[V],o=e.split(" ").map((function(e){return function(e,t){return n("comp",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){n("caret",e,t);var r=t?i[j]:i[N];return e.replace(r,(function(t,r,i,s,o){var a;return n("caret",e,t,r,i,s,o),oe(r)?a="":oe(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":oe(s)?a="0"===r?">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":">="+r+"."+i+".0 <"+(+r+1)+".0.0":o?(n("replaceCaret pr",o),"-"!==o.charAt(0)&&(o="-"+o),a="0"===r?"0"===i?">="+r+"."+i+"."+s+o+" <"+r+"."+i+"."+(+s+1):">="+r+"."+i+"."+s+o+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+s+o+" <"+(+r+1)+".0.0"):(n("no pr"),a="0"===r?"0"===i?">="+r+"."+i+"."+s+" <"+r+"."+i+"."+(+s+1):">="+r+"."+i+"."+s+" <"+r+"."+(+i+1)+".0":">="+r+"."+i+"."+s+" <"+(+r+1)+".0.0"),n("caret return",a),a}))}(e,t)})).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var r=t?i[M]:i[D];return e.replace(r,(function(t,r,i,s,o){var a;return n("tilde",e,t,r,i,s,o),oe(r)?a="":oe(i)?a=">="+r+".0.0 <"+(+r+1)+".0.0":oe(s)?a=">="+r+"."+i+".0 <"+r+"."+(+i+1)+".0":o?(n("replaceTilde pr",o),"-"!==o.charAt(0)&&(o="-"+o),a=">="+r+"."+i+"."+s+o+" <"+r+"."+(+i+1)+".0"):a=">="+r+"."+i+"."+s+" <"+r+"."+(+i+1)+".0",n("tilde return",a),a}))}(e,t)})).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var r=t?i[P]:i[_];return e.replace(r,(function(t,r,i,s,o,a){n("xRange",e,t,r,i,s,o,a);var c=oe(i),l=c||oe(s),u=l||oe(o);return"="===r&&u&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&u?(l&&(s=0),u&&(o=0),">"===r?(r=">=",l?(i=+i+1,s=0,o=0):u&&(s=+s+1,o=0)):"<="===r&&(r="<",l?i=+i+1:s=+s+1),t=r+i+"."+s+"."+o):l?t=">="+i+".0.0 <"+(+i+1)+".0.0":u&&(t=">="+i+"."+s+".0 <"+i+"."+(+s+1)+".0"),n("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(i[B],"")}(e,t),n("stars",e),e}(e,t)})).join(" ").split(/\s+/);return this.loose&&(o=o.filter((function(e){return!!e.match(s)}))),o.map((function(e){return new re(e,t)}))},se.prototype.intersects=function(e,t){if(!(e instanceof se))throw new TypeError("a Range is required");return this.set.some((function(n){return n.every((function(n){return e.set.some((function(e){return e.every((function(e){return n.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new se(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},se.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new H(e,this.loose));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,n){var r=null,i=null;try{var s=new se(t,n)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(r&&-1!==i.compare(e)||(i=new H(r=e,n)))})),r},t.minSatisfying=function(e,t,n){var r=null,i=null;try{var s=new se(t,n)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(r&&1!==i.compare(e)||(i=new H(r=e,n)))})),r},t.validRange=function(e,t){try{return new se(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return ue(e,t,"<",n)},t.gtr=function(e,t,n){return ue(e,t,">",n)},t.outside=ue,t.prerelease=function(e,t){var n=W(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new se(e,n),t=new se(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof H)return e;if("string"!=typeof e)return null;var t=e.match(i[E]);return null==t?null:W((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}},189:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=void 0;var i=n(1926),s=n(800),o=n(800);function a(e){return function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if("number"==typeof e)throw new Error("Browser implementation does currently not support externalized strings.");return s.localize.apply(void 0,r([e,t],n))}}function c(e){return s.setPseudo("pseudo"===(null==e?void 0:e.locale.toLowerCase())),a}Object.defineProperty(t,"MessageFormat",{enumerable:!0,get:function(){return o.MessageFormat}}),Object.defineProperty(t,"BundleFormat",{enumerable:!0,get:function(){return o.BundleFormat}}),t.loadMessageBundle=a,t.config=c,i.default.install(Object.freeze({loadMessageBundle:a,config:c}))},800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.localize=t.format=t.setPseudo=t.isPseudo=t.isDefined=t.BundleFormat=t.MessageFormat=void 0;var r,i,s,o=n(1926);function a(e){return void 0!==e}function c(e,n){return t.isPseudo&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===n.length?e:e.replace(/\{(\d+)\}/g,(function(e,t){var r=t[0],i=n[r],s=e;return"string"==typeof i?s=i:"number"!=typeof i&&"boolean"!=typeof i&&null!=i||(s=String(i)),s}))}(s=t.MessageFormat||(t.MessageFormat={})).file="file",s.bundle="bundle",s.both="both",(i=t.BundleFormat||(t.BundleFormat={})).standalone="standalone",i.languagePack="languagePack",function(e){e.is=function(e){var t=e;return t&&a(t.key)&&a(t.comment)}}(r||(r={})),t.isDefined=a,t.isPseudo=!1,t.setPseudo=function(e){t.isPseudo=e},t.format=c,t.localize=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return c(t,n)},t.loadMessageBundle=function(e){return o.default().loadMessageBundle(e)},t.config=function(e){return o.default().config(e)}},1926:(e,t)=>{"use strict";var n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},7373:(e,t,n)=>{"use strict";var r;n.r(t),n.d(t,{URI:()=>i,Utils:()=>s}),r=(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,s=-1,o=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(s===a-1||1===o);else if(s!==a-1&&2===o){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),s=a,o=0;continue}}else if(2===r.length||1===r.length){r="",i=0,s=a,o=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(s+1,a):r=e.slice(s+1,a),i=a-s-1;s=a,o=0}else 46===n&&-1!==o?++o:o=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var o;s>=0?o=arguments[s]:(void 0===e&&(e=process.cwd()),o=e),t(o),0!==o.length&&(r=o+"/"+r,i=47===o.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var s=e.length,o=s-i,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=o<c?o:c,u=-1,d=0;d<=l;++d){if(d===l){if(c>l){if(47===n.charCodeAt(a+d))return n.slice(a+d+1);if(0===d)return n.slice(a+d)}else o>l&&(47===e.charCodeAt(i+d)?u=d:0===d&&(u=0));break}var p=e.charCodeAt(i+d);if(p!==n.charCodeAt(a+d))break;47===p&&(u=d)}var g="";for(d=i+u+1;d<=s;++d)d!==s&&47!==e.charCodeAt(d)||(0===g.length?g+="..":g+="/..");return g.length>0?g+n.slice(a+u):(a+=u,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,s=!0,o=e.length-1;o>=1;--o)if(47===(n=e.charCodeAt(o))){if(!s){i=o;break}}else s=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,s=-1,o=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47===l){if(!o){i=r+1;break}}else-1===c&&(o=!1,c=r+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(s=r):(a=-1,s=c))}return i===s?s=c:-1===s&&(s=e.length),e.slice(i,s)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!o){i=r+1;break}}else-1===s&&(o=!1,s=r+1);return-1===s?"":e.slice(i,s)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===i&&(s=!1,i=a+1),46===c?-1===n?n=a:1!==o&&(o=1):-1!==n&&(o=-1);else if(!s){r=a+1;break}}return-1===n||-1===i||0===o||1===o&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),s=47===i;s?(n.root="/",r=1):r=0;for(var o=-1,a=0,c=-1,l=!0,u=e.length-1,d=0;u>=r;--u)if(47!==(i=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===i?-1===o?o=u:1!==d&&(d=1):-1!==o&&(d=-1);else if(!l){a=u+1;break}return-1===o||-1===c||0===d||1===d&&o===c-1&&o===a+1?-1!==c&&(n.base=n.name=0===a&&s?e.slice(1,c):e.slice(a,c)):(0===a&&s?(n.name=e.slice(1,o),n.base=e.slice(1,c)):(n.name=e.slice(a,o),n.base=e.slice(a,c)),n.ext=e.slice(o,c)),a>0?n.dir=e.slice(0,a-1):s&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},447:(e,t,n)=>{var r;if(n.r(t),n.d(t,{URI:()=>f,Utils:()=>k}),"object"==typeof process)r="win32"===process.platform;else if("object"==typeof navigator){var i=navigator.userAgent;r=i.indexOf("Windows")>=0}var s,o,a=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=/^\w[\w\d+.-]*$/,l=/^\//,u=/^\/\//;function d(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(e.authority,'", path: "').concat(e.path,'", query: "').concat(e.query,'", fragment: "').concat(e.fragment,'"}'));if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!l.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}var p="",g="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,f=function(){function e(e,t,n,r,i,s){void 0===s&&(s=!1),"object"==typeof e?(this.scheme=e.scheme||p,this.authority=e.authority||p,this.path=e.path||p,this.query=e.query||p,this.fragment=e.fragment||p):(this.scheme=function(e,t){return e||t?e:"file"}(e,s),this.authority=t||p,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==g&&(t=g+t):t=g}return t}(this.scheme,n||p),this.query=r||p,this.fragment=i||p,d(this,s))}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"string"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString},Object.defineProperty(e.prototype,"fsPath",{get:function(){return w(this,!1)},enumerable:!1,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,r=e.path,i=e.query,s=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=p),void 0===n?n=this.authority:null===n&&(n=p),void 0===r?r=this.path:null===r&&(r=p),void 0===i?i=this.query:null===i&&(i=p),void 0===s?s=this.fragment:null===s&&(s=p),t===this.scheme&&n===this.authority&&r===this.path&&i===this.query&&s===this.fragment?this:new v(t,n,r,i,s)},e.parse=function(e,t){void 0===t&&(t=!1);var n=h.exec(e);return n?new v(n[2]||p,I(n[4]||p),I(n[5]||p),I(n[7]||p),I(n[9]||p),t):new v(p,p,p,p,p)},e.file=function(e){var t=p;if(r&&(e=e.replace(/\\/g,g)),e[0]===g&&e[1]===g){var n=e.indexOf(g,2);-1===n?(t=e.substring(2),e=g):(t=e.substring(2,n),e=e.substring(n)||g)}return new v("file",t,e,p,p)},e.from=function(e){var t=new v(e.scheme,e.authority,e.path,e.query,e.fragment);return d(t,!0),t},e.prototype.toString=function(e){return void 0===e&&(e=!1),b(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new v(t);return n._formatted=t.external,n._fsPath=t._sep===m?t.fsPath:null,n}return t},e}(),m=r?1:void 0,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return a(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=w(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?b(this,!0):(this._formatted||(this._formatted=b(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=m),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(f),y=((o={})[58]="%3A",o[47]="%2F",o[63]="%3F",o[35]="%23",o[91]="%5B",o[93]="%5D",o[64]="%40",o[33]="%21",o[36]="%24",o[38]="%26",o[39]="%27",o[40]="%28",o[41]="%29",o[42]="%2A",o[43]="%2B",o[44]="%2C",o[59]="%3B",o[61]="%3D",o[32]="%20",o);function C(e,t){for(var n=void 0,r=-1,i=0;i<e.length;i++){var s=e.charCodeAt(i);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||45===s||46===s||95===s||126===s||t&&47===s)-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),void 0!==n&&(n+=e.charAt(i));else{void 0===n&&(n=e.substr(0,i));var o=y[s];void 0!==o?(-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n+=o):-1===r&&(r=i)}}return-1!==r&&(n+=encodeURIComponent(e.substring(r))),void 0!==n?n:e}function S(e){for(var t=void 0,n=0;n<e.length;n++){var r=e.charCodeAt(n);35===r||63===r?(void 0===t&&(t=e.substr(0,n)),t+=y[r]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function w(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//".concat(e.authority).concat(e.path):47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,r&&(n=n.replace(/\//g,"\\")),n}function b(e,t){var n=t?S:C,r="",i=e.scheme,s=e.authority,o=e.path,a=e.query,c=e.fragment;if(i&&(r+=i,r+=":"),(s||"file"===i)&&(r+=g,r+=g),s){var l=s.indexOf("@");if(-1!==l){var u=s.substr(0,l);s=s.substr(l+1),-1===(l=u.indexOf(":"))?r+=n(u,!1):(r+=n(u.substr(0,l),!1),r+=":",r+=n(u.substr(l+1),!1)),r+="@"}-1===(l=(s=s.toLowerCase()).indexOf(":"))?r+=n(s,!1):(r+=n(s.substr(0,l),!1),r+=s.substr(l))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2))(d=o.charCodeAt(1))>=65&&d<=90&&(o="/".concat(String.fromCharCode(d+32),":").concat(o.substr(3)));else if(o.length>=2&&58===o.charCodeAt(1)){var d;(d=o.charCodeAt(0))>=65&&d<=90&&(o="".concat(String.fromCharCode(d+32),":").concat(o.substr(2)))}r+=n(o,!0)}return a&&(r+="?",r+=n(a,!1)),c&&(r+="#",r+=t?c:C(c,!1)),r}function x(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+x(e.substr(3)):e}}var T=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function I(e){return e.match(T)?e.replace(T,(function(e){return x(e)})):e}var k,_=n(470),P=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},E=_.posix||_;!function(e){e.joinPath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.with({path:E.join.apply(E,P([e.path],t,!1))})},e.resolvePath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.path||"/";return e.with({path:E.resolve.apply(E,P([r],t,!1))})},e.dirname=function(e){var t=E.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)?e:e.with({path:t})},e.basename=function(e){return E.basename(e.path)},e.extname=function(e){return E.extname(e.path)}}(k||(k={}))}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(447)})();const{URI:i,Utils:s}=r},1023:e=>{"use strict";function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,s=-1,o=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(s===a-1||1===o);else if(s!==a-1&&2===o){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),s=a,o=0;continue}}else if(2===r.length||1===r.length){r="",i=0,s=a,o=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(s+1,a):r=e.slice(s+1,a),i=a-s-1;s=a,o=0}else 46===n&&-1!==o?++o:o=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var o;s>=0?o=arguments[s]:(void 0===e&&(e=process.cwd()),o=e),t(o),0!==o.length&&(r=o+"/"+r,i=47===o.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var s=e.length,o=s-i,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=o<c?o:c,u=-1,d=0;d<=l;++d){if(d===l){if(c>l){if(47===n.charCodeAt(a+d))return n.slice(a+d+1);if(0===d)return n.slice(a+d)}else o>l&&(47===e.charCodeAt(i+d)?u=d:0===d&&(u=0));break}var p=e.charCodeAt(i+d);if(p!==n.charCodeAt(a+d))break;47===p&&(u=d)}var g="";for(d=i+u+1;d<=s;++d)d!==s&&47!==e.charCodeAt(d)||(0===g.length?g+="..":g+="/..");return g.length>0?g+n.slice(a+u):(a+=u,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,s=!0,o=e.length-1;o>=1;--o)if(47===(n=e.charCodeAt(o))){if(!s){i=o;break}}else s=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,s=-1,o=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47===l){if(!o){i=r+1;break}}else-1===c&&(o=!1,c=r+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(s=r):(a=-1,s=c))}return i===s?s=c:-1===s&&(s=e.length),e.slice(i,s)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!o){i=r+1;break}}else-1===s&&(o=!1,s=r+1);return-1===s?"":e.slice(i,s)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===i&&(s=!1,i=a+1),46===c?-1===n?n=a:1!==o&&(o=1):-1!==n&&(o=-1);else if(!s){r=a+1;break}}return-1===n||-1===i||0===o||1===o&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),s=47===i;s?(n.root="/",r=1):r=0;for(var o=-1,a=0,c=-1,l=!0,u=e.length-1,d=0;u>=r;--u)if(47!==(i=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===i?-1===o?o=u:1!==d&&(d=1):-1!==o&&(d=-1);else if(!l){a=u+1;break}return-1===o||-1===c||0===d||1===d&&o===c-1&&o===a+1?-1!==c&&(n.base=n.name=0===a&&s?e.slice(1,c):e.slice(a,c)):(0===a&&s?(n.name=e.slice(1,o),n.base=e.slice(1,c)):(n.name=e.slice(a,o),n.base=e.slice(a,c)),n.ext=e.slice(o,c)),a>0?n.dir=e.slice(0,a-1):s&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},1097:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionApi=void 0;class n{constructor(e,t){this.onCompletionAccepted=e,this._pluginManager=t}configurePlugin(e,t){this._pluginManager.setConfiguration(e,t)}}t.getExtensionApi=function(e,t){return{getAPI(r){if(0===r)return new n(e,t)}}}},6460:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandManager=void 0;const r=n(7549);t.CommandManager=class{constructor(){this.commands=new Map}dispose(){for(const e of this.commands.values())e.dispose();this.commands.clear()}register(e){return this.commands.has(e.id)||this.commands.set(e.id,r.commands.registerCommand(e.id,e.execute,e)),e}}},9742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurePluginCommand=void 0,t.ConfigurePluginCommand=class{constructor(e){this.pluginManager=e,this.id="_typescript.configurePlugin"}execute(e,t){this.pluginManager.setConfiguration(e,t)}}},2629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JavaScriptGoToProjectConfigCommand=t.TypeScriptGoToProjectConfigCommand=void 0;const r=n(1807);t.TypeScriptGoToProjectConfigCommand=class{constructor(e,t){this.activeJsTsEditorTracker=e,this.lazyClientHost=t,this.id="typescript.goToProjectConfig"}execute(){const e=this.activeJsTsEditorTracker.activeJsTsEditor;e&&(0,r.openProjectConfigForFile)(0,this.lazyClientHost.value.serviceClient,e.document.uri)}},t.JavaScriptGoToProjectConfigCommand=class{constructor(e,t){this.activeJsTsEditorTracker=e,this.lazyClientHost=t,this.id="javascript.goToProjectConfig"}execute(){const e=this.activeJsTsEditorTracker.activeJsTsEditor;e&&(0,r.openProjectConfigForFile)(1,this.lazyClientHost.value.serviceClient,e.document.uri)}}},4201:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBaseCommands=void 0;const r=n(9742),i=n(2629),s=n(392),o=n(6001),a=n(2611),c=n(1552),l=n(3276),u=n(6875);t.registerBaseCommands=function(e,t,n,d){e.register(new a.ReloadTypeScriptProjectsCommand(t)),e.register(new a.ReloadJavaScriptProjectsCommand(t)),e.register(new l.SelectTypeScriptVersionCommand(t)),e.register(new o.OpenTsServerLogCommand(t)),e.register(new c.RestartTsServerCommand(t)),e.register(new i.TypeScriptGoToProjectConfigCommand(d,t)),e.register(new i.JavaScriptGoToProjectConfigCommand(d,t)),e.register(new r.ConfigurePluginCommand(n)),e.register(new s.LearnMoreAboutRefactoringsCommand),e.register(new u.TSServerRequestCommand(t))}},392:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnMoreAboutRefactoringsCommand=void 0;const r=n(7549),i=n(3683);class s{constructor(){this.id=s.id}execute(){const e=r.window.activeTextEditor&&(0,i.isTypeScriptDocument)(r.window.activeTextEditor.document)?"https://go.microsoft.com/fwlink/?linkid=2114477":"https://go.microsoft.com/fwlink/?linkid=2116761";r.env.openExternal(r.Uri.parse(e))}}t.LearnMoreAboutRefactoringsCommand=s,s.id="_typescript.learnMoreAboutRefactorings"},6001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenTsServerLogCommand=void 0,t.OpenTsServerLogCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.openTsServerLog"}execute(){this.lazyClientHost.value.serviceClient.openTsServerLogFile()}}},2611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReloadJavaScriptProjectsCommand=t.ReloadTypeScriptProjectsCommand=void 0,t.ReloadTypeScriptProjectsCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.reloadProjects"}execute(){this.lazyClientHost.value.reloadProjects()}},t.ReloadJavaScriptProjectsCommand=class{constructor(e){this.lazyClientHost=e,this.id="javascript.reloadProjects"}execute(){this.lazyClientHost.value.reloadProjects()}}},1552:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestartTsServerCommand=void 0,t.RestartTsServerCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.restartTsServer"}execute(){this.lazyClientHost.value.serviceClient.restartTsServer(!0)}}},3276:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectTypeScriptVersionCommand=void 0;class n{constructor(e){this.lazyClientHost=e,this.id=n.id}execute(){this.lazyClientHost.value.serviceClient.showVersionPicker()}}t.SelectTypeScriptVersionCommand=n,n.id="typescript.selectTypeScriptVersion"},6875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSServerRequestCommand=void 0;const r=n(3219);t.TSServerRequestCommand=class{constructor(e){this.lazyClientHost=e,this.id="typescript.tsserverRequest"}execute(e,t,n){const i=r.nulToken;if(["emit-output","semanticDiagnosticsSync","syntacticDiagnosticsSync","suggestionDiagnosticsSync","quickinfo","quickinfo-full","completionInfo"].includes(e))return this.lazyClientHost.value.serviceClient.execute(e,t,i,n)}}},1072:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(1023),i=n(7549),s=n(4156),o=n(5162),a=n(9638),c=n(2298),l=n(308),u=n(231);class d{constructor(e){this.client=e}async prepareCallHierarchy(e,t,n){const r=this.client.toOpenedFilePath(e);if(!r)return;const i=u.Position.toFileLocationRequestArgs(r,t),s=await this.client.execute("prepareCallHierarchy",i,n);return"response"===s.type&&s.body?Array.isArray(s.body)?s.body.map(p):p(s.body):void 0}async provideCallHierarchyIncomingCalls(e,t){const n=this.client.toPath(e.uri);if(!n)return;const r=u.Position.toFileLocationRequestArgs(n,e.selectionRange.start),i=await this.client.execute("provideCallHierarchyIncomingCalls",r,t);return"response"===i.type&&i.body?i.body.map(g):void 0}async provideCallHierarchyOutgoingCalls(e,t){const n=this.client.toPath(e.uri);if(!n)return;const r=u.Position.toFileLocationRequestArgs(n,e.selectionRange.start),i=await this.client.execute("provideCallHierarchyOutgoingCalls",r,t);return"response"===i.type&&i.body?i.body.map(h):void 0}}function p(e){const t=function(e){return e.kind===s.Kind.script||e.kind===s.Kind.module&&1===e.selectionSpan.start.line&&1===e.selectionSpan.start.offset}(e),n=t?r.basename(e.file):e.name,o=t?i.workspace.asRelativePath(r.dirname(e.file)):e.containerName??"",a=new i.CallHierarchyItem(u.SymbolKind.fromProtocolScriptElementKind(e.kind),n,o,i.Uri.file(e.file),u.Range.fromTextSpan(e.span),u.Range.fromTextSpan(e.selectionSpan));return(e.kindModifiers?(0,l.parseKindModifier)(e.kindModifiers):void 0)?.has(s.KindModifiers.deprecated)&&(a.tags=[i.SymbolTag.Deprecated]),a}function g(e){return new i.CallHierarchyIncomingCall(p(e.from),e.fromSpans.map(u.Range.fromTextSpan))}function h(e){return new i.CallHierarchyOutgoingCall(p(e.to),e.fromSpans.map(u.Range.fromTextSpan))}d.minVersion=a.default.v380,t.register=function(e,t){return(0,c.conditionalRegistration)([(0,c.requireMinVersion)(t,d.minVersion),(0,c.requireSomeCapability)(t,o.ClientCapability.Semantic)],(()=>i.languages.registerCallHierarchyProvider(e.semantic,new d(t))))}},2685:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSymbolRange=t.TypeScriptBaseCodeLensProvider=t.ReferencesCodeLens=void 0;const r=n(7549),i=n(189),s=n(8568),o=n(231),a=i.loadMessageBundle();class c extends r.CodeLens{constructor(e,t,n){super(n),this.document=e,this.file=t}}t.ReferencesCodeLens=c;class l{constructor(e,t){this.client=e,this.cachedResponse=t}async provideCodeLenses(e,t){const n=this.client.toOpenedFilePath(e);if(!n)return[];const r=await this.cachedResponse.execute(e,(()=>this.client.execute("navtree",{file:n},t)));if("response"!==r.type)return[];const i=[];return r.body?.childItems?.forEach((t=>this.walkNavTree(e,t,void 0,i))),i.map((t=>new c(e.uri,n,t)))}walkNavTree(e,t,n,r){const i=this.extractSymbol(e,t,n);i&&r.push(i),t.childItems?.forEach((n=>this.walkNavTree(e,n,t,r)))}}t.TypeScriptBaseCodeLensProvider=l,l.cancelledCommand={title:"",command:""},l.errorCommand={title:a("referenceErrorLabel","Could not determine references"),command:""},t.getSymbolRange=function(e,t){if(t.nameSpan)return o.Range.fromTextSpan(t.nameSpan);const n=t.spans&&t.spans[0];if(!n)return;const i=o.Range.fromTextSpan(n),a=e.getText(i),c=new RegExp(`^(.*?(\\b|\\W))${(0,s.escapeRegExp)(t.text||"")}(\\b|\\W)`,"gm").exec(a),l=c?c.index+c[1].length:0,u=e.offsetAt(new r.Position(i.start.line,i.start.character))+l;return new r.Range(e.positionAt(u),e.positionAt(u+t.text.length))}},5744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(189),s=n(4156),o=n(5162),a=n(2298),c=n(231),l=n(2685),u=i.loadMessageBundle();class d extends l.TypeScriptBaseCodeLensProvider{async resolveCodeLens(e,t){const n=c.Position.toFileLocationRequestArgs(e.file,e.range.start),i=await this.client.execute("implementation",n,t,{lowPriority:!0,cancelOnResourceChange:e.document});if("response"!==i.type||!i.body)return e.command="cancelled"===i.type?l.TypeScriptBaseCodeLensProvider.cancelledCommand:l.TypeScriptBaseCodeLensProvider.errorCommand,e;const s=i.body.map((e=>new r.Location(this.client.toResource(e.file),e.start.line===e.end.line?c.Range.fromTextSpan(e):new r.Range(c.Position.fromLocation(e.start),new r.Position(e.start.line,0))))).filter((t=>!(t.uri.toString()===e.document.toString()&&t.range.start.line===e.range.start.line&&t.range.start.character===e.range.start.character)));return e.command=this.getCommand(s,e),e}getCommand(e,t){return{title:this.getTitle(e),command:e.length?"editor.action.showReferences":"",arguments:[t.document,t.range.start,e]}}getTitle(e){return 1===e.length?u("oneImplementationLabel","1 implementation"):u("manyImplementationLabel","{0} implementations",e.length)}extractSymbol(e,t,n){switch(t.kind){case s.Kind.interface:return(0,l.getSymbolRange)(e,t);case s.Kind.class:case s.Kind.method:case s.Kind.memberVariable:case s.Kind.memberGetAccessor:case s.Kind.memberSetAccessor:if(t.kindModifiers.match(/\babstract\b/g))return(0,l.getSymbolRange)(e,t)}}}t.default=d,t.register=function(e,t,n,i){return(0,a.conditionalRegistration)([(0,a.requireGlobalConfiguration)(t.id,"implementationsCodeLens.enabled"),(0,a.requireSomeCapability)(n,o.ClientCapability.Semantic)],(()=>r.languages.registerCodeLensProvider(e.semantic,new d(n,i))))}},9182:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.TypeScriptReferencesCodeLensProvider=void 0;const r=n(7549),i=n(189),s=n(4156),o=n(7347),a=n(5162),c=n(2298),l=n(231),u=n(2685),d=i.loadMessageBundle();class p extends u.TypeScriptBaseCodeLensProvider{constructor(e,t,n){super(e,t),this._cachedResponse=t,this.language=n}async resolveCodeLens(e,t){const n=l.Position.toFileLocationRequestArgs(e.file,e.range.start),r=await this.client.execute("references",n,t,{lowPriority:!0,executionTarget:o.ExecutionTarget.Semantic,cancelOnResourceChange:e.document});if("response"!==r.type||!r.body)return e.command="cancelled"===r.type?u.TypeScriptBaseCodeLensProvider.cancelledCommand:u.TypeScriptBaseCodeLensProvider.errorCommand,e;const i=r.body.refs.filter((e=>!e.isDefinition)).map((e=>l.Location.fromTextSpan(this.client.toResource(e.file),e)));return e.command={title:this.getCodeLensLabel(i),command:i.length?"editor.action.showReferences":"",arguments:[e.document,e.range.start,i]},e}getCodeLensLabel(e){return 1===e.length?d("oneReferenceLabel","1 reference"):d("manyReferenceLabel","{0} references",e.length)}extractSymbol(e,t,n){if(n&&n.kind===s.Kind.enum)return(0,u.getSymbolRange)(e,t);switch(t.kind){case s.Kind.function:if(r.workspace.getConfiguration(this.language.id).get("referencesCodeLens.showOnAllFunctions"))return(0,u.getSymbolRange)(e,t);case s.Kind.const:case s.Kind.let:case s.Kind.variable:if(/\bexport\b/.test(t.kindModifiers))return(0,u.getSymbolRange)(e,t);break;case s.Kind.class:if("<class>"===t.text)break;return(0,u.getSymbolRange)(e,t);case s.Kind.interface:case s.Kind.type:case s.Kind.enum:return(0,u.getSymbolRange)(e,t);case s.Kind.method:case s.Kind.memberGetAccessor:case s.Kind.memberSetAccessor:case s.Kind.constructorImplementation:case s.Kind.memberVariable:if(n&&l.Position.fromLocation(n.spans[0].start).isEqual(l.Position.fromLocation(t.spans[0].start)))return;switch(n?.kind){case s.Kind.class:case s.Kind.interface:case s.Kind.type:return(0,u.getSymbolRange)(e,t)}}}}t.TypeScriptReferencesCodeLensProvider=p,t.register=function(e,t,n,i){return(0,c.conditionalRegistration)([(0,c.requireGlobalConfiguration)(t.id,"referencesCodeLens.enabled"),(0,c.requireSomeCapability)(n,a.ClientCapability.Semantic)],(()=>r.languages.registerCodeLensProvider(e.semantic,new p(n,i,t))))}},2916:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(189),s=n(4156),o=n(5162),a=n(9638),c=n(3219),l=n(4654),u=n(2298),d=n(308),p=n(3539),g=n(7201),h=n(231),f=i.loadMessageBundle();class m extends r.CompletionItem{constructor(e,t,n,i,o,a){if(super(n.name,m.convertKind(n.kind)),this.position=e,this.document=t,this.tsEntry=n,this.completionContext=i,this.metadata=o,n.source&&n.hasAction){this.sortText="￿"+n.sortText;const e=r.workspace.asRelativePath(n.source);e!==n.source&&(this.label={label:n.name,description:e})}else this.sortText=n.sortText;const{sourceDisplay:c,isSnippet:l}=n;if(c&&(this.label={label:n.name,description:p.plainWithLinks(c,a)}),n.labelDetails&&(this.label={label:n.name,...n.labelDetails}),this.preselect=n.isRecommended,this.position=e,this.useCodeSnippet=i.useCodeSnippetsOnMethodSuggest&&(this.kind===r.CompletionItemKind.Function||this.kind===r.CompletionItemKind.Method),this.range=this.getRangeFromReplacementSpan(n,i),this.commitCharacters=m.getCommitCharacters(i,n),this.insertText=l&&n.insertText?new r.SnippetString(n.insertText):n.insertText,this.filterText=this.getFilterText(i.line,n.insertText),i.isMemberCompletion&&i.dotAccessorContext&&!(this.insertText instanceof r.SnippetString)&&(this.filterText=i.dotAccessorContext.text+(this.insertText||this.label),!this.range)){const e=this.getFuzzyWordRange();this.range=e?{inserting:i.dotAccessorContext.range,replacing:i.dotAccessorContext.range.union(e)}:i.dotAccessorContext.range,this.insertText=this.filterText}if(n.kindModifiers){const e=(0,d.parseKindModifier)(n.kindModifiers);e.has(s.KindModifiers.optional)&&(this.insertText||(this.insertText=this.textLabel),this.filterText||(this.filterText=this.textLabel),"string"==typeof this.label?this.label+="?":this.label.label+="?"),e.has(s.KindModifiers.deprecated)&&(this.tags=[r.CompletionItemTag.Deprecated]),e.has(s.KindModifiers.color)&&(this.kind=r.CompletionItemKind.Color),this.detail=function(e){if(!e.kindModifiers||e.kind!==s.Kind.script)return;const t=(0,d.parseKindModifier)(e.kindModifiers);for(const n of s.KindModifiers.fileExtensionKindModifiers)if(t.has(n))return e.name.toLowerCase().endsWith(n)?e.name:e.name+n}(n)}this.resolveRange()}get textLabel(){return"string"==typeof this.label?this.label:this.label.label}async resolveCompletionItem(e,t){if(t.onCancellationRequested((()=>{this._resolvedPromise&&--this._resolvedPromise.waiting<=0&&setTimeout((()=>{this._resolvedPromise&&this._resolvedPromise.waiting<=0&&this._resolvedPromise.requestToken.cancel()}),300)})),this._resolvedPromise)return++this._resolvedPromise.waiting,this._resolvedPromise.promise;const n=new r.CancellationTokenSource,i=(async()=>{const i=e.toOpenedFilePath(this.document);if(!i)return;const s={...h.Position.toFileLocationRequestArgs(i,this.position),entryNames:[this.tsEntry.source||this.tsEntry.data?{name:this.tsEntry.name,source:this.tsEntry.source,data:this.tsEntry.data}:this.tsEntry.name]},o=await e.interruptGetErr((()=>e.execute("completionEntryDetails",s,n.token)));if("response"!==o.type||!o.body||!o.body.length)return;const a=o.body[0],c=this.getDetails(e,a);c&&(this.detail=c),this.documentation=this.getDocumentation(e,a,this.document.uri);const l=this.getCodeActions(a,i),u=[{command:v.ID,title:"",arguments:[this]}];l.command&&u.push(l.command);const d=l.additionalTextEdits;if(this.useCodeSnippet&&await this.isValidFunctionCompletionContext(e,i,this.position,this.document,t)){const{snippet:e,parameterCount:t}=(0,g.snippetForFunctionCall)({...this,label:this.textLabel},a.displayParts);this.insertText=e,t>0&&r.workspace.getConfiguration("editor.parameterHints").get("enabled")&&u.push({title:"triggerParameterHints",command:"editor.action.triggerParameterHints"})}return{commands:u,edits:d}})();return this._resolvedPromise={promise:i,requestToken:n,waiting:1},this._resolvedPromise.promise}getDetails(e,t){const n=[];if(t.kind!==s.Kind.script){for(const e of t.codeActions??[])n.push(e.description);return n.push(p.plainWithLinks(t.displayParts,e)),n.join("\n\n")}}getDocumentation(e,t,n){const i=new r.MarkdownString;return p.addMarkdownDocumentation(i,t.documentation,t.tags,e),i.baseUri=n,i.value.length?i:void 0}async isValidFunctionCompletionContext(e,t,n,r,i){try{const r=h.Position.toFileLocationRequestArgs(t,n),s=await e.execute("quickinfo",r,i);if("response"===s.type&&s.body)switch(s.body.kind){case"var":case"let":case"const":case"alias":return!1}}catch{}return null===r.lineAt(n.line).text.slice(n.character).match(/^[a-z_$0-9]*\s*\(/gi)}getCodeActions(e,t){if(!e.codeActions||!e.codeActions.length)return{};const n=[];let r,i=!1;for(const r of e.codeActions)if(r.commands&&(i=!0),r.changes)for(const e of r.changes)e.fileName===t?n.push(...e.textChanges.map(h.TextEdit.fromCodeEdit)):i=!0;return i&&(r={title:"",command:C.ID,arguments:[t,e.codeActions.map((e=>({commands:e.commands,description:e.description,changes:e.changes.filter((e=>e.fileName!==t))})))]}),{command:r,additionalTextEdits:n.length?n:void 0}}getRangeFromReplacementSpan(e,t){if(!e.replacementSpan)return;let n=h.Range.fromTextSpan(e.replacementSpan);return n.isSingleLine||(n=new r.Range(n.start.line,n.start.character,n.start.line,t.line.length)),{inserting:n,replacing:n}}getFilterText(e,t){if(this.tsEntry.name.startsWith("#")){const n=this.completionContext.wordRange,r=n?e.charAt(n.start.character):void 0;return t?t.startsWith("this.#")?"#"===r?t:t.replace(/^this\.#/,""):t:"#"===r?void 0:this.tsEntry.name.replace(/^#/,"")}if(!t?.startsWith("this."))return t?.startsWith("[")?t.replace(/^\[['"](.+)[['"]\]$/,".$1"):t}resolveRange(){if(this.range)return;const e=this.getFuzzyWordRange();e&&(this.range={inserting:new r.Range(e.start,this.position),replacing:e})}getFuzzyWordRange(){if(this.completionContext.useFuzzyWordRangeLogic){const e=this.completionContext.line.slice(Math.max(0,this.position.character-this.textLabel.length),this.position.character).toLowerCase(),t=this.textLabel.toLowerCase();for(let n=t.length;n>=0;--n)if(e.endsWith(t.substr(0,n))&&(!this.completionContext.wordRange||this.completionContext.wordRange.start.character>this.position.character-n))return new r.Range(new r.Position(this.position.line,Math.max(0,this.position.character-n)),this.position)}return this.completionContext.wordRange}static convertKind(e){switch(e){case s.Kind.primitiveType:case s.Kind.keyword:return r.CompletionItemKind.Keyword;case s.Kind.const:case s.Kind.let:case s.Kind.variable:case s.Kind.localVariable:case s.Kind.alias:case s.Kind.parameter:return r.CompletionItemKind.Variable;case s.Kind.memberVariable:case s.Kind.memberGetAccessor:case s.Kind.memberSetAccessor:return r.CompletionItemKind.Field;case s.Kind.function:case s.Kind.localFunction:return r.CompletionItemKind.Function;case s.Kind.method:case s.Kind.constructSignature:case s.Kind.callSignature:case s.Kind.indexSignature:return r.CompletionItemKind.Method;case s.Kind.enum:return r.CompletionItemKind.Enum;case s.Kind.enumMember:return r.CompletionItemKind.EnumMember;case s.Kind.module:case s.Kind.externalModuleName:return r.CompletionItemKind.Module;case s.Kind.class:case s.Kind.type:return r.CompletionItemKind.Class;case s.Kind.interface:return r.CompletionItemKind.Interface;case s.Kind.warning:return r.CompletionItemKind.Text;case s.Kind.script:return r.CompletionItemKind.File;case s.Kind.directory:return r.CompletionItemKind.Folder;case s.Kind.string:return r.CompletionItemKind.Constant;default:return r.CompletionItemKind.Property}}static getCommitCharacters(e,t){if(t.kind===s.Kind.warning||t.kind===s.Kind.string)return;if(e.isNewIdentifierLocation||!e.isInValidCommitCharacterContext)return;const n=[".",",",";"];return e.enableCallCompletions&&n.push("("),n}}class v{constructor(e,t){this.onCompletionAccepted=e,this.telemetryReporter=t,this.id=v.ID}execute(e){this.onCompletionAccepted(e),e instanceof m&&this.telemetryReporter.logTelemetry("completions.accept",{isPackageJsonImport:e.tsEntry.isPackageJsonImport?"true":void 0,isImportStatementCompletion:e.tsEntry.isImportStatementCompletion?"true":void 0})}}v.ID="_typescript.onCompletionAccepted";class y{constructor(e){this.client=e,this.id=y.ID}async execute(e){const t=await e.resolveCompletionItem(this.client,c.nulToken);if(!t)return;const{edits:n,commands:i}=t;if(n){const t=new r.WorkspaceEdit;for(const r of n)t.replace(e.document.uri,r.range,r.newText);await r.workspace.applyEdit(t)}for(const e of i)await r.commands.executeCommand(e.command,...e.arguments??[])}}y.ID="_typescript.applyCompletionCommand";class C{constructor(e){this.client=e,this.id=C.ID}async execute(e,t){if(0===t.length)return!0;if(1===t.length)return(0,l.applyCodeAction)(this.client,t[0],c.nulToken);const n=await r.window.showQuickPick(t.map((e=>({label:e.description,description:"",action:e}))),{placeHolder:f("selectCodeAction","Select code action to apply")});return!!n&&(0,l.applyCodeAction)(this.client,n.action,c.nulToken)}}var S;C.ID="_typescript.applyCompletionCodeAction",function(e){e.useCodeSnippetsOnMethodSuggest="suggest.completeFunctionCalls",e.nameSuggestions="suggest.names",e.pathSuggestions="suggest.paths",e.autoImportSuggestions="suggest.autoImports",e.importStatementSuggestions="suggest.importStatements",e.getConfigurationForResource=function(t,n){const i=r.workspace.getConfiguration(t,n);return{useCodeSnippetsOnMethodSuggest:i.get(e.useCodeSnippetsOnMethodSuggest,!1),pathSuggestions:i.get(e.pathSuggestions,!0),autoImportSuggestions:i.get(e.autoImportSuggestions,!0),nameSuggestions:i.get(e.nameSuggestions,!0),importStatementSuggestions:i.get(e.importStatementSuggestions,!0)}}}(S||(S={}));class w{constructor(e,t,n,r,i,s,o){this.client=e,this.language=t,this.typingsStatus=n,this.fileConfigurationManager=r,this.telemetryReporter=s,i.register(new C(this.client)),i.register(new v(o,this.telemetryReporter)),i.register(new y(this.client))}async provideCompletionItems(e,t,n,i){if(!r.workspace.getConfiguration(this.language.id,e).get("suggest.enabled"))return;if(this.typingsStatus.isAcquiringTypings)return Promise.reject({label:f({key:"acquiringTypingsLabel",comment:["Typings refers to the *.d.ts typings files that power our IntelliSense. It should not be localized"]},"Acquiring typings..."),detail:f({key:"acquiringTypingsDetail",comment:["Typings refers to the *.d.ts typings files that power our IntelliSense. It should not be localized"]},"Acquiring typings definitions for IntelliSense.")});const s=this.client.toOpenedFilePath(e);if(!s)return;const o=e.lineAt(t.line),c=S.getConfigurationForResource(this.language.id,e.uri);if(!this.shouldTrigger(i,o,t,c))return;let l=e.getWordRangeAtPosition(t);if(l&&!l.isEmpty){const t=l.start.translate(0,1);"@"===e.getText(new r.Range(l.start,t))&&(l=l.with(t))}await this.client.interruptGetErr((()=>this.fileConfigurationManager.ensureConfigurationForDocument(e,n)));const u={...h.Position.toFileLocationRequestArgs(s,t),includeExternalModuleExports:c.autoImportSuggestions,includeInsertTextCompletions:!0,triggerCharacter:this.getTsTriggerCharacter(i),triggerKind:h.CompletionTriggerKind.toProtocolCompletionTriggerKind(i.triggerKind)};let d,p,g,v,C,w=!0,x=!1,T=!1;if(this.client.apiVersion.gte(a.default.v300)){const i=Date.now();try{v=await this.client.interruptGetErr((()=>this.client.execute("completionInfo",u,n)))}finally{C=Date.now()-i}if("response"!==v.type||!v.body)return void this.logCompletionsTelemetry(C,v);if(w=v.body.isNewIdentifierLocation,T=v.body.isMemberCompletion,T){const n=o.text.slice(0,t.character).match(/\??\.\s*$/)||void 0;if(n){const i=new r.Range(t.translate({characterDelta:-n[0].length}),t);d={range:i,text:e.getText(i)}}}x=!!v.body.isIncomplete||v.metadata&&v.metadata.isIncomplete,p=v.body.entries,g=v.metadata}else{const e=await this.client.interruptGetErr((()=>this.client.execute("completions",u,n)));if("response"!==e.type||!e.body)return;p=e.body,g=e.metadata}const I={isNewIdentifierLocation:w,isMemberCompletion:T,dotAccessorContext:d,isInValidCommitCharacterContext:this.isInValidCommitCharacterContext(e,t),enableCallCompletions:!c.useCodeSnippetsOnMethodSuggest,wordRange:l,line:o.text,useCodeSnippetsOnMethodSuggest:c.useCodeSnippetsOnMethodSuggest,useFuzzyWordRangeLogic:this.client.apiVersion.lt(a.default.v390)};let k=!1,_=!1;const P=[];for(const n of p)if(!b(n,c)){const r=new m(t,e,n,I,g,this.client);r.command={command:y.ID,title:"",arguments:[r]},P.push(r),k=k||!!n.isPackageJsonImport,_=_||!!n.isImportStatementCompletion}return void 0!==C&&this.logCompletionsTelemetry(C,v,k,_),new r.CompletionList(P,x)}logCompletionsTelemetry(e,t,n,r){this.telemetryReporter.logTelemetry("completions.execute",{duration:String(e),type:t?.type??"unknown",flags:"response"===t?.type&&"number"==typeof t.body?.flags?String(t.body.flags):void 0,count:String("response"===t?.type&&t.body?t.body.entries.length:0),updateGraphDurationMs:"response"===t?.type&&"number"==typeof t.performanceData?.updateGraphDurationMs?String(t.performanceData.updateGraphDurationMs):void 0,createAutoImportProviderProgramDurationMs:"response"===t?.type&&"number"==typeof t.performanceData?.createAutoImportProviderProgramDurationMs?String(t.performanceData.createAutoImportProviderProgramDurationMs):void 0,includesPackageJsonImport:n?"true":void 0,includesImportStatementCompletion:r?"true":void 0})}getTsTriggerCharacter(e){switch(e.triggerCharacter){case"@":return this.client.apiVersion.gte(a.default.v310)&&this.client.apiVersion.lt(a.default.v320)?void 0:"@";case"#":return this.client.apiVersion.lt(a.default.v381)?void 0:"#";case" ":{const e=" ";return this.client.apiVersion.gte(a.default.v430)?e:void 0}case".":case'"':case"'":case"`":case"/":case"<":return e.triggerCharacter}}async resolveCompletionItem(e,t){return await e.resolveCompletionItem(this.client,t),e}isInValidCommitCharacterContext(e,t){return!(this.client.apiVersion.lt(a.default.v320)&&t.character>1)||null===e.getText(new r.Range(t.line,0,t.line,t.character)).match(/(\s|^)\.$/gi)}shouldTrigger(e,t,n,r){if(e.triggerCharacter&&this.client.apiVersion.lt(a.default.v290)){if('"'===e.triggerCharacter||"'"===e.triggerCharacter){const e=t.text.slice(0,n.character);if(!/\b(from|import)\s*["']$/.test(e)&&!/\b(import|require)\(['"]$/.test(e))return!1}if("/"===e.triggerCharacter){const e=t.text.slice(0,n.character);if(!/\b(from|import)\s*["'][^'"]*$/.test(e)&&!/\b(import|require)\(['"][^'"]*$/.test(e))return!1}if("@"===e.triggerCharacter){const e=t.text.slice(0,n.character);if(!/^\s*\*[ ]?@/.test(e)&&!/\/\*\*+[ ]?@/.test(e))return!1}if("<"===e.triggerCharacter)return!1}return" "!==e.triggerCharacter||!(!r.importStatementSuggestions||this.client.apiVersion.lt(a.default.v430))&&"import"===t.text.slice(0,n.character)}}function b(e,t){return!t.nameSuggestions&&e.kind===s.Kind.warning||!t.pathSuggestions&&(e.kind===s.Kind.directory||e.kind===s.Kind.script||e.kind===s.Kind.externalModuleName)||!t.autoImportSuggestions&&e.hasAction}w.triggerCharacters=[".",'"',"'","`","/","@","<","#"," "],t.register=function(e,t,n,i,s,a,c,l){return(0,u.conditionalRegistration)([(0,u.requireSomeCapability)(n,o.ClientCapability.EnhancedSyntax,o.ClientCapability.Semantic)],(()=>r.languages.registerCompletionItemProvider(e.syntax,new w(n,t,i,s,a,c,l),...w.triggerCharacters)))}},8695:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(231);t.default=class{constructor(e){this.client=e}async getSymbolLocations(e,t,n,i){const s=this.client.toOpenedFilePath(t);if(!s)return;const o=r.Position.toFileLocationRequestArgs(s,n),a=await this.client.execute(e,o,i);return"response"===a.type&&a.body?a.body.map((e=>r.Location.fromTextSpan(this.client.toResource(e.file),e))):void 0}}},2308:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(5162),s=n(9638),o=n(2298),a=n(231),c=n(8695);class l extends c.default{constructor(e){super(e)}async provideDefinition(e,t,n){if(this.client.apiVersion.gte(s.default.v270)){const r=this.client.toOpenedFilePath(e);if(!r)return;const i=a.Position.toFileLocationRequestArgs(r,t),s=await this.client.execute("definitionAndBoundSpan",i,n);if("response"!==s.type||!s.body)return;const o=s.body.textSpan?a.Range.fromTextSpan(s.body.textSpan):void 0;return s.body.definitions.map((e=>{const t=a.Location.fromTextSpan(this.client.toResource(e.file),e);return e.contextStart&&e.contextEnd?{originSelectionRange:o,targetRange:a.Range.fromLocations(e.contextStart,e.contextEnd),targetUri:t.uri,targetSelectionRange:t.range}:{originSelectionRange:o,targetRange:t.range,targetUri:t.uri}}))}return this.getSymbolLocations("definition",e,t,n)}}t.default=l,t.register=function(e,t){return(0,o.conditionalRegistration)([(0,o.requireSomeCapability)(t,i.ClientCapability.EnhancedSyntax,i.ClientCapability.Semantic)],(()=>r.languages.registerDefinitionProvider(e.syntax,new l(t))))}},9283:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticsManager=void 0;const r=n(7549),i=n(6929),s=n(4009),o=n(7478);function a(e,t){return e===t||e.code===t.code&&e.message===t.message&&e.severity===t.severity&&e.source===t.source&&e.range.isEqual(t.range)&&i.equals(e.relatedInformation||i.empty,t.relatedInformation||i.empty,((e,t)=>e.message===t.message&&e.location.range.isEqual(t.location.range)&&e.location.uri.fsPath===t.location.uri.fsPath))&&i.equals(e.tags||i.empty,t.tags||i.empty)}class c{constructor(e,t){this.file=e,this.language=t,this._diagnostics=new Map}updateDiagnostics(e,t,n){e!==this.language&&(this._diagnostics.clear(),this.language=e);const r=this._diagnostics.get(t);return!i.equals(r||i.empty,n,a)&&(this._diagnostics.set(t,n),!0)}getDiagnostics(e){return e.getValidate(this.language)?[...this.get(0),...this.get(1),...this.getSuggestionDiagnostics(e)]:[]}getSuggestionDiagnostics(e){const t=e.getEnableSuggestions(this.language);return this.get(2).filter((e=>!!t||e.tags&&(e.tags.includes(r.DiagnosticTag.Unnecessary)||e.tags.includes(r.DiagnosticTag.Deprecated))))}get(e){return this._diagnostics.get(e)||[]}}class l{constructor(){this._languageSettings=new Map}getValidate(e){return this.get(e).validate}setValidate(e,t){return this.update(e,(e=>({validate:t,enableSuggestions:e.enableSuggestions})))}getEnableSuggestions(e){return this.get(e).enableSuggestions}setEnableSuggestions(e,t){return this.update(e,(e=>({validate:e.validate,enableSuggestions:t})))}get(e){return this._languageSettings.get(e)||l.defaultSettings}update(e,t){const n=this.get(e),r=t(n);return this._languageSettings.set(e,r),!function(e,t){return e.validate===t.validate&&e.enableSuggestions&&e.enableSuggestions}(n,r)}}l.defaultSettings={validate:!0,enableSuggestions:!0};class u extends s.Disposable{constructor(e,t){super(),this._settings=new l,this._updateDelay=50,this._diagnostics=new o.ResourceMap(void 0,{onCaseInsensitiveFileSystem:t}),this._pendingUpdates=new o.ResourceMap(void 0,{onCaseInsensitiveFileSystem:t}),this._currentDiagnostics=this._register(r.languages.createDiagnosticCollection(e))}dispose(){super.dispose();for(const e of this._pendingUpdates.values)clearTimeout(e);this._pendingUpdates.clear()}reInitialize(){this._currentDiagnostics.clear(),this._diagnostics.clear()}setValidate(e,t){this._settings.setValidate(e,t)&&this.rebuild()}setEnableSuggestions(e,t){this._settings.setEnableSuggestions(e,t)&&this.rebuild()}updateDiagnostics(e,t,n,r){let i=!1;const s=this._diagnostics.get(e);if(s)i=s.updateDiagnostics(t,n,r);else if(r.length){const s=new c(e,t);s.updateDiagnostics(t,n,r),this._diagnostics.set(e,s),i=!0}i&&this.scheduleDiagnosticsUpdate(e)}configFileDiagnosticsReceived(e,t){this._currentDiagnostics.set(e,t)}delete(e){this._currentDiagnostics.delete(e),this._diagnostics.delete(e)}getDiagnostics(e){return this._currentDiagnostics.get(e)||[]}scheduleDiagnosticsUpdate(e){this._pendingUpdates.has(e)||this._pendingUpdates.set(e,setTimeout((()=>this.updateCurrentDiagnostics(e)),this._updateDelay))}updateCurrentDiagnostics(e){this._pendingUpdates.has(e)&&(clearTimeout(this._pendingUpdates.get(e)),this._pendingUpdates.delete(e));const t=this._diagnostics.get(e);this._currentDiagnostics.set(e,t?t.getDiagnostics(this._settings):[])}rebuild(){this._currentDiagnostics.clear();for(const e of this._diagnostics.values)this._currentDiagnostics.set(e.file,e.getDiagnostics(this._settings))}}t.DiagnosticsManager=u},63:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(189),s=n(9638),o=i.loadMessageBundle(),a=[{value:"@ts-check",description:o("ts-check","Enables semantic checking in a JavaScript file. Must be at the top of a file.")},{value:"@ts-nocheck",description:o("ts-nocheck","Disables semantic checking in a JavaScript file. Must be at the top of a file.")},{value:"@ts-ignore",description:o("ts-ignore","Suppresses @ts-check errors on the next line of a file.")}],c=[...a,{value:"@ts-expect-error",description:o("ts-expect-error","Suppresses @ts-check errors on the next line of a file, expecting at least one to exist.")}];class l{constructor(e){this.client=e}provideCompletionItems(e,t,n){if(!this.client.toOpenedFilePath(e))return[];const i=e.lineAt(t.line).text.slice(0,t.character).match(/^\s*\/\/+\s?(@[a-zA-Z\-]*)?$/);return i?(this.client.apiVersion.gte(s.default.v390)?c:a).map((e=>{const n=new r.CompletionItem(e.value,r.CompletionItemKind.Snippet);return n.detail=e.description,n.range=new r.Range(t.line,Math.max(0,t.character-(i[1]?i[1].length:0)),t.line,t.character),n})):[]}}t.register=function(e,t){return r.languages.registerCompletionItemProvider(e.syntax,new l(t),"@")}},8531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(231);class s{constructor(e){this.client=e}async provideDocumentHighlights(e,t,n){const r=this.client.toOpenedFilePath(e);if(!r)return[];const s={...i.Position.toFileLocationRequestArgs(r,t),filesToSearch:[r]},a=await this.client.execute("documentHighlights",s,n);return"response"===a.type&&a.body?a.body.filter((e=>e.file===r)).map(o).flat():[]}}function o(e){return e.highlightSpans.map((e=>new r.DocumentHighlight(i.Range.fromTextSpan(e),"writtenReference"===e.kind?r.DocumentHighlightKind.Write:r.DocumentHighlightKind.Read)))}t.register=function(e,t){return r.languages.registerDocumentHighlightProvider(e.syntax,new s(t))}},3387:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(4156),s=n(308),o=n(231);class a{constructor(e,t){this.client=e,this.cachedResponse=t}async provideDocumentSymbols(e,t){const n=this.client.toOpenedFilePath(e);if(!n)return;const r={file:n},i=await this.cachedResponse.execute(e,(()=>this.client.execute("navtree",r,t)));if("response"!==i.type||!i.body?.childItems)return;const s=[];for(const t of i.body.childItems)a.convertNavTree(e.uri,s,t);return s}static convertNavTree(e,t,n){let r=a.shouldInclueEntry(n);if(!r&&!n.childItems?.length)return!1;const i=new Set(n.childItems||[]);for(const s of n.spans){const c=o.Range.fromTextSpan(s),l=a.convertSymbol(n,c);for(const t of i)if(t.spans.some((e=>!!c.intersection(o.Range.fromTextSpan(e))))){const n=a.convertNavTree(e,l.children,t);r=r||n,i.delete(t)}r&&t.push(l)}return r}static convertSymbol(e,t){const n=e.nameSpan?o.Range.fromTextSpan(e.nameSpan):t;let a=e.text;switch(e.kind){case i.Kind.memberGetAccessor:a=`(get) ${a}`;break;case i.Kind.memberSetAccessor:a=`(set) ${a}`}const c=new r.DocumentSymbol(a,"",(e=>{switch(e){case i.Kind.module:return r.SymbolKind.Module;case i.Kind.class:return r.SymbolKind.Class;case i.Kind.enum:return r.SymbolKind.Enum;case i.Kind.interface:return r.SymbolKind.Interface;case i.Kind.method:return r.SymbolKind.Method;case i.Kind.memberVariable:case i.Kind.memberGetAccessor:case i.Kind.memberSetAccessor:return r.SymbolKind.Property;case i.Kind.variable:case i.Kind.const:case i.Kind.localVariable:return r.SymbolKind.Variable;case i.Kind.function:case i.Kind.localFunction:return r.SymbolKind.Function;case i.Kind.constructSignature:case i.Kind.constructorImplementation:return r.SymbolKind.Constructor}return r.SymbolKind.Variable})(e.kind),t,t.contains(n)?n:t);return(0,s.parseKindModifier)(e.kindModifiers).has(i.KindModifiers.deprecated)&&(c.tags=[r.SymbolTag.Deprecated]),c}static shouldInclueEntry(e){return e.kind!==i.Kind.alias&&!(!e.text||"<function>"===e.text||"<class>"===e.text)}}t.register=function(e,t,n){return r.languages.registerDocumentSymbolProvider(e.syntax,new a(t,n),{label:"TypeScript"})}},7296:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInlayHintsPreferences=t.InlayHintSettingNames=void 0;const r=n(7549),i=n(9638),s=n(4009),o=n(6797),a=n(3683),c=n(1745),l=n(7478);class u extends s.Disposable{constructor(e,t){super(),this.client=e,this.formatOptions=new l.ResourceMap(void 0,{onCaseInsensitiveFileSystem:t}),r.workspace.onDidCloseTextDocument((e=>{this.formatOptions.delete(e.uri)}),void 0,this._disposables)}async ensureConfigurationForDocument(e,t){const n=this.getFormattingOptions(e);if(n)return this.ensureConfigurationOptions(e,n,t)}getFormattingOptions(e){const t=r.window.visibleTextEditors.find((t=>t.document.fileName===e.fileName));return t?{tabSize:t.options.tabSize,insertSpaces:t.options.insertSpaces}:void 0}async ensureConfigurationOptions(e,t,n){const r=this.client.toOpenedFilePath(e);if(!r)return;const i=this.getFileOptions(e,t),s=this.formatOptions.get(e.uri);if(s){const e=await s;if(e&&(o=e,a=i,(0,c.equals)(o,a)))return}var o,a;let l;this.formatOptions.set(e.uri,new Promise((e=>l=e)));const u={file:r,...i};try{const e=await this.client.execute("configure",u,n);l("response"===e.type?i:void 0)}finally{l(void 0)}}async setGlobalConfigurationFromDocument(e,t){const n=this.getFormattingOptions(e);if(!n)return;const r={file:void 0,...this.getFileOptions(e,n)};await this.client.execute("configure",r,t)}reset(){this.formatOptions.clear()}getFileOptions(e,t){return{formatOptions:this.getFormatOptions(e,t),preferences:this.getPreferences(e)}}getFormatOptions(e,t){const n=r.workspace.getConfiguration((0,a.isTypeScriptDocument)(e)?"typescript.format":"javascript.format",e.uri);return{tabSize:t.tabSize,indentSize:t.tabSize,convertTabsToSpaces:t.insertSpaces,newLineCharacter:"\n",insertSpaceAfterCommaDelimiter:n.get("insertSpaceAfterCommaDelimiter"),insertSpaceAfterConstructor:n.get("insertSpaceAfterConstructor"),insertSpaceAfterSemicolonInForStatements:n.get("insertSpaceAfterSemicolonInForStatements"),insertSpaceBeforeAndAfterBinaryOperators:n.get("insertSpaceBeforeAndAfterBinaryOperators"),insertSpaceAfterKeywordsInControlFlowStatements:n.get("insertSpaceAfterKeywordsInControlFlowStatements"),insertSpaceAfterFunctionKeywordForAnonymousFunctions:n.get("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),insertSpaceBeforeFunctionParenthesis:n.get("insertSpaceBeforeFunctionParenthesis"),insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:n.get("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:n.get("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces:n.get("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),insertSpaceAfterOpeningAndBeforeClosingEmptyBraces:n.get("insertSpaceAfterOpeningAndBeforeClosingEmptyBraces"),insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:n.get("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces:n.get("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),insertSpaceAfterTypeAssertion:n.get("insertSpaceAfterTypeAssertion"),placeOpenBraceOnNewLineForFunctions:n.get("placeOpenBraceOnNewLineForFunctions"),placeOpenBraceOnNewLineForControlBlocks:n.get("placeOpenBraceOnNewLineForControlBlocks"),semicolons:n.get("semicolons")}}getPreferences(e){if(this.client.apiVersion.lt(i.default.v290))return{};const t=r.workspace.getConfiguration((0,a.isTypeScriptDocument)(e)?"typescript":"javascript",e),n=r.workspace.getConfiguration((0,a.isTypeScriptDocument)(e)?"typescript.preferences":"javascript.preferences",e);return{quotePreference:this.getQuoteStylePreference(n),importModuleSpecifierPreference:h(n),importModuleSpecifierEnding:f(n),jsxAttributeCompletionStyle:m(n),allowTextChangesInNewFiles:e.uri.scheme===o.file,providePrefixAndSuffixTextForRename:!1!==n.get("renameShorthandProperties",!0)&&n.get("useAliasesForRenames",!0),allowRenameOfImportPath:!0,includeAutomaticOptionalChainCompletions:t.get("suggest.includeAutomaticOptionalChainCompletions",!0),provideRefactorNotApplicableReason:!0,generateReturnInDocTemplate:t.get("suggest.jsdoc.generateReturns",!0),includeCompletionsForImportStatements:t.get("suggest.includeCompletionsForImportStatements",!0),includeCompletionsWithSnippetText:t.get("suggest.includeCompletionsWithSnippetText",!0),includeCompletionsWithClassMemberSnippets:t.get("suggest.classMemberSnippets.enabled",!0),includeCompletionsWithObjectLiteralMethodSnippets:t.get("suggest.objectLiteralMethodSnippets.enabled",!0),useLabelDetailsInCompletionEntries:!0,allowIncompleteCompletions:!0,displayPartsForJSDoc:!0,...p(t)}}getQuoteStylePreference(e){switch(e.get("quoteStyle")){case"single":return"single";case"double":return"double";default:return this.client.apiVersion.gte(i.default.v333)?"auto":void 0}}}t.default=u;class d{}function p(e){return{includeInlayParameterNameHints:g(e),includeInlayParameterNameHintsWhenArgumentMatchesName:!e.get(d.parameterNamesSuppressWhenArgumentMatchesName,!0),includeInlayFunctionParameterTypeHints:e.get(d.parameterNamesEnabled,!1),includeInlayVariableTypeHints:e.get(d.variableTypesEnabled,!1),includeInlayPropertyDeclarationTypeHints:e.get(d.propertyDeclarationTypesEnabled,!1),includeInlayFunctionLikeReturnTypeHints:e.get(d.functionLikeReturnTypesEnabled,!1),includeInlayEnumMemberValueHints:e.get(d.enumMemberValuesEnabled,!1)}}function g(e){switch(e.get("inlayHints.parameterNames.enabled")){case"none":return"none";case"literals":return"literals";case"all":return"all";default:return}}function h(e){switch(e.get("importModuleSpecifier")){case"project-relative":return"project-relative";case"relative":return"relative";case"non-relative":return"non-relative";default:return}}function f(e){switch(e.get("importModuleSpecifierEnding")){case"minimal":return"minimal";case"index":return"index";case"js":return"js";default:return"auto"}}function m(e){switch(e.get("jsxAttributeCompletionStyle")){case"braces":return"braces";case"none":return"none";default:return"auto"}}t.InlayHintSettingNames=d,d.parameterNamesSuppressWhenArgumentMatchesName="inlayHints.parameterNames.suppressWhenArgumentMatchesName",d.parameterNamesEnabled="inlayHints.parameterTypes.enabled",d.variableTypesEnabled="inlayHints.variableTypes.enabled",d.propertyDeclarationTypesEnabled="inlayHints.propertyDeclarationTypes.enabled",d.functionLikeReturnTypesEnabled="inlayHints.functionLikeReturnTypes.enabled",d.enumMemberValuesEnabled="inlayHints.enumMemberValues.enabled",t.getInlayHintsPreferences=p},8283:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(189),s=n(9638),o=n(3683),a=n(231),c=i.loadMessageBundle();class l{constructor(e){this.client=e,this.id="typescript.findAllFileReferences"}async execute(e){if(this.client.apiVersion.lt(l.minVersion))return void r.window.showErrorMessage(c("error.unsupportedVersion","Find file references failed. Requires TypeScript 4.2+."));if(e||(e=r.window.activeTextEditor?.document.uri),!e)return void r.window.showErrorMessage(c("error.noResource","Find file references failed. No resource provided."));const t=await r.workspace.openTextDocument(e);if(!(0,o.isSupportedLanguageMode)(t))return void r.window.showErrorMessage(c("error.unsupportedLanguage","Find file references failed. Unsupported file type."));const n=this.client.toOpenedFilePath(t);n?await r.window.withProgress({location:r.ProgressLocation.Window,title:c("progress.title","Finding file references")},(async(t,i)=>{const s=await this.client.execute("fileReferences",{file:n},i);if("response"!==s.type||!s.body)return;const o=s.body.refs.map((e=>a.Location.fromTextSpan(this.client.toResource(e.file),e))),c=r.workspace.getConfiguration("references"),l=c.inspect("preferredLocation");await c.update("preferredLocation","view");try{await r.commands.executeCommand("editor.action.showReferences",e,new r.Position(0,0),o)}finally{await c.update("preferredLocation",l?.workspaceFolderValue??l?.workspaceValue)}})):r.window.showErrorMessage(c("error.unknownFile","Find file references failed. Unknown file type."))}}l.context="tsSupportsFileReferences",l.minVersion=s.default.v420,t.register=function(e,t){function n(){r.commands.executeCommand("setContext",l.context,e.apiVersion.gte(l.minVersion))}return n(),t.register(new l(e)),e.onTsServerStarted((()=>n()))}},1932:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(189),s=n(5162),o=n(9638),a=n(2298),c=n(1395),l=n(1648),u=n(231),d=i.loadMessageBundle();async function p(e,t,n,r,i,s){for(const o of i)for(const{codes:i,fixName:a}of e){if(s.isCancellationRequested)return;if(!i.has(o.code))continue;const e={...u.Range.toFileRangeRequestArgs(r,o.range),errorCodes:[+o.code]},c=await n.execute("getCodeFixes",e,s);if("response"!==c.type||!c.body?.length)continue;const l=c.body?.find((e=>e.fixName===a));if(!l)continue;if(!l.fixId)return void u.WorkspaceEdit.withFileCodeEdits(t,n,l.changes);const d={scope:{type:"file",args:{file:r}},fixId:l.fixId},p=await n.execute("getCombinedCodeFix",d,s);if("response"!==p.type||!p.body)return;return void u.WorkspaceEdit.withFileCodeEdits(t,n,p.body.changes)}}class g extends r.CodeAction{}class h extends g{constructor(){super(d("autoFix.label","Fix All"),h.kind)}async build(e,t,n,i){this.edit=new r.WorkspaceEdit,await async function(e,t,n,r,i,s){for(const o of i)for(const{codes:i,fixName:a}of e){if(s.isCancellationRequested)return;if(!i.has(o.code))continue;const e={...u.Range.toFileRangeRequestArgs(r,o.range),errorCodes:[+o.code]},c=await n.execute("getCodeFixes",e,s);if("response"!==c.type)continue;const l=c.body?.find((e=>e.fixName===a));if(l){u.WorkspaceEdit.withFileCodeEdits(t,n,l.changes);break}}}([{codes:c.incorrectlyImplementsInterface,fixName:l.classIncorrectlyImplementsInterface},{codes:c.asyncOnlyAllowedInAsyncFunctions,fixName:l.awaitInSyncFunction}],this.edit,e,t,n,i),await p([{codes:c.unreachableCode,fixName:l.unreachableCode}],this.edit,e,t,n,i)}}h.kind=r.CodeActionKind.SourceFixAll.append("ts");class f extends g{constructor(){super(d("autoFix.unused.label","Remove all unused code"),f.kind)}async build(e,t,n,i){this.edit=new r.WorkspaceEdit,await p([{codes:c.variableDeclaredButNeverUsed,fixName:l.unusedIdentifier}],this.edit,e,t,n,i)}}f.kind=r.CodeActionKind.Source.append("removeUnused").append("ts");class m extends g{constructor(){super(d("autoFix.missingImports.label","Add all missing imports"),m.kind)}async build(e,t,n,i){this.edit=new r.WorkspaceEdit,await p([{codes:c.cannotFindName,fixName:l.fixImport}],this.edit,e,t,n,i)}}m.kind=r.CodeActionKind.Source.append("addMissingImports").append("ts");class v{constructor(e,t,n){this.client=e,this.fileConfigurationManager=t,this.diagnosticsManager=n}get metadata(){return{providedCodeActionKinds:v.kindProviders.map((e=>e.kind))}}async provideCodeActions(e,t,n,i){if(!n.only||!r.CodeActionKind.Source.intersects(n.only))return;const s=this.client.toOpenedFilePath(e);if(!s)return;const o=this.getFixAllActions(n.only);if(this.client.bufferSyncSupport.hasPendingDiagnostics(e.uri))return o;const a=this.diagnosticsManager.getDiagnostics(e.uri);return a.length?(await this.fileConfigurationManager.ensureConfigurationForDocument(e,i),i.isCancellationRequested?void 0:(await Promise.all(o.map((e=>e.build(this.client,s,a,i)))),o)):o}getFixAllActions(e){return v.kindProviders.filter((t=>e.intersects(t.kind))).map((e=>new e))}}v.kindProviders=[h,f,m],t.register=function(e,t,n,i){return(0,a.conditionalRegistration)([(0,a.requireMinVersion)(t,o.default.v300),(0,a.requireSomeCapability)(t,s.ClientCapability.Semantic)],(()=>{const s=new v(t,n,i);return r.languages.registerCodeActionsProvider(e.semantic,s,s.metadata)}))}},1416:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(9638),s=n(6929),o=n(2298),a=n(231);class c{constructor(e){this.client=e}async provideFoldingRanges(e,t,n){const r=this.client.toOpenedFilePath(e);if(!r)return;const i={file:r},o=await this.client.execute("getOutliningSpans",i,n);return"response"===o.type&&o.body?(0,s.coalesce)(o.body.map((t=>this.convertOutliningSpan(t,e)))):void 0}convertOutliningSpan(e,t){const n=a.Range.fromTextSpan(e.textSpan),i=c.getFoldingRangeKind(e);if("comment"===e.kind){const e=t.lineAt(n.start.line).text;if(/\/\/\s*#endregion/gi.test(e))return}const s=n.start.line,o=this.adjustFoldingEnd(n,t);return new r.FoldingRange(s,o,i)}adjustFoldingEnd(e,t){if(e.end.character>0){const n=t.getText(new r.Range(e.end.translate(0,-1),e.end));if(c.foldEndPairCharacters.includes(n))return Math.max(e.end.line-1,e.start.line)}return e.end.line}static getFoldingRangeKind(e){switch(e.kind){case"comment":return r.FoldingRangeKind.Comment;case"region":return r.FoldingRangeKind.Region;case"imports":return r.FoldingRangeKind.Imports;case"code":default:return}}}c.minVersion=i.default.v280,c.foldEndPairCharacters=["}","]",")","`",">"],t.register=function(e,t){return(0,o.conditionalRegistration)([(0,o.requireMinVersion)(t,c.minVersion)],(()=>r.languages.registerFoldingRangeProvider(e.syntax,new c(t))))}},2742:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(2298),s=n(231);class o{constructor(e,t){this.client=e,this.formattingOptionsManager=t}async provideDocumentRangeFormattingEdits(e,t,n,r){const i=this.client.toOpenedFilePath(e);if(!i)return;await this.formattingOptionsManager.ensureConfigurationOptions(e,n,r);const o=s.Range.toFormattingRequestArgs(i,t),a=await this.client.execute("format",o,r);return"response"===a.type&&a.body?a.body.map(s.TextEdit.fromCodeEdit):void 0}async provideOnTypeFormattingEdits(e,t,n,r,i){const o=this.client.toOpenedFilePath(e);if(!o)return[];await this.formattingOptionsManager.ensureConfigurationOptions(e,r,i);const a={...s.Position.toFileLocationRequestArgs(o,t),key:n},c=await this.client.execute("formatonkey",a,i);if("response"!==c.type||!c.body)return[];const l=[];for(const t of c.body){const n=s.TextEdit.fromCodeEdit(t),r=n.range;if(0===r.start.character&&r.start.line===r.end.line&&""===n.newText){const t=e.lineAt(r.start.line).text;(t.trim().length>0||t.length>r.end.character)&&l.push(n)}else l.push(n)}return l}}t.register=function(e,t,n,s){return(0,i.conditionalRegistration)([(0,i.requireGlobalConfiguration)(t.id,"format.enable")],(()=>{const t=new o(n,s);return r.Disposable.from(r.languages.registerOnTypeFormattingEditProvider(e.syntax,t,";","}","\n"),r.languages.registerDocumentRangeFormattingEditProvider(e.syntax,t))}))}},8967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(371),s=n(5162),o=n(2298),a=n(3539),c=n(231);class l{constructor(e,t){this.client=e,this.fileConfigurationManager=t}async provideHover(e,t,n){const i=this.client.toOpenedFilePath(e);if(!i)return;const s=await this.client.interruptGetErr((async()=>{await this.fileConfigurationManager.ensureConfigurationForDocument(e,n);const r=c.Position.toFileLocationRequestArgs(i,t);return this.client.execute("quickinfo",r,n)}));return"response"===s.type&&s.body?new r.Hover(this.getContents(e.uri,s.body,s._serverType),c.Range.fromTextSpan(s.body)):void 0}getContents(e,t,n){const o=[];if(t.displayString){const a=[];n===s.ServerType.Syntax&&this.client.hasCapabilityForResource(e,s.ClientCapability.Semantic)&&a.push((0,i.localize)({key:"loadingPrefix",comment:["Prefix displayed for hover entries while the server is still loading"]},"(loading...)")),a.push(t.displayString),o.push((new r.MarkdownString).appendCodeblock(a.join(" "),"typescript"))}const c=(0,a.markdownDocumentation)(t.documentation,t.tags,this.client,e);return o.push(c),o}}t.register=function(e,t,n){return(0,o.conditionalRegistration)([(0,o.requireSomeCapability)(t,s.ClientCapability.EnhancedSyntax,s.ClientCapability.Semantic)],(()=>r.languages.registerHoverProvider(e.syntax,new l(t,n))))}},8878:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(5162),s=n(2298),o=n(8695);class a extends o.default{provideImplementation(e,t,n){return this.getSymbolLocations("implementation",e,t,n)}}t.register=function(e,t){return(0,s.conditionalRegistration)([(0,s.requireSomeCapability)(t,i.ClientCapability.Semantic)],(()=>r.languages.registerImplementationProvider(e.semantic,new a(t))))}},8484:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(5162),s=n(9638),o=n(2298),a=n(4009),c=n(231),l=n(7296),u=[l.InlayHintSettingNames.parameterNamesSuppressWhenArgumentMatchesName,l.InlayHintSettingNames.parameterNamesEnabled,l.InlayHintSettingNames.variableTypesEnabled,l.InlayHintSettingNames.propertyDeclarationTypesEnabled,l.InlayHintSettingNames.functionLikeReturnTypesEnabled,l.InlayHintSettingNames.enumMemberValuesEnabled];class d extends a.Disposable{constructor(e,t,n){super(),this.language=e,this.client=t,this.fileConfigurationManager=n,this._onDidChangeInlayHints=new r.EventEmitter,this.onDidChangeInlayHints=this._onDidChangeInlayHints.event,this._register(r.workspace.onDidChangeConfiguration((t=>{u.some((n=>t.affectsConfiguration(e.id+"."+n)))&&this._onDidChangeInlayHints.fire()}))),this._register(r.workspace.onDidChangeTextDocument((t=>{e.languageIds.includes(t.document.languageId)&&this._onDidChangeInlayHints.fire()})))}async provideInlayHints(e,t,n){const i=this.client.toOpenedFilePath(e);if(!i)return[];if(!function(e,t){const n=r.workspace.getConfiguration(e.id,t),i=(0,l.getInlayHintsPreferences)(n);return"literals"===i.includeInlayParameterNameHints||"all"===i.includeInlayParameterNameHints||i.includeInlayEnumMemberValueHints||i.includeInlayFunctionLikeReturnTypeHints||i.includeInlayFunctionParameterTypeHints||i.includeInlayPropertyDeclarationTypeHints||i.includeInlayVariableTypeHints}(this.language,e))return[];const s=e.offsetAt(t.start),o=e.offsetAt(t.end)-s;await this.fileConfigurationManager.ensureConfigurationForDocument(e,n);const a=await this.client.execute("provideInlayHints",{file:i,start:s,length:o},n);return"response"===a.type&&a.success&&a.body?a.body.map((e=>{const t=new r.InlayHint(c.Position.fromLocation(e.position),e.text,e.kind&&function(e){switch(e){case"Parameter":return r.InlayHintKind.Parameter;case"Type":return r.InlayHintKind.Type;case"Enum":default:return}}(e.kind));return t.paddingLeft=e.whitespaceBefore,t.paddingRight=e.whitespaceAfter,t})):[]}}d.minVersion=s.default.v440,t.register=function(e,t,n,s){return(0,o.conditionalRegistration)([(0,o.requireMinVersion)(n,d.minVersion),(0,o.requireSomeCapability)(n,i.ClientCapability.Semantic)],(()=>{const i=new d(t,n,s);return r.languages.registerInlayHintsProvider(e.semantic,i)}))}},4850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.templateToSnippet=void 0;const r=n(7549),i=n(189),s=n(231),o=i.loadMessageBundle(),a=new r.SnippetString("/**\n * $0\n */");class c extends r.CompletionItem{constructor(e,t){super("/** */",r.CompletionItemKind.Text),this.document=e,this.position=t,this.detail=o("typescript.jsDocCompletionItem.documentation","JSDoc comment"),this.sortText="\0";const n=e.lineAt(t.line).text,i=n.slice(0,t.character).match(/\/\**\s*$/),s=n.slice(t.character).match(/^\s*\**\//),a=t.translate(0,i?-i[0].length:0),c=new r.Range(a,t.translate(0,s?s[0].length:0));this.range={inserting:c,replacing:c}}}class l{constructor(e,t,n){this.client=e,this.language=t,this.fileConfigurationManager=n}async provideCompletionItems(e,t,n){if(!r.workspace.getConfiguration(this.language.id,e).get("suggest.completeJSDocs"))return;const i=this.client.toOpenedFilePath(e);if(!i)return;if(!this.isPotentiallyValidDocCompletionPosition(e,t))return;const o=await this.client.interruptGetErr((async()=>{await this.fileConfigurationManager.ensureConfigurationForDocument(e,n);const r=s.Position.toFileLocationRequestArgs(i,t);return this.client.execute("docCommentTemplate",r,n)}));if("response"!==o.type||!o.body)return;const l=new c(e,t);return"/** */"===o.body.newText?l.insertText=a:l.insertText=u(o.body.newText),[l]}isPotentiallyValidDocCompletionPosition(e,t){const n=e.lineAt(t.line).text,r=n.slice(0,t.character);if(!/^\s*$|\/\*\*\s*$|^\s*\/\*\*+\s*$/.test(r))return!1;const i=n.slice(t.character);return/^\s*(\*+\/)?\s*$/.test(i)}}function u(e){let t=1;return e=(e=(e=(e=(e=e.replace(/\$/g,"\\$")).replace(/^[ \t]*(?=(\/|[ ]\*))/gm,"")).replace(/^(\/\*\*\s*\*[ ]*)$/m,(e=>e+"$0"))).replace(/\* @param([ ]\{\S+\})?\s+(\S+)[ \t]*$/gm,((e,n,r)=>{let i="* @param ";return" {any}"===n||" {*}"===n?i+=`{\${${t++}:*}} `:n&&(i+=n+" "),i+=r+` \${${t++}}`,i}))).replace(/\* @returns[ \t]*$/gm,`* @returns \${${t++}}`),new r.SnippetString(e)}t.templateToSnippet=u,t.register=function(e,t,n,i){return r.languages.registerCompletionItemProvider(e.syntax,new l(n,t,i),"*")}},8267:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(189),s=n(5162),o=n(9638),a=n(3219),c=n(2298),l=n(231),u=i.loadMessageBundle();class d{constructor(e,t){this.client=e,this.telemetryReporter=t,this.id=d.Id}async execute(e,t=!1){this.telemetryReporter.logTelemetry("organizeImports.execute",{});const n={scope:{type:"file",args:{file:e}},skipDestructiveCodeActions:t},i=await this.client.interruptGetErr((()=>this.client.execute("organizeImports",n,a.nulToken)));if("response"===i.type&&i.body&&i.body.length){const e=l.WorkspaceEdit.fromFileCodeEdits(this.client,i.body);return r.workspace.applyEdit(e)}}}d.Id="_typescript.organizeImports";class p{constructor(e,t,n,r,i,s,o){this.client=e,this.kind=t,this.title=n,this.sortOnly=r,this.fileConfigManager=s,i.register(new d(e,o))}static register(e,t,n,i,o,a,l,u,d){return(0,c.conditionalRegistration)([(0,c.requireMinVersion)(e,t),(0,c.requireSomeCapability)(e,s.ClientCapability.Semantic)],(()=>{const t=new p(e,n,i,o,a,l,u);return r.languages.registerCodeActionsProvider(d.semantic,t,{providedCodeActionKinds:[n]})}))}provideCodeActions(e,t,n,i){const s=this.client.toOpenedFilePath(e);if(!s)return[];if(!n.only||!n.only.contains(this.kind))return[];this.fileConfigManager.ensureConfigurationForDocument(e,i);const o=new r.CodeAction(this.title,this.kind);return o.command={title:"",command:d.Id,arguments:[s,this.sortOnly]},[o]}}t.register=function(e,t,n,i,s){return r.Disposable.from(p.register(t,o.default.v280,r.CodeActionKind.SourceOrganizeImports,u("organizeImportsAction.title","Organize Imports"),!1,n,i,s,e),p.register(t,o.default.v430,r.CodeActionKind.Source.append("sortImports"),u("sortImportsAction.title","Sort Imports"),!0,n,i,s,e))}},3270:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const i=n(7549),s=n(189),o=n(5162),a=n(9638),c=n(3219),l=n(4654),u=n(2298),d=n(1648),p=n(6620),g=n(1745),h=n(231),f=s.loadMessageBundle();class m{constructor(e,t){this.client=e,this.telemetryReporter=t,this.id=m.ID}async execute(e){return this.telemetryReporter.logTelemetry("quickFix.execute",{fixName:e.fixName}),(0,l.applyCodeActionCommands)(this.client,e.commands,c.nulToken)}}m.ID="_typescript.applyCodeActionCommand";class v{constructor(e,t){this.client=e,this.telemetryReporter=t,this.id=v.ID}async execute(e){this.telemetryReporter.logTelemetry("quickFixAll.execute",{fixName:e.action.tsAction.fixName}),e.action.combinedResponse&&await(0,l.applyCodeActionCommands)(this.client,e.action.combinedResponse.body.commands,c.nulToken)}}v.ID="_typescript.applyFixAllCodeAction";class y{constructor(e){this._values=e}static from(e){const t=new Map;for(const n of e)t.set(y.key(n),n);return new y(t)}static key(e){const{start:t,end:n}=e.range;return`${e.code}-${t.line},${t.character}-${n.line},${n.character}`}get values(){return this._values.values()}get size(){return this._values.size}}class C extends i.CodeAction{constructor(e,t,n){super(t,n),this.tsAction=e}}class S extends C{constructor(e,t,n,r){super(e,n,r),this.file=t}}class w{constructor(){this._actions=new Set,this._fixAllActions=new Map}get values(){return this._actions}addAction(e){for(const t of this._actions)e.tsAction.fixName===t.tsAction.fixName&&(0,g.equals)(e.edit,t.edit)&&this._actions.delete(t);if(this._actions.add(e),e.tsAction.fixId){const t=this._fixAllActions.get(e.tsAction.fixId);t&&(this._actions.delete(t),this._actions.add(t))}}addFixAllAction(e,t){const n=this._fixAllActions.get(e);n&&this._actions.delete(n),this.addAction(t),this._fixAllActions.set(e,t)}hasFixAllAction(e){return this._fixAllActions.has(e)}}class b{constructor(e){this.client=e}async getFixableDiagnosticsForContext(e){const t=await this.fixableDiagnosticCodes;return y.from(e.diagnostics.filter((e=>void 0!==e.code&&t.has(e.code+""))))}get fixableDiagnosticCodes(){return this.client.execute("getSupportedCodeFixes",null,c.nulToken).then((e=>"response"===e.type&&e.body||[])).then((e=>new Set(e)))}}r([p.memoize],b.prototype,"fixableDiagnosticCodes",null);class x{constructor(e,t,n,r,i){this.client=e,this.formattingConfigurationManager=t,this.diagnosticsManager=r,n.register(new m(e,i)),n.register(new v(e,i)),this.supportedCodeActionProvider=new b(e)}async provideCodeActions(e,t,n,r){const i=this.client.toOpenedFilePath(e);if(!i)return[];const s=await this.supportedCodeActionProvider.getFixableDiagnosticsForContext(n);if(!s.size)return[];if(this.client.bufferSyncSupport.hasPendingDiagnostics(e.uri))return[];await this.formattingConfigurationManager.ensureConfigurationForDocument(e,r);const o=new w;for(const t of s.values)await this.getFixesForDiagnostic(e,i,t,o,r);const a=Array.from(o.values);for(const e of a)e.isPreferred=k(e,a);return a}async resolveCodeAction(e,t){if(!(e instanceof S&&e.tsAction.fixId))return e;const n={scope:{type:"file",args:{file:e.file}},fixId:e.tsAction.fixId},r=await this.client.execute("getCombinedCodeFix",n,t);return"response"===r.type&&(e.combinedResponse=r,e.edit=h.WorkspaceEdit.fromFileCodeEdits(this.client,r.body.changes)),e}async getFixesForDiagnostic(e,t,n,r,i){const s={...h.Range.toFileRangeRequestArgs(t,n.range),errorCodes:[+n.code]},o=await this.client.execute("getCodeFixes",s,i);if("response"!==o.type||!o.body)return r;for(const i of o.body)this.addAllFixesForTsCodeAction(r,e,t,n,i);return r}addAllFixesForTsCodeAction(e,t,n,r,i){return e.addAction(this.getSingleFixForTsCodeAction(r,i)),this.addFixAllForTsCodeAction(e,t,n,r,i),e}getSingleFixForTsCodeAction(e,t){const n=new C(t,t.description,i.CodeActionKind.QuickFix);return n.edit=(0,l.getEditForCodeAction)(this.client,t),n.diagnostics=[e],n.command={command:m.ID,arguments:[t],title:""},n}addFixAllForTsCodeAction(e,t,n,r,s){if(!s.fixId||this.client.apiVersion.lt(a.default.v270)||e.hasFixAllAction(s.fixId))return e;if(!this.diagnosticsManager.getDiagnostics(t.uri).some((e=>e!==r&&(e.code===r.code||T.has(e.code)&&T.get(e.code)===T.get(r.code)))))return e;const o=new S(s,n,s.fixAllDescription||f("fixAllInFileLabel","{0} (Fix all in file)",s.description),i.CodeActionKind.QuickFix);return o.diagnostics=[r],o.command={command:v.ID,arguments:[{action:o}],title:""},e.addFixAllAction(s.fixId,o),e}}x.metadata={providedCodeActionKinds:[i.CodeActionKind.QuickFix]};const T=new Map([[2339,2339],[2345,2339]]),I=new Map([[d.annotateWithTypeFromJSDoc,{priority:2}],[d.constructorForDerivedNeedSuperCall,{priority:2}],[d.extendsInterfaceBecomesImplements,{priority:2}],[d.awaitInSyncFunction,{priority:2}],[d.classIncorrectlyImplementsInterface,{priority:3}],[d.classDoesntImplementInheritedAbstractMember,{priority:3}],[d.unreachableCode,{priority:2}],[d.unusedIdentifier,{priority:2}],[d.forgottenThisPropertyAccess,{priority:2}],[d.spelling,{priority:0}],[d.addMissingAwait,{priority:2}],[d.addMissingOverride,{priority:2}],[d.fixImport,{priority:1,thereCanOnlyBeOne:!0}]]);function k(e,t){if(e instanceof S)return!1;const n=I.get(e.tsAction.fixName);return!!n&&t.every((t=>{if(t===e)return!0;if(t instanceof S)return!0;const r=I.get(t.tsAction.fixName);return!r||r.priority<n.priority||!(r.priority>n.priority)&&(!n.thereCanOnlyBeOne||e.tsAction.fixName!==t.tsAction.fixName)}))}t.register=function(e,t,n,r,s,a){return(0,u.conditionalRegistration)([(0,u.requireSomeCapability)(t,o.ClientCapability.Semantic)],(()=>i.languages.registerCodeActionsProvider(e.semantic,new x(t,n,r,s,a),x.metadata)))}},4577:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(189),s=n(392),o=n(5162),a=n(9638),c=n(3219),l=n(2298),u=n(6797),d=n(231),p=i.loadMessageBundle();class g{constructor(e){this.telemetryReporter=e,this.id=g.ID}async execute(e){if(this.telemetryReporter.logTelemetry("refactor.execute",{action:e.codeAction.action}),!e.codeAction.edit?.size)return void r.window.showErrorMessage(p("refactoringFailed","Could not apply refactoring"));const t=e.codeAction.renameLocation;t&&e.codeAction.document.uri.scheme!==u.walkThroughSnippet&&await r.commands.executeCommand("editor.action.rename",[e.codeAction.document.uri,d.Position.fromLocation(t)])}}g.ID="_typescript.didApplyRefactoring";class h{constructor(e,t){this.client=e,this.didApplyCommand=t,this.id=h.ID}async execute(e){if(!this.client.toOpenedFilePath(e.document))return;const t=await r.window.showQuickPick(e.info.actions.map((e=>({label:e.name,description:e.description}))));if(!t)return;const n=new k(this.client,e.action.title,e.action.kind,e.document,e.info.name,t.label,e.rangeOrSelection);await n.resolve(c.nulToken),!n.edit||await r.workspace.applyEdit(n.edit)?await this.didApplyCommand.execute({codeAction:n}):r.window.showErrorMessage(p("refactoringFailed","Could not apply refactoring"))}}h.ID="_typescript.selectRefactoring";const f=Object.freeze({kind:r.CodeActionKind.RefactorExtract.append("function"),matches:e=>e.name.startsWith("function_")}),m=Object.freeze({kind:r.CodeActionKind.RefactorExtract.append("constant"),matches:e=>e.name.startsWith("constant_")}),v=Object.freeze({kind:r.CodeActionKind.RefactorExtract.append("type"),matches:e=>e.name.startsWith("Extract to type alias")}),y=Object.freeze({kind:r.CodeActionKind.RefactorExtract.append("interface"),matches:e=>e.name.startsWith("Extract to interface")}),C=Object.freeze({kind:r.CodeActionKind.Refactor.append("move").append("newFile"),matches:e=>e.name.startsWith("Move to a new file")}),S=Object.freeze({kind:r.CodeActionKind.RefactorRewrite.append("import"),matches:e=>e.name.startsWith("Convert namespace import")||e.name.startsWith("Convert named imports")}),w=Object.freeze({kind:r.CodeActionKind.RefactorRewrite.append("export"),matches:e=>e.name.startsWith("Convert default export")||e.name.startsWith("Convert named export")}),b=Object.freeze({kind:r.CodeActionKind.RefactorRewrite.append("arrow").append("braces"),matches:e=>e.name.startsWith("Convert default export")||e.name.startsWith("Convert named export")}),x=Object.freeze({kind:r.CodeActionKind.RefactorRewrite.append("parameters").append("toDestructured"),matches:e=>e.name.startsWith("Convert parameters to destructured object")}),T=Object.freeze({kind:r.CodeActionKind.RefactorRewrite.append("property").append("generateAccessors"),matches:e=>e.name.startsWith("Generate 'get' and 'set' accessors")}),I=[f,m,v,y,C,S,w,b,x,T];class k extends r.CodeAction{constructor(e,t,n,r,i,s,o){super(t,n),this.client=e,this.document=r,this.refactor=i,this.action=s,this.range=o}async resolve(e){const t=this.client.toOpenedFilePath(this.document);if(!t)return;const n={...d.Range.toFileRangeRequestArgs(t,this.range),refactor:this.refactor,action:this.action},r=await this.client.execute("getEditsForRefactor",n,e);"response"===r.type&&r.body&&(this.edit=k.getWorkspaceEditForRefactoring(this.client,r.body),this.renameLocation=r.body.renameLocation)}static getWorkspaceEditForRefactoring(e,t){const n=new r.WorkspaceEdit;for(const r of t.edits){const t=e.toResource(r.fileName);t.scheme===u.file&&n.createFile(t,{ignoreIfExists:!0})}return d.WorkspaceEdit.withFileCodeEdits(n,e,t.edits),n}}class _ extends r.CodeAction{constructor(e,t,n){super(e.description,r.CodeActionKind.Refactor),this.command={title:e.description,command:h.ID,arguments:[{action:this,document:t,info:e,rangeOrSelection:n}]}}}class P{constructor(e,t,n,r){this.client=e,this.formattingOptionsManager=t;const i=n.register(new g(r));n.register(new h(this.client,i))}async provideCodeActions(e,t,n,r){if(!this.shouldTrigger(n,t))return;if(!this.client.toOpenedFilePath(e))return;const i=await this.client.interruptGetErr((()=>{const i=this.client.toOpenedFilePath(e);if(!i)return;this.formattingOptionsManager.ensureConfigurationForDocument(e,r);const s={...d.Range.toFileRangeRequestArgs(i,t),triggerReason:this.toTsTriggerReason(n),kind:n.only?.value};return this.client.execute("getApplicableRefactors",s,r)}));if("response"!==i?.type||!i.body)return;const s=this.convertApplicableRefactors(i.body,e,t).filter((e=>!(this.client.apiVersion.lt(a.default.v430)&&!n.only&&"refactor.rewrite.function.returnType"===e.kind?.value)));return n.only?this.pruneInvalidActions(this.appendInvalidActions(s),n.only,5):s}async resolveCodeAction(e,t){return e instanceof k&&await e.resolve(t),e}toTsTriggerReason(e){if(e.triggerKind===r.CodeActionTriggerKind.Invoke)return"invoked"}convertApplicableRefactors(e,t,n){const r=[];for(const i of e)if(!1===i.inlineable){const e=new _(i,t,n);r.push(e)}else for(const e of i.actions)r.push(this.refactorActionToCodeAction(e,t,i,n,i.actions));return r}refactorActionToCodeAction(e,t,n,r,i){const s=new k(this.client,e.description,P.getKind(e),t,n.name,e.name,r);return e.notApplicableReason?s.disabled={reason:e.notApplicableReason}:s.command={title:e.description,command:g.ID,arguments:[{codeAction:s}]},s.isPreferred=P.isPreferred(e,i),s}shouldTrigger(e,t){return!(e.only&&!r.CodeActionKind.Refactor.contains(e.only))&&(e.triggerKind===r.CodeActionTriggerKind.Invoke||t instanceof r.Selection)}static getKind(e){if(e.kind)return r.CodeActionKind.Empty.append(e.kind);const t=I.find((t=>t.matches(e)));return t?t.kind:r.CodeActionKind.Refactor}static isPreferred(e,t){if(m.matches(e)){const n=e=>{const t=e.match(/scope_(\d)/)?.[1];return t?+t:void 0},r=n(e.name);return"number"==typeof r&&t.filter((t=>t!==e&&m.matches(t))).every((e=>{const t=n(e.name);return"number"!=typeof t||r<t}))}return!(!v.matches(e)&&!y.matches(e))}appendInvalidActions(e){if(this.client.apiVersion.gte(a.default.v400))return e;if(!e.some((e=>e.kind&&m.kind.contains(e.kind)))){const t=new r.CodeAction(p("extractConstant.disabled.title","Extract to constant"),m.kind);t.disabled={reason:p("extractConstant.disabled.reason","The current selection cannot be extracted")},t.isPreferred=!0,e.push(t)}if(!e.some((e=>e.kind&&f.kind.contains(e.kind)))){const t=new r.CodeAction(p("extractFunction.disabled.title","Extract to function"),f.kind);t.disabled={reason:p("extractFunction.disabled.reason","The current selection cannot be extracted")},e.push(t)}return e}pruneInvalidActions(e,t,n){if(this.client.apiVersion.lt(a.default.v400))return e;const r=[],i=[],s=[];for(const t of e)t.disabled?t.kind&&(m.kind.contains(t.kind)||f.kind.contains(t.kind))?i.push(t):s.push(t):r.push(t);const o=[];o.push(...i),o.push(...s);const c=o.filter((e=>!t||e.kind&&t.contains(e.kind))).slice(0,n);return r.push(...c),r}}P.minVersion=a.default.v240,P.metadata={providedCodeActionKinds:[r.CodeActionKind.Refactor,...I.map((e=>e.kind))],documentation:[{kind:r.CodeActionKind.Refactor,command:{command:s.LearnMoreAboutRefactoringsCommand.id,title:p("refactor.documentation.title","Learn more about JS/TS refactorings")}}]},t.register=function(e,t,n,i,s){return(0,l.conditionalRegistration)([(0,l.requireMinVersion)(t,P.minVersion),(0,l.requireSomeCapability)(t,o.ClientCapability.Semantic)],(()=>r.languages.registerCodeActionsProvider(e.semantic,new P(t,n,i,s),P.metadata)))}},2705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(5162),s=n(2298),o=n(231);class a{constructor(e){this.client=e}async provideReferences(e,t,n,r){const i=this.client.toOpenedFilePath(e);if(!i)return[];const s=o.Position.toFileLocationRequestArgs(i,t),a=await this.client.execute("references",s,r);if("response"!==a.type||!a.body)return[];const c=[];for(const e of a.body.refs){if(!n.includeDeclaration&&e.isDefinition)continue;const t=this.client.toResource(e.file),r=o.Location.fromTextSpan(t,e);c.push(r)}return c}}t.register=function(e,t){return(0,s.conditionalRegistration)([(0,s.requireSomeCapability)(t,i.ClientCapability.EnhancedSyntax,i.ClientCapability.Semantic)],(()=>r.languages.registerReferenceProvider(e.syntax,new a(t))))}},171:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(1023),i=n(7549),s=n(189),o=n(5162),a=n(9638),c=n(2298),l=n(231),u=s.loadMessageBundle();class d{constructor(e,t){this.client=e,this.fileConfigurationManager=t}async prepareRename(e,t,n){if(this.client.apiVersion.lt(a.default.v310))return null;const r=await this.execRename(e,t,n);if("response"!==r?.type||!r.body)return null;const i=r.body.info;return i.canRename?l.Range.fromTextSpan(i.triggerSpan):Promise.reject(i.localizedErrorMessage)}async provideRenameEdits(e,t,n,r){const i=await this.execRename(e,t,r);if(!i||"response"!==i.type||!i.body)return null;const s=i.body.info;if(!s.canRename)return Promise.reject(s.localizedErrorMessage);if(s.fileToRename){return await this.renameFile(s.fileToRename,n,r)||Promise.reject(u("fileRenameFail","An error occurred while renaming file"))}return this.updateLocs(i.body.locs,n)}async execRename(e,t,n){const r=this.client.toOpenedFilePath(e);if(!r)return;const i={...l.Position.toFileLocationRequestArgs(r,t),findInStrings:!1,findInComments:!1};return this.client.interruptGetErr((()=>(this.fileConfigurationManager.ensureConfigurationForDocument(e,n),this.client.execute("rename",i,n))))}updateLocs(e,t){const n=new i.WorkspaceEdit;for(const r of e){const e=this.client.toResource(r.file);for(const i of r.locs)n.replace(e,l.Range.fromTextSpan(i),(i.prefixText||"")+t+(i.suffixText||""))}return n}async renameFile(e,t,n){r.extname(t)||(t+=r.extname(e));const s=r.dirname(e),o=r.join(s,t),a={file:e,oldFilePath:e,newFilePath:o},c=await this.client.execute("getEditsForFileRename",a,n);if("response"!==c.type||!c.body)return;const u=l.WorkspaceEdit.fromFileCodeEdits(this.client,c.body);return u.renameFile(i.Uri.file(e),i.Uri.file(o)),u}}t.register=function(e,t,n){return(0,c.conditionalRegistration)([(0,c.requireSomeCapability)(t,o.ClientCapability.Semantic)],(()=>i.languages.registerRenameProvider(e.semantic,new d(t,n))))}},8116:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(5162),s=n(9638),o=n(2298),a=1e5;t.register=function(e,t){return(0,o.conditionalRegistration)([(0,o.requireMinVersion)(t,s.default.v370),(0,o.requireSomeCapability)(t,i.ClientCapability.Semantic)],(()=>{const n=new c(t);return r.languages.registerDocumentRangeSemanticTokensProvider(e.semantic,n,n.getLegend())}))};class c{constructor(e){this.client=e}getLegend(){return new r.SemanticTokensLegend(d,p)}async provideDocumentSemanticTokens(e,t){const n=this.client.toOpenedFilePath(e);return!n||e.getText().length>a?null:this.provideSemanticTokens(e,{file:n,start:0,length:e.getText().length},t)}async provideDocumentRangeSemanticTokens(e,t,n){const r=this.client.toOpenedFilePath(e);if(!r||e.offsetAt(t.end)-e.offsetAt(t.start)>a)return null;const i=e.offsetAt(t.start),s=e.offsetAt(t.end)-i;return this.provideSemanticTokens(e,{file:r,start:i,length:s},n)}async provideSemanticTokens(e,t,n){if(!this.client.toOpenedFilePath(e))return null;const i=e.version,s=await this.client.execute("encodedSemanticClassifications-full",{...t,format:"2020"},n,{cancelOnResourceChange:e.uri});if("response"!==s.type||!s.body)return null;if(i!==e.version)throw await function(e){let t=e.version;return new Promise((n=>{const r=setInterval((i=>{e.version===t&&(clearInterval(r),n()),t=e.version}),400)}))}(e),new r.CancellationError;const o=s.body.spans,a=new r.SemanticTokensBuilder;for(let t=0;t<o.length;){const n=o[t++],r=o[t++],i=o[t++],s=l(i);if(void 0===s)continue;const c=u(i),d=e.positionAt(n),p=e.positionAt(n+r);for(let t=d.line;t<=p.line;t++){const n=t===d.line?d.character:0,r=t===p.line?p.character:e.lineAt(t).text.length;a.push(t,n,r-n,s,c)}}return a.build()}}function l(e){if(e>255)return(e>>8)-1}function u(e){return 255&e}const d=[];d[0]="class",d[1]="enum",d[2]="interface",d[3]="namespace",d[4]="typeParameter",d[5]="type",d[6]="parameter",d[7]="variable",d[8]="enumMember",d[9]="property",d[10]="function",d[11]="method";const p=[];p[2]="async",p[0]="declaration",p[3]="readonly",p[1]="static",p[5]="local",p[4]="defaultLibrary"},3416:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(5162),s=n(2298),o=n(3539),a=n(231);class c{constructor(e){this.client=e}async provideSignatureHelp(e,t,n,i){const s=this.client.toOpenedFilePath(e);if(!s)return;const o={...a.Position.toFileLocationRequestArgs(s,t),triggerReason:l(i)},c=await this.client.interruptGetErr((()=>this.client.execute("signatureHelp",o,n)));if("response"!==c.type||!c.body)return;const u=c.body,d=new r.SignatureHelp;return d.signatures=u.items.map((t=>this.convertSignature(t,e.uri))),d.activeSignature=this.getActiveSignature(i,u,d.signatures),d.activeParameter=this.getActiveParameter(u),d}getActiveSignature(e,t,n){const r=e.activeSignatureHelp?.signatures[e.activeSignatureHelp.activeSignature];if(r&&e.isRetrigger){const e=n.findIndex((e=>e.label===r?.label));if(e>=0)return e}return t.selectedItemIndex}getActiveParameter(e){const t=e.items[e.selectedItemIndex];return t&&t.isVariadic?Math.min(e.argumentIndex,t.parameters.length-1):e.argumentIndex}convertSignature(e,t){const n=new r.SignatureInformation(o.plainWithLinks(e.prefixDisplayParts,this.client),o.markdownDocumentation(e.documentation,e.tags.filter((e=>"param"!==e.name)),this.client,t));let i=n.label.length;const s=o.plainWithLinks(e.separatorDisplayParts,this.client);for(let a=0;a<e.parameters.length;++a){const c=e.parameters[a],l=o.plainWithLinks(c.displayParts,this.client);n.parameters.push(new r.ParameterInformation([i,i+l.length],o.markdownDocumentation(c.documentation,[],this.client,t))),i+=l.length,n.label+=l,a!==e.parameters.length-1&&(n.label+=s,i+=s.length)}return n.label+=o.plainWithLinks(e.suffixDisplayParts,this.client),n}}function l(e){switch(e.triggerKind){case r.SignatureHelpTriggerKind.TriggerCharacter:return e.triggerCharacter?e.isRetrigger?{kind:"retrigger",triggerCharacter:e.triggerCharacter}:{kind:"characterTyped",triggerCharacter:e.triggerCharacter}:{kind:"invoked"};case r.SignatureHelpTriggerKind.ContentChange:return e.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case r.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}}c.triggerCharacters=["(",",","<"],c.retriggerCharacters=[")"],t.register=function(e,t){return(0,s.conditionalRegistration)([(0,s.requireSomeCapability)(t,i.ClientCapability.EnhancedSyntax,i.ClientCapability.Semantic)],(()=>r.languages.registerSignatureHelpProvider(e.syntax,new c(t),{triggerCharacters:c.triggerCharacters,retriggerCharacters:c.retriggerCharacters})))}},5618:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(9638),s=n(2298),o=n(231);class a{constructor(e){this.client=e}async provideSelectionRanges(e,t,n){const r=this.client.toOpenedFilePath(e);if(!r)return;const i={file:r,locations:t.map(o.Position.toLocation)},s=await this.client.execute("selectionRange",i,n);return"response"===s.type&&s.body?s.body.map(a.convertSelectionRange):void 0}static convertSelectionRange(e){return new r.SelectionRange(o.Range.fromTextSpan(e.textSpan),e.parent?a.convertSelectionRange(e.parent):void 0)}}a.minVersion=i.default.v350,t.register=function(e,t){return(0,s.conditionalRegistration)([(0,s.requireMinVersion)(t,a.minVersion)],(()=>r.languages.registerSelectionRangeProvider(e.syntax,new a(t))))}},986:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(189),s=n(9638),o=n(3683),a=n(231),c=i.loadMessageBundle();class l{constructor(e){this.client=e,this.id="typescript.goToSourceDefinition"}async execute(){if(this.client.apiVersion.lt(l.minVersion))return void r.window.showErrorMessage(c("error.unsupportedVersion","Go to Source Definition failed. Requires TypeScript 4.7+."));const e=r.window.activeTextEditor;if(!e)return void r.window.showErrorMessage(c("error.noResource","Go to Source Definition failed. No resource provided."));const t=e.document.uri,n=await r.workspace.openTextDocument(t);if(!(0,o.isSupportedLanguageMode)(n))return void r.window.showErrorMessage(c("error.unsupportedLanguage","Go to Source Definition failed. Unsupported file type."));const i=this.client.toOpenedFilePath(n);i?await r.window.withProgress({location:r.ProgressLocation.Window,title:c("progress.title","Finding source definitions")},(async(n,s)=>{const o=e.selection.anchor,l=a.Position.toFileLocationRequestArgs(i,o),u=await this.client.execute("findSourceDefinition",l,s);if("response"===u.type&&u.body){const e=u.body.map((e=>a.Location.fromTextSpan(this.client.toResource(e.file),e)));if(e.length)return void(1===e.length?r.commands.executeCommand("vscode.open",e[0].uri.with({fragment:`L${e[0].range.start.line+1},${e[0].range.start.character+1}`})):r.commands.executeCommand("editor.action.showReferences",t,o,e))}r.window.showErrorMessage(c("error.noReferences","No source definitions found."))})):r.window.showErrorMessage(c("error.unknownFile","Go to Source Definition failed. Unknown file type."))}}l.context="tsSupportsSourceDefinition",l.minVersion=s.default.v470,t.register=function(e,t){function n(){r.commands.executeCommand("setContext",l.context,e.apiVersion.gte(l.minVersion))}return n(),t.register(new l(e)),e.onTsServerStarted((()=>n()))}},279:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(9638),s=n(2298),o=n(4009),a=n(231);class c extends o.Disposable{constructor(e){super(),this.client=e,this._disposed=!1,this._timeout=void 0,this._cancel=void 0,r.workspace.onDidChangeTextDocument((e=>this.onDidChangeTextDocument(e)),null,this._disposables)}dispose(){super.dispose(),this._disposed=!0,this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),this._cancel&&(this._cancel.cancel(),this._cancel.dispose(),this._cancel=void 0)}onDidChangeTextDocument({document:e,contentChanges:t,reason:n}){if(0===t.length||n===r.TextDocumentChangeReason.Undo||n===r.TextDocumentChangeReason.Redo)return;const i=r.window.activeTextEditor&&r.window.activeTextEditor.document;if(e!==i)return;const s=this.client.toOpenedFilePath(e);if(!s)return;void 0!==this._timeout&&clearTimeout(this._timeout),this._cancel&&(this._cancel.cancel(),this._cancel.dispose(),this._cancel=void 0);const o=t[t.length-1],c=o.text[o.text.length-1];if(o.rangeLength>0||">"!==c&&"/"!==c)return;if(">"===(o.range.start.character>0?e.getText(new r.Range(o.range.start.translate({characterDelta:-1}),o.range.start)):""))return;const l=e.version;this._timeout=setTimeout((async()=>{if(this._timeout=void 0,this._disposed)return;const t=o.text.split(/\r\n|\n/g),n=t.length<=1?o.range.start.translate({characterDelta:o.text.length}):new r.Position(o.range.start.line+t.length-1,t[t.length-1].length),i=a.Position.toFileLocationRequestArgs(s,n);this._cancel=new r.CancellationTokenSource;const c=await this.client.execute("jsxClosingTag",i,this._cancel.token);if("response"!==c.type||!c.body)return;if(this._disposed)return;const u=r.window.activeTextEditor;if(!u)return;const d=c.body,p=u.document;e===p&&p.version===l&&u.insertSnippet(this.getTagSnippet(d),this.getInsertionPositions(u,n))}),100)}getTagSnippet(e){const t=new r.SnippetString;return t.appendPlaceholder("",0),t.appendText(e.newText),t}getInsertionPositions(e,t){const n=e.selections.map((e=>e.active));return n.some((e=>e.isEqual(t)))?n:t}}function l(e,t){return new s.Condition((()=>{const n=r.window.activeTextEditor;return!(!n||!r.languages.match(e,n.document)||!r.workspace.getConfiguration(t.id,n.document).get("autoClosingTags"))}),(e=>r.Disposable.from(r.window.onDidChangeActiveTextEditor(e),r.workspace.onDidOpenTextDocument(e),r.workspace.onDidChangeConfiguration(e))))}c.minVersion=i.default.v300,t.register=function(e,t,n){return(0,s.conditionalRegistration)([(0,s.requireMinVersion)(n,c.minVersion),l(e.syntax,t)],(()=>new c(n)))}},6270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(516),i=n(1023),s=n(7549),o=n(189),a=n(7373),c=n(6929),l=n(1595);function u(e,t){return e&&"array"===e.type&&e.children?e.children.map(t):[]}const d=o.loadMessageBundle();class p{provideDocumentLinks(e,t){const n=r.parseTree(e.getText());return n?(0,c.coalesce)([this.getExtendsLink(e,n),...this.getFilesLinks(e,n),...this.getReferencesLinks(e,n)]):[]}getExtendsLink(e,t){const n=r.findNodeAtLocation(t,["extends"]);if(!this.isPathValue(n))return;const i=n.value;if(i.startsWith("/"))return;const o={resourceUri:e.uri,extendsValue:i},a=new s.DocumentLink(this.getRange(e,n),s.Uri.parse(`command:_typescript.openExtendsLink?${JSON.stringify(o)}`));return a.tooltip=d("documentLink.tooltip","Follow link"),a}getFilesLinks(e,t){return u(r.findNodeAtLocation(t,["files"]),(t=>this.pathNodeToLink(e,t)))}getReferencesLinks(e,t){return u(r.findNodeAtLocation(t,["references"]),(t=>{const n=r.findNodeAtLocation(t,["path"]);if(this.isPathValue(n))return new s.DocumentLink(this.getRange(e,n),(0,i.basename)(n.value).endsWith(".json")?this.getFileTarget(e,n):this.getFolderTarget(e,n))}))}pathNodeToLink(e,t){return this.isPathValue(t)?new s.DocumentLink(this.getRange(e,t),this.getFileTarget(e,t)):void 0}isPathValue(e){return e&&"string"===e.type&&e.value&&!e.value.includes("*")}getFileTarget(e,t){return s.Uri.file((0,i.join)((0,i.dirname)(e.uri.fsPath),t.value))}getFolderTarget(e,t){return s.Uri.file((0,i.join)((0,i.dirname)(e.uri.fsPath),t.value,"tsconfig.json"))}getRange(e,t){const n=t.offset,r=e.positionAt(n+1),i=e.positionAt(n+(t.length-1));return new s.Range(r,i)}}t.register=function(){const e=["**/[jt]sconfig.json","**/[jt]sconfig.*.json"],t=["json","jsonc"].map((t=>e.map((e=>({language:t,pattern:e}))))).flat();return s.Disposable.from(s.commands.registerCommand("_typescript.openExtendsLink",(async({resourceUri:e,extendsValue:t})=>{const n=await async function(e,t){if(["./","../"].some((e=>t.startsWith(e)))){const n=s.Uri.joinPath(e,t);return await(0,l.exists)(n)||n.path.endsWith(".json")?n:n.with({path:`${n.path}.json`})}return async function(e,t){let n=e;const r=t[0],o=r.startsWith("@")?2:1,a=r.split(i.posix.sep).slice(0,o).join(i.posix.sep);for(;;){const e=s.Uri.joinPath(n,"node_modules",a);let r;try{r=await s.workspace.fs.stat(e)}catch(e){}if(r&&r.type&s.FileType.Directory)for(const n of t.map((e=>e.split(i.posix.sep).slice(o).join(i.posix.sep))).filter(Boolean).map((t=>s.Uri.joinPath(e,t))))if(await(0,l.exists)(n))return n;const c=n;if(n=s.Uri.joinPath(n,".."),c.path===n.path)return}}(e,[t,...t.endsWith(".json")?[]:[`${t}.json`,`${t}/tsconfig.json`]])}(a.Utils.dirname(e),t);void 0!==n?await s.commands.executeCommand("vscode.open",n):s.window.showErrorMessage(d("openTsconfigExtendsModuleFail","Failed to resolve {0} as module",t))})),s.languages.registerDocumentLinkProvider(t,new p))}},2636:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(5162),s=n(2298),o=n(8695);class a extends o.default{provideTypeDefinition(e,t,n){return this.getSymbolLocations("typeDefinition",e,t,n)}}t.default=a,t.register=function(e,t){return(0,s.conditionalRegistration)([(0,s.requireSomeCapability)(t,i.ClientCapability.EnhancedSyntax,i.ClientCapability.Semantic)],(()=>r.languages.registerTypeDefinitionProvider(e.syntax,new a(t))))}},1347:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(1023),i=n(7549),s=n(189),o=n(5162),a=n(9638),c=n(7544),l=n(3219),u=n(2298),d=n(4009),p=n(6797),g=n(2503),h=n(231),f=s.loadMessageBundle(),m="updateImportsOnFileMove.enabled";class v extends d.Disposable{constructor(e,t,n){super(),this.client=e,this.fileConfigurationManager=t,this._handles=n,this._delayer=new c.Delayer(50),this._pendingRenames=new Set,this._register(i.workspace.onDidRenameFiles((async e=>{const[{newUri:t,oldUri:n}]=e.files,r=this.client.toPath(t);if(!r)return;const s=this.client.toPath(n);if(!s)return;if("never"===this.getConfiguration(t).get(m))return;const o=await this.getJsTsFileBeingMoved(t);o&&this.client.toPath(o)&&(this._pendingRenames.add({oldUri:n,newUri:t,newFilePath:r,oldFilePath:s,jsTsFileThatIsBeingMoved:o}),this._delayer.trigger((()=>{i.window.withProgress({location:i.ProgressLocation.Window,title:f("renameProgress.title","Checking for update of JS/TS imports")},(()=>this.flushRenames()))})))})))}async flushRenames(){const e=Array.from(this._pendingRenames);this._pendingRenames.clear();for(const t of this.groupRenames(e)){const e=new i.WorkspaceEdit,n=[];for(const{oldUri:r,newUri:s,newFilePath:o,oldFilePath:a,jsTsFileThatIsBeingMoved:c}of t){const t=await i.workspace.openTextDocument(c);this.client.bufferSyncSupport.closeResource(r),this.client.bufferSyncSupport.openTextDocument(t),await this.withEditsForFileRename(e,t,a,o)&&n.push(s)}e.size&&await this.confirmActionWithUser(n)&&await i.workspace.applyEdit(e)}}async confirmActionWithUser(e){if(!e.length)return!1;switch(this.getConfiguration(e[0]).get(m)){case"always":return!0;case"never":return!1;case"prompt":default:return this.promptUser(e)}}getConfiguration(e){return i.workspace.getConfiguration((0,g.doesResourceLookLikeATypeScriptFile)(e)?"typescript":"javascript",e)}async promptUser(e){if(!e.length)return!1;const t=await i.window.showInformationMessage(1===e.length?f("prompt","Update imports for '{0}'?",r.basename(e[0].fsPath)):this.getConfirmMessage(f("promptMoreThanOne","Update imports for the following {0} files?",e.length),e),{modal:!0},{title:f("reject.title","No"),choice:2,isCloseAffordance:!0},{title:f("accept.title","Yes"),choice:1},{title:f("always.title","Always automatically update imports"),choice:3},{title:f("never.title","Never automatically update imports"),choice:4});if(!t)return!1;switch(t.choice){case 1:return!0;case 2:return!1;case 3:return this.getConfiguration(e[0]).update(m,"always",i.ConfigurationTarget.Global),!0;case 4:return this.getConfiguration(e[0]).update(m,"never",i.ConfigurationTarget.Global),!1}return!1}async getJsTsFileBeingMoved(e){if(e.scheme===p.file)return await async function(e){try{return(await i.workspace.fs.stat(e)).type===i.FileType.Directory}catch{return!1}}(e)?(await i.workspace.findFiles(new i.RelativePattern(e,"**/*.{ts,tsx,js,jsx}"),"**/node_modules/**",1))[0]:await this._handles(e)?e:void 0}async withEditsForFileRename(e,t,n,r){const i=await this.client.interruptGetErr((()=>{this.fileConfigurationManager.setGlobalConfigurationFromDocument(t,l.nulToken);const e={oldFilePath:n,newFilePath:r};return this.client.execute("getEditsForFileRename",e,l.nulToken)}));return!("response"!==i.type||!i.body.length||(h.WorkspaceEdit.withFileCodeEdits(e,this.client,i.body),0))}groupRenames(e){const t=new Map;for(const n of e){const e=`${this.client.getWorkspaceRootForResource(n.jsTsFileThatIsBeingMoved)}@@@${(0,g.doesResourceLookLikeATypeScriptFile)(n.jsTsFileThatIsBeingMoved)}`;t.has(e)||t.set(e,new Set),t.get(e).add(n)}return t.values()}getConfirmMessage(e,t){const n=[e];return n.push(""),n.push(...t.slice(0,10).map((e=>r.basename(e.fsPath)))),t.length>10&&(t.length-10==1?n.push(f("moreFile","...1 additional file not shown")):n.push(f("moreFiles","...{0} additional files not shown",t.length-10))),n.push(""),n.join("\n")}}v.minVersion=a.default.v300,t.register=function(e,t,n){return(0,u.conditionalRegistration)([(0,u.requireMinVersion)(e,v.minVersion),(0,u.requireSomeCapability)(e,o.ClientCapability.Semantic)],(()=>new v(e,t,n)))}},8504:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.register=void 0;const r=n(7549),i=n(4156),s=n(9638),o=n(6797),a=n(2503),c=n(308),l=n(231);class u{constructor(e,t){this.client=e,this.modeIds=t}async provideWorkspaceSymbols(e,t){let n;if(this.searchAllOpenProjects)n=void 0;else{const e=this.getDocument();if(n=e?await this.toOpenedFiledPath(e):void 0,!n&&this.client.apiVersion.lt(s.default.v390))return[]}const r={file:n,searchValue:e,maxResultCount:256},i=await this.client.execute("navto",r,t);return"response"===i.type&&i.body?i.body.filter((e=>e.containerName||"alias"!==e.kind)).map((e=>this.toSymbolInformation(e))):[]}get searchAllOpenProjects(){return this.client.apiVersion.gte(s.default.v390)&&"allOpenProjects"===r.workspace.getConfiguration("typescript").get("workspaceSymbols.scope","allOpenProjects")}async toOpenedFiledPath(e){if(e.uri.scheme===o.git)try{const t=r.Uri.file(JSON.parse(e.uri.query)?.path);if((0,a.doesResourceLookLikeATypeScriptFile)(t)||(0,a.doesResourceLookLikeAJavaScriptFile)(t)){const e=await r.workspace.openTextDocument(t);return this.client.toOpenedFilePath(e)}}catch{}return this.client.toOpenedFilePath(e)}toSymbolInformation(e){const t=u.getLabel(e),n=new r.SymbolInformation(t,function(e){switch(e.kind){case i.Kind.method:return r.SymbolKind.Method;case i.Kind.enum:return r.SymbolKind.Enum;case i.Kind.enumMember:return r.SymbolKind.EnumMember;case i.Kind.function:return r.SymbolKind.Function;case i.Kind.class:return r.SymbolKind.Class;case i.Kind.interface:return r.SymbolKind.Interface;case i.Kind.type:return r.SymbolKind.Class;case i.Kind.memberVariable:case i.Kind.memberGetAccessor:case i.Kind.memberSetAccessor:return r.SymbolKind.Field;case i.Kind.variable:default:return r.SymbolKind.Variable}}(e),e.containerName||"",l.Location.fromTextSpan(this.client.toResource(e.file),e));return(e.kindModifiers?(0,c.parseKindModifier)(e.kindModifiers):void 0)?.has(i.KindModifiers.deprecated)&&(n.tags=[r.SymbolTag.Deprecated]),n}static getLabel(e){const t=e.name;return"method"===e.kind||"function"===e.kind?t+"()":t}getDocument(){const e=r.window.activeTextEditor?.document;if(e&&this.modeIds.includes(e.languageId))return e;const t=r.workspace.textDocuments;for(const e of t)if(this.modeIds.includes(e.languageId))return e}}t.register=function(e,t){return r.languages.registerWorkspaceSymbolProvider(new u(e,t))}},1658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1023),i=n(7549),s=n(5824),o=n(5162),a=n(4009),c=n(6797);class l extends a.Disposable{constructor(e,t,n,r,s,o,a){super(),this.client=e,this.description=t,this.commandManager=n,this.telemetryReporter=r,this.typingsStatus=s,this.fileConfigurationManager=o,this.onCompletionAccepted=a,i.workspace.onDidChangeConfiguration(this.configurationChanged,this,this._disposables),this.configurationChanged(),e.onReady((()=>this.registerProviders()))}get documentSelector(){const e=[],t=[];for(const n of this.description.languageIds){t.push({language:n});for(const t of c.semanticSupportedSchemes)e.push({language:n,scheme:t})}return{semantic:e,syntax:t}}async registerProviders(){const e=this.documentSelector,t=new s.CachedResponse;await Promise.all([Promise.resolve().then((()=>n(1072))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(5744))).then((n=>this._register(n.register(e,this.description,this.client,t)))),Promise.resolve().then((()=>n(9182))).then((n=>this._register(n.register(e,this.description,this.client,t)))),Promise.resolve().then((()=>n(2916))).then((t=>this._register(t.register(e,this.description,this.client,this.typingsStatus,this.fileConfigurationManager,this.commandManager,this.telemetryReporter,this.onCompletionAccepted)))),Promise.resolve().then((()=>n(2308))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(63))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(8531))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(3387))).then((n=>this._register(n.register(e,this.client,t)))),Promise.resolve().then((()=>n(8283))).then((e=>this._register(e.register(this.client,this.commandManager)))),Promise.resolve().then((()=>n(1932))).then((t=>this._register(t.register(e,this.client,this.fileConfigurationManager,this.client.diagnosticsManager)))),Promise.resolve().then((()=>n(1416))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(2742))).then((t=>this._register(t.register(e,this.description,this.client,this.fileConfigurationManager)))),Promise.resolve().then((()=>n(8967))).then((t=>this._register(t.register(e,this.client,this.fileConfigurationManager)))),Promise.resolve().then((()=>n(8878))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(8484))).then((t=>this._register(t.register(e,this.description,this.client,this.fileConfigurationManager)))),Promise.resolve().then((()=>n(4850))).then((t=>this._register(t.register(e,this.description,this.client,this.fileConfigurationManager)))),Promise.resolve().then((()=>n(8267))).then((t=>this._register(t.register(e,this.client,this.commandManager,this.fileConfigurationManager,this.telemetryReporter)))),Promise.resolve().then((()=>n(3270))).then((t=>this._register(t.register(e,this.client,this.fileConfigurationManager,this.commandManager,this.client.diagnosticsManager,this.telemetryReporter)))),Promise.resolve().then((()=>n(4577))).then((t=>this._register(t.register(e,this.client,this.fileConfigurationManager,this.commandManager,this.telemetryReporter)))),Promise.resolve().then((()=>n(2705))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(171))).then((t=>this._register(t.register(e,this.client,this.fileConfigurationManager)))),Promise.resolve().then((()=>n(8116))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(3416))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(5618))).then((t=>this._register(t.register(e,this.client)))),Promise.resolve().then((()=>n(986))).then((e=>this._register(e.register(this.client,this.commandManager)))),Promise.resolve().then((()=>n(279))).then((t=>this._register(t.register(e,this.description,this.client)))),Promise.resolve().then((()=>n(2636))).then((t=>this._register(t.register(e,this.client))))])}configurationChanged(){const e=i.workspace.getConfiguration(this.id,null);this.updateValidate(e.get("validate.enable",!0)),this.updateSuggestionDiagnostics(e.get("suggestionActions.enabled",!0))}handlesUri(e){const t=(0,r.extname)(e.path).slice(1).toLowerCase();return this.description.standardFileExtensions.includes(t)||this.handlesConfigFile(e)}handlesDocument(e){return this.description.languageIds.includes(e.languageId)||this.handlesConfigFile(e.uri)}handlesConfigFile(e){const t=(0,r.basename)(e.fsPath);return!!t&&!!this.description.configFilePattern&&this.description.configFilePattern.test(t)}get id(){return this.description.id}get diagnosticSource(){return this.description.diagnosticSource}updateValidate(e){this.client.diagnosticsManager.setValidate(this._diagnosticLanguage,e)}updateSuggestionDiagnostics(e){this.client.diagnosticsManager.setEnableSuggestions(this._diagnosticLanguage,e)}reInitialize(){this.client.diagnosticsManager.reInitialize()}triggerAllDiagnostics(){this.client.bufferSyncSupport.requestAllDiagnostics()}diagnosticsReceived(e,t,n){if(0!==e&&!this.client.hasCapabilityForResource(t,o.ClientCapability.Semantic))return;const r=i.workspace.getConfiguration(this.id,t),s=r.get("showUnused",!0),a=r.get("showDeprecated",!0);this.client.diagnosticsManager.updateDiagnostics(t,this._diagnosticLanguage,e,n.filter((e=>!(!s&&e.reportUnnecessary&&e.severity===i.DiagnosticSeverity.Hint||!a&&e.reportDeprecated&&e.severity===i.DiagnosticSeverity.Hint))))}configFileDiagnosticsReceived(e,t){this.client.diagnosticsManager.configFileDiagnosticsReceived(e,t)}get _diagnosticLanguage(){return this.description.diagnosticLanguage}}t.default=l},9491:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazilyActivateClient=t.createLazyClientHost=void 0;const r=n(7549),i=n(5662),s=n(6797),o=n(2503),a=n(8277),c=n(7953);t.createLazyClientHost=function(e,t,n,r){return(0,a.lazy)((()=>{const s=new i.default(o.standardLanguageDescriptions,e,t,n,r);return e.subscriptions.push(s),s}))},t.lazilyActivateClient=function(e,t,n){const i=[],a=[...o.standardLanguageDescriptions.map((e=>e.languageIds)),...t.plugins.map((e=>e.languages))].flat();let l=!1;const u=t=>!(l||!function(e,t){return e.indexOf(t.languageId)>=0&&!s.disabledSchemes.has(t.uri.scheme)}(a,t)||(l=!0,e.value,i.push(new c.default(n,(t=>e.value.serviceClient.toPath(t)))),0));if(!r.workspace.textDocuments.some(u)){const e=r.workspace.onDidOpenTextDocument((t=>{u(t)&&e.dispose()}),void 0,i)}return r.Disposable.from(...i)}},4156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventName=t.DisplayPartKind=t.KindModifiers=t.DiagnosticCategory=t.Kind=void 0;class n{}t.Kind=n,n.alias="alias",n.callSignature="call",n.class="class",n.const="const",n.constructorImplementation="constructor",n.constructSignature="construct",n.directory="directory",n.enum="enum",n.enumMember="enum member",n.externalModuleName="external module name",n.function="function",n.indexSignature="index",n.interface="interface",n.keyword="keyword",n.let="let",n.localFunction="local function",n.localVariable="local var",n.method="method",n.memberGetAccessor="getter",n.memberSetAccessor="setter",n.memberVariable="property",n.module="module",n.primitiveType="primitive type",n.script="script",n.type="type",n.variable="var",n.warning="warning",n.string="string",n.parameter="parameter",n.typeParameter="type parameter";class r{}t.DiagnosticCategory=r,r.error="error",r.warning="warning",r.suggestion="suggestion";class i{}t.KindModifiers=i,i.optional="optional",i.deprecated="deprecated",i.color="color",i.dtsFile=".d.ts",i.tsFile=".ts",i.tsxFile=".tsx",i.jsFile=".js",i.jsxFile=".jsx",i.jsonFile=".json",i.fileExtensionKindModifiers=[i.dtsFile,i.tsFile,i.tsxFile,i.jsFile,i.jsxFile,i.jsonFile];class s{}var o;t.DisplayPartKind=s,s.functionName="functionName",s.methodName="methodName",s.parameterName="parameterName",s.propertyName="propertyName",s.punctuation="punctuation",s.text="text",(o=t.EventName||(t.EventName={})).syntaxDiag="syntaxDiag",o.semanticDiag="semanticDiag",o.suggestionDiag="suggestionDiag",o.configFileDiag="configFileDiag",o.telemetry="telemetry",o.projectLanguageServiceState="projectLanguageServiceState",o.projectsUpdatedInBackground="projectsUpdatedInBackground",o.beginInstallTypes="beginInstallTypes",o.endInstallTypes="endInstallTypes",o.typesInstallerInitializationFailed="typesInstallerInitializationFailed",o.surveyReady="surveyReady",o.projectLoadingStart="projectLoadingStart",o.projectLoadingFinish="projectLoadingFinish"},9655:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7549),i=n(5162),s=n(9638),o=n(6929),a=n(7544),c=n(3219),l=n(4009),u=n(3683),d=n(7478),p=n(231);class g{constructor(e){this.args=e,this.type=0}}class h{constructor(e){this.args=e,this.type=1}}class f{constructor(e){this.args=e,this.type=2}}class m{constructor(e,t,n){this.client=e,this._pending=new d.ResourceMap(t,{onCaseInsensitiveFileSystem:n})}open(e,t){this.supportsBatching?this.updatePending(e,new h(t)):this.client.executeWithoutWaitingForResponse("open",t)}close(e,t){if(this.supportsBatching)return this.updatePending(e,new g(t));{const e={file:t};return this.client.executeWithoutWaitingForResponse("close",e),!0}}change(e,t,n){if(n.length)if(this.supportsBatching)this.updatePending(e,new f({fileName:t,textChanges:n.map((e=>({newText:e.text,start:p.Position.toLocation(e.range.start),end:p.Position.toLocation(e.range.end)}))).reverse()}));else for(const{range:e,text:r}of n){const n={insertString:r,...p.Range.toFormattingRequestArgs(t,e)};this.client.executeWithoutWaitingForResponse("change",n)}}reset(){this._pending.clear()}beforeCommand(e){"updateOpen"!==e&&this.flush()}flush(){if(this.supportsBatching){if(this._pending.size>0){const e=[],t=[],n=[];for(const r of this._pending.values)switch(r.type){case 2:n.push(r.args);break;case 1:t.push(r.args);break;case 0:e.push(r.args)}this.client.execute("updateOpen",{changedFiles:n,closedFiles:e,openFiles:t},c.nulToken,{nonRecoverable:!0}),this._pending.clear()}}else this._pending.clear()}get supportsBatching(){return this.client.apiVersion.gte(s.default.v340)}updatePending(e,t){switch(t.type){case 0:switch(this._pending.get(e)?.type){case 1:return this._pending.delete(e),!1}}return this._pending.has(e)&&this.flush(),this._pending.set(e,t),!0}}class v{constructor(e,t,n,r){this.document=e,this.filepath=t,this.client=n,this.synchronizer=r,this.state=1}open(){const e={file:this.filepath,fileContent:this.document.getText(),projectRootPath:this.client.getWorkspaceRootForResource(this.document.uri)},t=function(e){switch(e){case u.typescript:return"TS";case u.typescriptreact:return"TSX";case u.javascript:return"JS";case u.javascriptreact:return"JSX"}}(this.document.languageId);if(t&&(e.scriptKindName=t),this.client.apiVersion.gte(s.default.v240)){const t=this.client.pluginManager.plugins.filter((e=>e.languages.indexOf(this.document.languageId)>=0));t.length&&(e.plugins=t.map((e=>e.name)))}this.synchronizer.open(this.resource,e),this.state=2}get resource(){return this.document.uri}get lineCount(){return this.document.lineCount}get kind(){switch(this.document.languageId){case u.javascript:case u.javascriptreact:return 2;case u.typescript:case u.typescriptreact:default:return 1}}close(){return 2!==this.state?(this.state=2,!1):(this.state=2,this.synchronizer.close(this.resource,this.filepath))}onContentChanged(e){2!==this.state&&console.error(`Unexpected buffer state: ${this.state}`),this.synchronizer.change(this.resource,this.filepath,e)}}class y extends d.ResourceMap{getForPath(e){return this.get(r.Uri.file(e))}get allBuffers(){return this.values}}class C extends d.ResourceMap{getOrderedFileSet(){const e=Array.from(this.entries).sort(((e,t)=>e.value-t.value)).map((e=>e.resource)),t=new d.ResourceMap(this._normalizePath,this.config);for(const n of e)t.set(n,void 0);return t}}class S{constructor(e,t,n){if(this.client=e,this.files=t,this._done=!1,this._token=new r.CancellationTokenSource,!this.isErrorReportingEnabled())return this._done=!0,void(0,a.setImmediate)(n);const c=this.client.apiVersion.gte(s.default.v440),l=(0,o.coalesce)(Array.from(t.entries).filter((t=>c||e.hasCapabilityForResource(t.resource,i.ClientCapability.Semantic))).map((t=>e.normalizedPath(t.resource))));l.length?(this.areProjectDiagnosticsEnabled()?e.executeAsync("geterrForProject",{delay:0,file:l[0]},this._token.token):e.executeAsync("geterr",{delay:0,files:l},this._token.token)).finally((()=>{this._done||(this._done=!0,n())})):(this._done=!0,(0,a.setImmediate)(n))}static executeGetErrRequest(e,t,n){return new S(e,t,n)}isErrorReportingEnabled(){return!!this.client.apiVersion.gte(s.default.v440)||this.client.capabilities.has(i.ClientCapability.Semantic)}areProjectDiagnosticsEnabled(){return this.client.configuration.enableProjectDiagnostics&&this.client.capabilities.has(i.ClientCapability.Semantic)}cancel(){this._done||this._token.cancel(),this._token.dispose()}}class w extends l.Disposable{constructor(e,t,n){super(),this._validateJavaScript=!0,this._validateTypeScript=!0,this.listening=!1,this._onDelete=this._register(new r.EventEmitter),this.onDelete=this._onDelete.event,this._onWillChange=this._register(new r.EventEmitter),this.onWillChange=this._onWillChange.event,this.client=e,this.modeIds=new Set(t),this.diagnosticDelayer=new a.Delayer(300);const i=e=>this.client.normalizedPath(e);this.syncedBuffers=new y(i,{onCaseInsensitiveFileSystem:n}),this.pendingDiagnostics=new C(i,{onCaseInsensitiveFileSystem:n}),this.synchronizer=new m(e,i,n),this.updateConfiguration(),r.workspace.onDidChangeConfiguration(this.updateConfiguration,this,this._disposables)}listen(){this.listening||(this.listening=!0,r.workspace.onDidOpenTextDocument(this.openTextDocument,this,this._disposables),r.workspace.onDidCloseTextDocument(this.onDidCloseTextDocument,this,this._disposables),r.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,this._disposables),r.window.onDidChangeVisibleTextEditors((e=>{for(const{document:t}of e){const e=this.syncedBuffers.get(t.uri);e&&this.requestDiagnostic(e)}}),this,this._disposables),r.workspace.textDocuments.forEach(this.openTextDocument,this))}handles(e){return this.syncedBuffers.has(e)}ensureHasBuffer(e){if(this.syncedBuffers.has(e))return!0;const t=r.workspace.textDocuments.find((t=>t.uri.toString()===e.toString()));return!!t&&this.openTextDocument(t)}toVsCodeResource(e){const t=this.client.normalizedPath(e);for(const e of this.syncedBuffers.allBuffers)if(e.filepath===t)return e.resource;return e}toResource(e){const t=this.syncedBuffers.getForPath(e);return t?t.resource:r.Uri.file(e)}reset(){this.pendingGetErr?.cancel(),this.pendingDiagnostics.clear(),this.synchronizer.reset()}reinitialize(){this.reset();for(const e of this.syncedBuffers.allBuffers)e.open()}openTextDocument(e){if(!this.modeIds.has(e.languageId))return!1;const t=e.uri,n=this.client.normalizedPath(t);if(!n)return!1;if(this.syncedBuffers.has(t))return!0;const r=new v(e,n,this.client,this.synchronizer);return this.syncedBuffers.set(t,r),r.open(),this.requestDiagnostic(r),!0}closeResource(e){const t=this.syncedBuffers.get(e);if(!t)return;this.pendingDiagnostics.delete(e),this.pendingGetErr?.files.delete(e),this.syncedBuffers.delete(e);const n=t.close();this._onDelete.fire(e),n&&this.requestAllDiagnostics()}interruptGetErr(e){if(!this.pendingGetErr||this.client.configuration.enableProjectDiagnostics)return e();this.pendingGetErr.cancel(),this.pendingGetErr=void 0;const t=e();return this.triggerDiagnostics(),t}beforeCommand(e){this.synchronizer.beforeCommand(e)}onDidCloseTextDocument(e){this.closeResource(e.uri)}onDidChangeTextDocument(e){const t=this.syncedBuffers.get(e.document.uri);t&&(this._onWillChange.fire(t.resource),t.onContentChanged(e.contentChanges),!this.requestDiagnostic(t)&&this.pendingGetErr&&(this.pendingGetErr.cancel(),this.pendingGetErr=void 0,this.triggerDiagnostics()))}requestAllDiagnostics(){for(const e of this.syncedBuffers.allBuffers)this.shouldValidate(e)&&this.pendingDiagnostics.set(e.resource,Date.now());this.triggerDiagnostics()}getErr(e){const t=e.filter((e=>this.handles(e)));if(t.length){for(const e of t)this.pendingDiagnostics.set(e,Date.now());this.triggerDiagnostics()}}triggerDiagnostics(e=200){this.diagnosticDelayer.trigger((()=>{this.sendPendingDiagnostics()}),e)}requestDiagnostic(e){if(!this.shouldValidate(e))return!1;this.pendingDiagnostics.set(e.resource,Date.now());const t=Math.min(Math.max(Math.ceil(e.lineCount/20),300),800);return this.triggerDiagnostics(t),!0}hasPendingDiagnostics(e){return this.pendingDiagnostics.has(e)}sendPendingDiagnostics(){const e=this.pendingDiagnostics.getOrderedFileSet();if(this.pendingGetErr){this.pendingGetErr.cancel();for(const{resource:t}of this.pendingGetErr.files.entries)this.syncedBuffers.get(t)&&e.set(t,void 0);this.pendingGetErr=void 0}for(const t of this.syncedBuffers.values)e.set(t.resource,void 0);if(e.size){const t=this.pendingGetErr=S.executeGetErrRequest(this.client,e,(()=>{this.pendingGetErr===t&&(this.pendingGetErr=void 0)}))}this.pendingDiagnostics.clear()}updateConfiguration(){const e=r.workspace.getConfiguration("javascript",null),t=r.workspace.getConfiguration("typescript",null);this._validateJavaScript=e.get("validate.enable",!0),this._validateTypeScript=t.get("validate.enable",!0)}shouldValidate(e){switch(e.kind){case 2:return this._validateJavaScript;case 1:default:return this._validateTypeScript}}}t.default=w},5824:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CachedResponse=void 0,t.CachedResponse=class{constructor(){this.version=-1,this.document=""}execute(e,t){return this.response&&this.matches(e)?this.response=this.response.then((e=>"cancelled"===e.type?t():e)):this.reset(e,t)}matches(e){return this.version===e.version&&this.document===e.uri.toString()}async reset(e,t){return this.version=e.version,this.document=e.uri.toString(),this.response=t()}}},4379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallbackMap=void 0;const r=n(5162);t.CallbackMap=class{constructor(){this._callbacks=new Map,this._asyncCallbacks=new Map}destroy(e){const t=new r.ServerResponse.Cancelled(e);for(const e of this._callbacks.values())e.onSuccess(t);this._callbacks.clear();for(const e of this._asyncCallbacks.values())e.onSuccess(t);this._asyncCallbacks.clear()}add(e,t,n){n?this._asyncCallbacks.set(e,t):this._callbacks.set(e,t)}fetch(e){const t=this._callbacks.get(e)||this._asyncCallbacks.get(e);return this.delete(e),t}delete(e){this._callbacks.delete(e)||this._asyncCallbacks.delete(e)}}},5299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noopRequestCancellerFactory=void 0;const n=new class{constructor(){this.cancellationPipeName=void 0}tryCancelOngoingRequest(e){return!1}};t.noopRequestCancellerFactory=new class{create(e,t){return n}}},1660:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noopLogDirectoryProvider=void 0,t.noopLogDirectoryProvider=new class{getNewLogDirectory(){}}},4804:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RequestQueue=t.RequestQueueingType=void 0,function(e){e[e.Normal=1]="Normal",e[e.LowPriority=2]="LowPriority",e[e.Fence=3]="Fence"}(n=t.RequestQueueingType||(t.RequestQueueingType={})),t.RequestQueue=class{constructor(){this.queue=[],this.sequenceNumber=0}get length(){return this.queue.length}enqueue(e){if(e.queueingType===n.Normal){let t=this.queue.length-1;for(;t>=0&&this.queue[t].queueingType===n.LowPriority;)--t;this.queue.splice(t+1,0,e)}else this.queue.push(e)}dequeue(){return this.queue.shift()}tryDeletePendingRequest(e){for(let t=0;t<this.queue.length;t++)if(this.queue[t].request.seq===e)return this.queue.splice(t,1),!0;return!1}createRequest(e,t){return{seq:this.sequenceNumber++,type:"request",command:e,arguments:t}}}},7347:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyntaxRoutingTsServer=t.GetErrRoutingTsServer=t.ProcessBasedTsServer=t.ExecutionTarget=void 0;const r=n(7549),i=n(4156),s=n(4379),o=n(4804),a=n(6040),c=n(5162),l=n(4009);var u,d;!function(e){e[e.Semantic=0]="Semantic",e[e.Syntax=1]="Syntax"}(u=t.ExecutionTarget||(t.ExecutionTarget={}));class p extends l.Disposable{constructor(e,t,n,i,a,c,l,u){super(),this._serverId=e,this._serverSource=t,this._process=n,this._tsServerLogFile=i,this._requestCanceller=a,this._version=c,this._telemetryReporter=l,this._tracer=u,this._requestQueue=new o.RequestQueue,this._callbacks=new s.CallbackMap,this._pendingResponses=new Set,this._onEvent=this._register(new r.EventEmitter),this.onEvent=this._onEvent.event,this._onExit=this._register(new r.EventEmitter),this.onExit=this._onExit.event,this._onError=this._register(new r.EventEmitter),this.onError=this._onError.event,this._process.onData((e=>{this.dispatchMessage(e)})),this._process.onExit(((e,t)=>{this._onExit.fire({code:e,signal:t}),this._callbacks.destroy("server exited")})),this._process.onError((e=>{this._onError.fire(e),this._callbacks.destroy("server errored")}))}get tsServerLogFile(){return this._tsServerLogFile}write(e){this._process.write(e)}dispose(){super.dispose(),this._callbacks.destroy("server disposed"),this._pendingResponses.clear()}kill(){this._process.kill()}dispatchMessage(e){try{switch(e.type){case"response":this._serverSource?this.dispatchResponse({...e,_serverType:this._serverSource}):this.dispatchResponse(e);break;case"event":{const t=e;if("requestCompleted"===t.event){const e=t.body.request_seq,n=this._callbacks.fetch(e);n&&(this._tracer.traceRequestCompleted(this._serverId,"requestCompleted",e,n),n.onSuccess(void 0))}else this._tracer.traceEvent(this._serverId,t),this._onEvent.fire(t);break}default:throw new Error(`Unknown message type ${e.type} received`)}}finally{this.sendNextRequests()}}tryCancelRequest(e,t){try{return this._requestQueue.tryDeletePendingRequest(e)?(this.logTrace(`Canceled request with sequence number ${e}`),!0):!!this._requestCanceller.tryCancelOngoingRequest(e)||(this.logTrace(`Tried to cancel request with sequence number ${e}. But request got already delivered.`),!1)}finally{this.fetchCallback(e)?.onSuccess(new c.ServerResponse.Cancelled(`Cancelled request ${e} - ${t}`))}}dispatchResponse(e){const t=this.fetchCallback(e.request_seq);t&&(this._tracer.traceResponse(this._serverId,e,t),e.success?t.onSuccess(e):"No content available."===e.message?t.onSuccess(c.ServerResponse.NoContent):t.onError(a.TypeScriptServerError.create(this._serverId,this._version,e)))}executeImpl(e,t,n){const r=this._requestQueue.createRequest(e,t),i={request:r,expectsResponse:n.expectsResult,isAsync:n.isAsync,queueingType:p.getQueueingType(e,n.lowPriority)};let s;return n.expectsResult&&(s=new Promise(((t,i)=>{this._callbacks.add(r.seq,{onSuccess:t,onError:i,queuingStartTime:Date.now(),isAsync:n.isAsync},n.isAsync),n.token&&n.token.onCancellationRequested((()=>{this.tryCancelRequest(r.seq,e)}))})).catch((e=>{throw e instanceof a.TypeScriptServerError&&(n.token&&n.token.isCancellationRequested||this._telemetryReporter.logTelemetry("languageServiceErrorResponse",e.telemetry)),e}))),this._requestQueue.enqueue(i),this.sendNextRequests(),[s]}sendNextRequests(){for(;0===this._pendingResponses.size&&this._requestQueue.length>0;){const e=this._requestQueue.dequeue();e&&this.sendRequest(e)}}sendRequest(e){const t=e.request;this._tracer.traceRequest(this._serverId,t,e.expectsResponse,this._requestQueue.length),e.expectsResponse&&!e.isAsync&&this._pendingResponses.add(e.request.seq);try{this.write(t)}catch(e){this.fetchCallback(t.seq)?.onError(e)}}fetchCallback(e){const t=this._callbacks.fetch(e);if(t)return this._pendingResponses.delete(e),t}logTrace(e){this._tracer.logTrace(this._serverId,e)}static getQueueingType(e,t){return p.fenceCommands.has(e)?o.RequestQueueingType.Fence:t?o.RequestQueueingType.LowPriority:o.RequestQueueingType.Normal}}t.ProcessBasedTsServer=p,p.fenceCommands=new Set(["change","close","open","updateOpen"]);class g{constructor(e,t){this.servers=e,this.delegate=t}execute(e,t,n){if(g.sharedCommands.has(e)&&void 0===n.executionTarget){const i=this.servers.map((()=>d.Unresolved));let s;if(n.token){const e=new r.CancellationTokenSource;n.token.onCancellationRequested((()=>{i.some((e=>e===d.Resolved))||e.cancel()})),s=e.token}const o=[];for(let r=0;r<this.servers.length;++r){const a=this.servers[r].server.executeImpl(e,t,{...n,token:s})[0];o.push(a),a&&a.then((t=>{i[r]=d.Resolved;const n=i.find((e=>2===e.type));return n&&this.delegate.onFatalError(e,n.err),t}),(t=>{throw i[r]=new d.Errored(t),i.some((e=>e===d.Resolved))&&this.delegate.onFatalError(e,t),t}))}return o}for(const{canRun:r,server:i}of this.servers)if(!r||r(e,n))return i.executeImpl(e,t,n);throw new Error(`Could not find server for command: '${e}'`)}}g.sharedCommands=new Set(["change","close","open","updateOpen","configure"]);class h extends l.Disposable{constructor(e,t){super(),this._onEvent=this._register(new r.EventEmitter),this.onEvent=this._onEvent.event,this._onExit=this._register(new r.EventEmitter),this.onExit=this._onExit.event,this._onError=this._register(new r.EventEmitter),this.onError=this._onError.event,this.getErrServer=e.getErr,this.mainServer=e.primary,this.router=new g([{server:this.getErrServer,canRun:e=>["geterr","geterrForProject"].includes(e)},{server:this.mainServer,canRun:void 0}],t),this._register(this.getErrServer.onEvent((e=>{h.diagnosticEvents.has(e.event)&&this._onEvent.fire(e)}))),this._register(this.mainServer.onEvent((e=>{h.diagnosticEvents.has(e.event)||this._onEvent.fire(e)}))),this._register(this.getErrServer.onError((e=>this._onError.fire(e)))),this._register(this.mainServer.onError((e=>this._onError.fire(e)))),this._register(this.mainServer.onExit((e=>{this._onExit.fire(e),this.getErrServer.kill()})))}get tsServerLogFile(){return this.mainServer.tsServerLogFile}kill(){this.getErrServer.kill(),this.mainServer.kill()}executeImpl(e,t,n){return this.router.execute(e,t,n)}}t.GetErrRoutingTsServer=h,h.diagnosticEvents=new Set([i.EventName.configFileDiag,i.EventName.syntaxDiag,i.EventName.semanticDiag,i.EventName.suggestionDiag]);class f extends l.Disposable{constructor(e,t,n){super(),this._projectLoading=!0,this._onEvent=this._register(new r.EventEmitter),this.onEvent=this._onEvent.event,this._onExit=this._register(new r.EventEmitter),this.onExit=this._onExit.event,this._onError=this._register(new r.EventEmitter),this.onError=this._onError.event,this.syntaxServer=e.syntax,this.semanticServer=e.semantic,this.router=new g([{server:this.syntaxServer,canRun:(e,t)=>{switch(t.executionTarget){case u.Semantic:return!1;case u.Syntax:return!0}return!!f.syntaxAlwaysCommands.has(e)||!f.semanticCommands.has(e)&&!!(n&&this.projectLoading&&f.syntaxAllowedCommands.has(e))}},{server:this.semanticServer,canRun:void 0}],t),this._register(this.syntaxServer.onEvent((e=>this._onEvent.fire(e)))),this._register(this.semanticServer.onEvent((e=>{switch(e.event){case i.EventName.projectLoadingStart:this._projectLoading=!0;break;case i.EventName.projectLoadingFinish:case i.EventName.semanticDiag:case i.EventName.syntaxDiag:case i.EventName.suggestionDiag:case i.EventName.configFileDiag:this._projectLoading=!1}return this._onEvent.fire(e)}))),this._register(this.semanticServer.onExit((e=>{this._onExit.fire(e),this.syntaxServer.kill()}))),this._register(this.semanticServer.onError((e=>this._onError.fire(e))))}get projectLoading(){return this._projectLoading}get tsServerLogFile(){return this.semanticServer.tsServerLogFile}kill(){this.syntaxServer.kill(),this.semanticServer.kill()}executeImpl(e,t,n){return this.router.execute(e,t,n)}}t.SyntaxRoutingTsServer=f,f.syntaxAlwaysCommands=new Set(["navtree","getOutliningSpans","jsxClosingTag","selectionRange","format","formatonkey","docCommentTemplate"]),f.semanticCommands=new Set(["geterr","geterrForProject","projectInfo","configurePlugin"]),f.syntaxAllowedCommands=new Set(["completions","completionEntryDetails","completionInfo","definition","definitionAndBoundSpan","documentHighlights","implementation","navto","quickinfo","references","rename","signatureHelp"]),function(e){e.Unresolved={type:0},e.Resolved={type:1},e.Errored=class{constructor(e){this.err=e,this.type=2}}}(d||(d={}))},6040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeScriptServerError=void 0;class n extends Error{constructor(e,t,n,r,i,s){super(`<${e}> TypeScript Server Error (${t.displayName})\n${r}\n${i}`),this.serverId=e,this.version=t,this.response=n,this.serverMessage=r,this.serverStack=i,this.sanitizedStack=s}static create(e,t,r){const i=n.parseErrorText(r);return new n(e,t,r,i?.message,i?.stack,i?.sanitizedStack)}get serverErrorText(){return this.response.message}get serverCommand(){return this.response.command}get telemetry(){return{command:this.serverCommand,serverid:this.serverId,sanitizedstack:this.sanitizedStack||"",badclient:/\bBADCLIENT\b/.test(this.stack||"")}}static parseErrorText(e){const t=e.message;if(t){const e="Error processing request. ";if(t.startsWith(e)){const r=t.substr(e.length),i=r.indexOf("\n");if(i>=0){const e=r.substring(i+1);return{message:r.substring(0,i),stack:e,sanitizedStack:n.sanitizeStack(e)}}}}}static sanitizeStack(e){if(!e)return"";const t=/(\btsserver)?(\.(?:ts|tsx|js|jsx)(?::\d+(?::\d+)?)?)\)?$/gim;let n="";for(;;){const r=t.exec(e);if(!r)break;n+=`${r[1]||"suppressed"}${r[2]}\n`}return n}}t.TypeScriptServerError=n},2059:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerServerProcess=void 0;const i=n(7549),s=n(189),o=n(6620),a=s.loadMessageBundle();class c{constructor(e,t){this.worker=e,this._onDataHandlers=new Set,this._onErrorHandlers=new Set,this._onExitHandlers=new Set,e.addEventListener("message",(e=>{if("log"!==e.data.type)for(const t of this._onDataHandlers)t(e.data);else this.output.append(e.data.body)})),e.onerror=e=>{for(const t of this._onErrorHandlers)t(e)},e.postMessage(t)}static fork(e,t,n,r){const i=e.tsServerPath,s=new Worker(i);return new c(s,[...t,"--executingFilePath",i])}get output(){return i.window.createOutputChannel(a("channelName","TypeScript Server Log"))}write(e){this.worker.postMessage(e)}onData(e){this._onDataHandlers.add(e)}onError(e){this._onErrorHandlers.add(e)}onExit(e){this._onExitHandlers.add(e)}kill(){this.worker.terminate()}}r([o.memoize],c.prototype,"output",null),t.WorkerServerProcess=c},5373:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeScriptServerSpawner=void 0;const r=n(1023),i=n(7549),s=n(5162),o=n(9638),a=n(9550),c=n(1339),l=n(7347);class u{constructor(e,t,n,r,i,s,o,a){this._versionProvider=e,this._versionManager=t,this._logDirectoryProvider=n,this._pluginPathsProvider=r,this._logger=i,this._telemetryReporter=s,this._tracer=o,this._factory=a}spawn(e,t,n,r,i,s){let o;const a=this.getCompositeServerType(e,t,n),c=this.shouldUseSeparateDiagnosticsServer(n);switch(a){case 1:case 2:{const t=!c&&2===a;o=new l.SyntaxRoutingTsServer({syntax:this.spawnTsServer("syntax",e,n,r,i),semantic:this.spawnTsServer("semantic",e,n,r,i)},s,t);break}case 0:o=this.spawnTsServer("main",e,n,r,i);break;case 3:o=this.spawnTsServer("syntax",e,n,r,i)}return c?new l.GetErrRoutingTsServer({getErr:this.spawnTsServer("diagnostics",e,n,r,i),primary:o},s):o}getCompositeServerType(e,t,n){if(!t.has(s.ClientCapability.Semantic))return 3;switch(n.useSyntaxServer){case 1:return 3;case 0:return 0;case 2:return e.apiVersion?.gte(o.default.v340)?e.apiVersion?.gte(o.default.v400)?2:1:0}}shouldUseSeparateDiagnosticsServer(e){return e.enableProjectDiagnostics}spawnTsServer(e,t,n,r,i){const s=t.apiVersion||o.default.defaultVersion,a=i.create(e,this._tracer),{args:c,tsServerLogFile:d,tsServerTraceDirectory:p}=this.getTsServerArgs(e,n,t,s,r,a.cancellationPipeName);u.isLoggingEnabled(n)&&(d?this._logger.info(`<${e}> Log file: ${d}`):this._logger.error(`<${e}> Could not create log directory`)),n.enableTsServerTracing&&(p?this._logger.info(`<${e}> Trace directory: ${p}`):this._logger.error(`<${e}> Could not create trace directory`)),this._logger.info(`<${e}> Forking...`);const g=this._factory.fork(t,c,e,n,this._versionManager);return this._logger.info(`<${e}> Starting...`),new l.ProcessBasedTsServer(e,this.kindToServerType(e),g,d,a,t,this._telemetryReporter,this._tracer)}kindToServerType(e){switch(e){case"syntax":return s.ServerType.Syntax;case"main":case"semantic":case"diagnostics":default:return s.ServerType.Semantic}}getTsServerArgs(e,t,n,i,s,l){const d=[];let p,g;if("syntax"===e&&(i.gte(o.default.v401)?d.push("--serverMode","partialSemantic"):d.push("--syntaxOnly")),i.gte(o.default.v250)?d.push("--useInferredProjectPerProjectRoot"):d.push("--useSingleInferredProject"),(t.disableAutomaticTypeAcquisition||"syntax"===e||"diagnostics"===e)&&d.push("--disableAutomaticTypingAcquisition"),"semantic"!==e&&"main"!==e||d.push("--enableTelemetry"),l&&d.push("--cancellationPipeName",l+"*"),u.isLoggingEnabled(t))if((0,c.isWeb)())d.push("--logVerbosity",a.TsServerLogLevel.toString(t.tsServerLogLevel));else{const e=this._logDirectoryProvider.getNewLogDirectory();e&&(p=r.join(e,"tsserver.log"),d.push("--logVerbosity",a.TsServerLogLevel.toString(t.tsServerLogLevel)),d.push("--logFile",p))}t.enableTsServerTracing&&!(0,c.isWeb)()&&(g=this._logDirectoryProvider.getNewLogDirectory(),g&&d.push("--traceDirectory",g));const h=(0,c.isWeb)()?[]:this._pluginPathsProvider.getPluginPaths();if(s.plugins.length){d.push("--globalPlugins",s.plugins.map((e=>e.name)).join(","));const e=n.path===this._versionProvider.defaultVersion.path;for(const t of s.plugins)(e||t.enableForWorkspaceTypeScriptVersions)&&h.push((0,c.isWeb)()?t.uri.toString():t.uri.fsPath)}return 0!==h.length&&d.push("--pluginProbeLocations",h.join(",")),t.npmLocation&&!(0,c.isWeb)()&&d.push("--npmLocation",`"${t.npmLocation}"`),d.push("--locale",u.getTsLocale(t)),d.push("--noGetErrOnBackgroundUpdate"),d.push("--validateDefaultNpmLocation"),{args:d,tsServerLogFile:p,tsServerTraceDirectory:g}}static isLoggingEnabled(e){return e.tsServerLogLevel!==a.TsServerLogLevel.Off}static getTsLocale(e){return e.locale?e.locale:i.env.language}}t.TypeScriptServerSpawner=u},7174:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeScriptVersionManager=void 0;const r=n(7549),i=n(189),s=n(7544),o=n(4009),a=i.loadMessageBundle(),c="typescript.useWorkspaceTsdk",l="typescript.suppressPromptWorkspaceTsdk";class u extends o.Disposable{constructor(e,t,n){if(super(),this.configuration=e,this.versionProvider=t,this.workspaceState=n,this._onDidPickNewVersion=this._register(new r.EventEmitter),this.onDidPickNewVersion=this._onDidPickNewVersion.event,this._currentVersion=this.versionProvider.defaultVersion,this.useWorkspaceTsdkSetting)if(r.workspace.isTrusted){const e=this.versionProvider.localVersion;e&&(this._currentVersion=e)}else this._disposables.push(r.workspace.onDidGrantWorkspaceTrust((()=>{this.versionProvider.localVersion&&this.updateActiveVersion(this.versionProvider.localVersion)})));this.isInPromptWorkspaceTsdkState(e)&&(0,s.setImmediate)((()=>{this.promptUseWorkspaceTsdk()}))}updateConfiguration(e){const t=this.configuration;this.configuration=e,!this.isInPromptWorkspaceTsdkState(t)&&this.isInPromptWorkspaceTsdkState(e)&&this.promptUseWorkspaceTsdk()}get currentVersion(){return this._currentVersion}reset(){this._currentVersion=this.versionProvider.bundledVersion}async promptUserForVersion(){return(await r.window.showQuickPick([this.getBundledPickItem(),...this.getLocalPickItems(),{kind:r.QuickPickItemKind.Separator,label:"",run:()=>{}},d],{placeHolder:a("selectTsVersion","Select the TypeScript version used for JavaScript and TypeScript language features")}))?.run()}getBundledPickItem(){const e=this.versionProvider.defaultVersion;return{label:(this.useWorkspaceTsdkSetting&&r.workspace.isTrusted?"":"• ")+a("useVSCodeVersionOption","Use VS Code's Version"),description:e.displayName,detail:e.pathLabel,run:async()=>{await this.workspaceState.update(c,!1),this.updateActiveVersion(e)}}}getLocalPickItems(){return this.versionProvider.localVersions.map((e=>({label:(this.useWorkspaceTsdkSetting&&r.workspace.isTrusted&&this.currentVersion.eq(e)?"• ":"")+a("useWorkspaceVersionOption","Use Workspace Version"),description:e.displayName,detail:e.pathLabel,run:async()=>{if(await r.workspace.requestWorkspaceTrust()){await this.workspaceState.update(c,!0);const t=r.workspace.getConfiguration("typescript");await t.update("tsdk",e.pathLabel,!1),this.updateActiveVersion(e)}}})))}async promptUseWorkspaceTsdk(){const e=this.versionProvider.localVersion;if(void 0===e)throw new Error("Could not prompt to use workspace TypeScript version because no workspace version is specified");const t=a("allow","Allow"),n=a("dismiss","Dismiss"),i=a("suppress prompt","Never in this Workspace"),s=await r.window.showInformationMessage(a("promptUseWorkspaceTsdk","This workspace contains a TypeScript version. Would you like to use the workspace TypeScript version for TypeScript and JavaScript language features?"),t,n,i);s===t?(await this.workspaceState.update(c,!0),this.updateActiveVersion(e)):s===i&&await this.workspaceState.update(l,!0)}updateActiveVersion(e){const t=this.currentVersion;this._currentVersion=e,t.eq(e)||this._onDidPickNewVersion.fire()}get useWorkspaceTsdkSetting(){return this.workspaceState.get(c,!1)}get suppressPromptWorkspaceTsdkSetting(){return this.workspaceState.get(l,!1)}isInPromptWorkspaceTsdkState(e){return null!==e.localTsdk&&!0===e.enablePromptUseWorkspaceTsdk&&!1===this.suppressPromptWorkspaceTsdkSetting&&!1===this.useWorkspaceTsdkSetting}}t.TypeScriptVersionManager=u;const d={label:a("learnMore","Learn more about managing TypeScript versions"),description:"",run:()=>{r.env.openExternal(r.Uri.parse("https://go.microsoft.com/fwlink/?linkid=839919"))}}},371:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeScriptVersion=t.localize=void 0;const r=n(189);t.localize=r.loadMessageBundle(),t.TypeScriptVersion=class{constructor(e,t,n,r){this.source=e,this.path=t,this.apiVersion=n,this._pathLabel=r}get tsServerPath(){return this.path}get pathLabel(){return this._pathLabel??this.path}get isValid(){return void 0!==this.apiVersion}eq(e){return this.path===e.path&&(this.apiVersion===e.apiVersion||!(!this.apiVersion||!e.apiVersion)&&this.apiVersion.eq(e.apiVersion))}get displayName(){const e=this.apiVersion;return e?e.displayName:(0,t.localize)("couldNotLoadTsVersion","Could not load the TypeScript version at this path")}}},5662:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7549),i=n(7296),s=n(1658),o=n(4156),a=n(7169),c=n(8892),l=n(8390),u=n(6929),d=n(4009),p=n(1395),g=n(309),h=n(6590),f=n(231),m=n(9292),v=new Set([...p.variableDeclaredButNeverUsed,...p.propertyDeclaretedButNeverUsed,...p.allImportsAreUnused,...p.unreachableCode,...p.unusedLabel,...p.fallThroughCaseInSwitch,...p.notAllCodePathsReturnAValue]);class y extends d.Disposable{constructor(e,t,o,u,d){super(),this.languages=[],this.languagePerId=new Map,this.reportStyleCheckAsWarnings=!0,this.commandManager=u.commandManager;const p=this.getAllModeIds(e,u.pluginManager);this.client=this._register(new a.default(t,o,u,p)),this.client.onDiagnosticsReceived((({kind:e,resource:t,diagnostics:n})=>{this.diagnosticsReceived(e,t,n)}),null,this._disposables),this.client.onConfigDiagnosticsReceived((e=>this.configFileDiagnosticsReceived(e)),null,this._disposables),this.client.onResendModelsRequested((()=>this.populateService()),null,this._disposables),this._register(new l.VersionStatus(this.client)),this._register(new c.IntellisenseStatus(this.client,u.commandManager,u.activeJsTsEditorTracker)),this._register(new m.AtaProgressReporter(this.client)),this.typingsStatus=this._register(new m.default(this.client)),this._register(g.create(this.client)),this.fileConfigurationManager=this._register(new i.default(this.client,o));for(const t of e){const e=new s.default(this.client,t,this.commandManager,this.client.telemetryReporter,this.typingsStatus,this.fileConfigurationManager,d);this.languages.push(e),this._register(e),this.languagePerId.set(t.id,e)}Promise.resolve().then((()=>n(1347))).then((e=>this._register(e.register(this.client,this.fileConfigurationManager,(e=>this.handles(e)))))),Promise.resolve().then((()=>n(8504))).then((e=>this._register(e.register(this.client,p)))),this.client.ensureServiceStarted(),this.client.onReady((()=>{const e=new Set;for(const t of u.pluginManager.plugins)if(t.configNamespace&&t.languages.length)this.registerExtensionLanguageProvider({id:t.configNamespace,languageIds:Array.from(t.languages),diagnosticSource:"ts-plugin",diagnosticLanguage:1,diagnosticOwner:"typescript",isExternal:!0,standardFileExtensions:[]},d);else for(const n of t.languages)e.add(n);e.size&&this.registerExtensionLanguageProvider({id:"typescript-plugins",languageIds:Array.from(e.values()),diagnosticSource:"ts-plugin",diagnosticLanguage:1,diagnosticOwner:"typescript",isExternal:!0,standardFileExtensions:[]},d)})),this.client.onTsServerStarted((()=>{this.triggerAllDiagnostics()})),r.workspace.onDidChangeConfiguration(this.configurationChanged,this,this._disposables),this.configurationChanged(),this._register(new h.LogLevelMonitor(t))}registerExtensionLanguageProvider(e,t){const n=new s.default(this.client,e,this.commandManager,this.client.telemetryReporter,this.typingsStatus,this.fileConfigurationManager,t);this.languages.push(n),this._register(n),this.languagePerId.set(e.id,n)}getAllModeIds(e,t){return[...e.map((e=>e.languageIds)),...t.plugins.map((e=>e.languages))].flat()}get serviceClient(){return this.client}reloadProjects(){this.client.executeWithoutWaitingForResponse("reloadProjects",null),this.triggerAllDiagnostics()}async handles(e){return!!await this.findLanguage(e)||this.client.bufferSyncSupport.handles(e)}configurationChanged(){const e=r.workspace.getConfiguration("typescript");this.reportStyleCheckAsWarnings=e.get("reportStyleChecksAsWarnings",!0)}async findLanguage(e){try{for(const t of this.languages)if(t.handlesUri(e))return t;const t=await r.workspace.openTextDocument(e);return this.languages.find((e=>e.handlesDocument(t)))}catch{return}}triggerAllDiagnostics(){for(const e of this.languagePerId.values())e.triggerAllDiagnostics()}populateService(){this.fileConfigurationManager.reset();for(const e of this.languagePerId.values())e.reInitialize()}async diagnosticsReceived(e,t,n){const r=await this.findLanguage(t);r&&r.diagnosticsReceived(e,t,this.createMarkerDatas(n,r.diagnosticSource))}configFileDiagnosticsReceived(e){const t=e.body;t&&t.diagnostics&&t.configFile&&this.findLanguage(this.client.toResource(t.configFile)).then((e=>{e&&e.configFileDiagnosticsReceived(this.client.toResource(t.configFile),t.diagnostics.map((n=>{const i=n.start&&n.end?f.Range.fromTextSpan(n):new r.Range(0,0,0,1),s=new r.Diagnostic(i,t.diagnostics[0].text,this.getDiagnosticSeverity(n));return s.source=e.diagnosticSource,s})))}))}createMarkerDatas(e,t){return e.map((e=>this.tsDiagnosticToVsDiagnostic(e,t)))}tsDiagnosticToVsDiagnostic(e,t){const{start:n,end:i,text:s}=e,o=new r.Range(f.Position.fromLocation(n),f.Position.fromLocation(i)),a=new r.Diagnostic(o,s,this.getDiagnosticSeverity(e));a.source=e.source||t,e.code&&(a.code=e.code);const c=e.relatedInformation;c&&(a.relatedInformation=(0,u.coalesce)(c.map((e=>{const t=e.span;if(t)return new r.DiagnosticRelatedInformation(f.Location.fromTextSpan(this.client.toResource(t.file),t),e.message)}))));const l=[];e.reportsUnnecessary&&l.push(r.DiagnosticTag.Unnecessary),e.reportsDeprecated&&l.push(r.DiagnosticTag.Deprecated),a.tags=l.length?l:void 0;const d=a;return d.reportUnnecessary=e.reportsUnnecessary,d.reportDeprecated=e.reportsDeprecated,d}getDiagnosticSeverity(e){if(this.reportStyleCheckAsWarnings&&this.isStyleCheckDiagnostic(e.code)&&e.category===o.DiagnosticCategory.error)return r.DiagnosticSeverity.Warning;switch(e.category){case o.DiagnosticCategory.error:return r.DiagnosticSeverity.Error;case o.DiagnosticCategory.warning:return r.DiagnosticSeverity.Warning;case o.DiagnosticCategory.suggestion:return r.DiagnosticSeverity.Hint;default:return r.DiagnosticSeverity.Error}}isStyleCheckDiagnostic(e){return"number"==typeof e&&v.has(e)}}t.default=y},5162:(e,t)=>{"use strict";var n,r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientCapabilities=t.ClientCapability=t.ServerResponse=t.ServerType=void 0,(i=t.ServerType||(t.ServerType={})).Syntax="syntax",i.Semantic="semantic",(r=t.ServerResponse||(t.ServerResponse={})).Cancelled=class{constructor(e){this.reason=e,this.type="cancelled"}},r.NoContent={type:"noContent"},r.NoServer={type:"noServer"},(n=t.ClientCapability||(t.ClientCapability={}))[n.Syntax=0]="Syntax",n[n.EnhancedSyntax=1]="EnhancedSyntax",n[n.Semantic=2]="Semantic",t.ClientCapabilities=class{constructor(...e){this.capabilities=new Set(e)}has(e){return this.capabilities.has(e)}}},7169:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1023),i=n(7549),s=n(189),o=n(9283),a=n(4156),c=n(9655),l=n(6040),u=n(5373),d=n(7174),p=n(5162),g=n(9638),h=n(9550),f=n(4009),m=n(6797),v=n(3631),y=n(1339),C=n(5712),S=n(1687),w=n(3815),b=n(1807),x=s.loadMessageBundle();var T;!function(e){e.None={type:0},e.Running=class{constructor(e,t,n,r){this.server=e,this.apiVersion=t,this.tsserverVersion=n,this.languageServiceEnabled=r,this.type=1,this.toCancelOnResourceChange=new Set}updateTsserverVersion(e){this.tsserverVersion=e}updateLanguageServiceEnabled(e){this.languageServiceEnabled=e}},e.Errored=class{constructor(e,t){this.error=e,this.tsServerLogFile=t,this.type=2}}}(T||(T={}));class I extends f.Disposable{constructor(e,t,n,s){let a,l;super(),this.context=e,this.emptyAuthority="ts-nul-authority",this.inMemoryResourcePrefix="^",this.logger=new v.Logger,this.tracer=new w.default(this.logger),this.serverState=T.None,this._isPromptingAfterCrash=!1,this.isRestarting=!1,this.hasServerFatallyCrashedTooManyTimes=!1,this.loadingIndicator=new _,this._onDidChangeCapabilities=this._register(new i.EventEmitter),this.onDidChangeCapabilities=this._onDidChangeCapabilities.event,this._onTsServerStarted=this._register(new i.EventEmitter),this.onTsServerStarted=this._onTsServerStarted.event,this._onDiagnosticsReceived=this._register(new i.EventEmitter),this.onDiagnosticsReceived=this._onDiagnosticsReceived.event,this._onConfigDiagnosticsReceived=this._register(new i.EventEmitter),this.onConfigDiagnosticsReceived=this._onConfigDiagnosticsReceived.event,this._onResendModelsRequested=this._register(new i.EventEmitter),this.onResendModelsRequested=this._onResendModelsRequested.event,this._onProjectLanguageServiceStateChanged=this._register(new i.EventEmitter),this.onProjectLanguageServiceStateChanged=this._onProjectLanguageServiceStateChanged.event,this._onDidBeginInstallTypings=this._register(new i.EventEmitter),this.onDidBeginInstallTypings=this._onDidBeginInstallTypings.event,this._onDidEndInstallTypings=this._register(new i.EventEmitter),this.onDidEndInstallTypings=this._onDidEndInstallTypings.event,this._onTypesInstallerInitializationFailed=this._register(new i.EventEmitter),this.onTypesInstallerInitializationFailed=this._onTypesInstallerInitializationFailed.event,this._onSurveyReady=this._register(new i.EventEmitter),this.onSurveyReady=this._onSurveyReady.event,this.token=0,this.workspaceState=e.workspaceState,this.pluginManager=n.pluginManager,this.logDirectoryProvider=n.logDirectoryProvider,this.cancellerFactory=n.cancellerFactory,this.versionProvider=n.versionProvider,this.processFactory=n.processFactory,this.pathSeparator=r.sep,this.lastStart=Date.now();const p=new Promise(((e,t)=>{a=e,l=t}));this._onReady={promise:p,resolve:a,reject:l},this.numberRestarts=0,this._configuration=n.serviceConfigurationProvider.loadFromWorkspace(),this.versionProvider.updateConfiguration(this._configuration),this.pluginPathsProvider=new C.TypeScriptPluginPathsProvider(this._configuration),this._versionManager=this._register(new d.TypeScriptVersionManager(this._configuration,this.versionProvider,this.workspaceState)),this._register(this._versionManager.onDidPickNewVersion((()=>{this.restartTsServer()}))),this.bufferSyncSupport=new c.default(this,s,t),this.onReady((()=>{this.bufferSyncSupport.listen()})),this.diagnosticsManager=new o.DiagnosticsManager("typescript",t),this.bufferSyncSupport.onDelete((e=>{this.cancelInflightRequestsForResource(e),this.diagnosticsManager.delete(e)}),null,this._disposables),this.bufferSyncSupport.onWillChange((e=>{this.cancelInflightRequestsForResource(e)})),i.workspace.onDidChangeConfiguration((()=>{const e=this._configuration;this._configuration=n.serviceConfigurationProvider.loadFromWorkspace(),this.versionProvider.updateConfiguration(this._configuration),this._versionManager.updateConfiguration(this._configuration),this.pluginPathsProvider.updateConfiguration(this._configuration),this.tracer.updateConfiguration(),1===this.serverState.type&&(this._configuration.implicitProjectConfiguration.isEqualTo(e.implicitProjectConfiguration)||this.setCompilerOptionsForInferredProjects(this._configuration),(0,h.areServiceConfigurationsEqual)(this._configuration,e)||this.restartTsServer())}),this,this._disposables),this.telemetryReporter=this._register(new S.VSCodeTelemetryReporter((()=>1===this.serverState.type&&this.serverState.tsserverVersion?this.serverState.tsserverVersion:this.apiVersion.fullVersionString))),this.typescriptServerSpawner=new u.TypeScriptServerSpawner(this.versionProvider,this._versionManager,this.logDirectoryProvider,this.pluginPathsProvider,this.logger,this.telemetryReporter,this.tracer,this.processFactory),this._register(this.pluginManager.onDidUpdateConfig((e=>{this.configurePlugin(e.pluginId,e.config)}))),this._register(this.pluginManager.onDidChangePlugins((()=>{this.restartTsServer()})))}get capabilities(){return 1===this._configuration.useSyntaxServer||(0,y.isWeb)()?new p.ClientCapabilities(p.ClientCapability.Syntax,p.ClientCapability.EnhancedSyntax):this.apiVersion.gte(g.default.v400)?new p.ClientCapabilities(p.ClientCapability.Syntax,p.ClientCapability.EnhancedSyntax,p.ClientCapability.Semantic):new p.ClientCapabilities(p.ClientCapability.Syntax,p.ClientCapability.Semantic)}cancelInflightRequestsForResource(e){if(1===this.serverState.type)for(const t of this.serverState.toCancelOnResourceChange)t.resource.toString()===e.toString()&&t.cancel()}get configuration(){return this._configuration}dispose(){super.dispose(),this.bufferSyncSupport.dispose(),1===this.serverState.type&&this.serverState.server.kill(),this.loadingIndicator.reset()}restartTsServer(e=!1){1===this.serverState.type&&(this.info("Killing TS Server"),this.isRestarting=!0,this.serverState.server.kill()),e&&(this.hasServerFatallyCrashedTooManyTimes=!1,this.numberRestarts=0,this.lastStart=Date.now()),this.serverState=this.startService(!0)}get apiVersion(){return 1===this.serverState.type?this.serverState.apiVersion:g.default.defaultVersion}onReady(e){return this._onReady.promise.then(e)}info(e,t){this.logger.info(e,t)}error(e,t){this.logger.error(e,t)}logTelemetry(e,t){this.telemetryReporter.logTelemetry(e,t)}ensureServiceStarted(){1!==this.serverState.type&&this.startService()}startService(e=!1){if(this.info("Starting TS Server"),this.isDisposed)return this.info("Not starting server: disposed"),T.None;if(this.hasServerFatallyCrashedTooManyTimes)return this.info("Not starting server: too many crashes"),T.None;let t=this._versionManager.currentVersion;t.isValid||(i.window.showWarningMessage(x("noServerFound","The path {0} doesn't point to a valid tsserver install. Falling back to bundled TypeScript version.",t.path)),this._versionManager.reset(),t=this._versionManager.currentVersion),this.info(`Using tsserver from: ${t.path}`);const n=t.apiVersion||g.default.defaultVersion,r=++this.token,s=this.typescriptServerSpawner.spawn(t,this.capabilities,this.configuration,this.pluginManager,this.cancellerFactory,{onFatalError:(e,t)=>this.fatalError(e,t)});return this.serverState=new T.Running(s,n,void 0,!0),this.lastStart=Date.now(),this.logTelemetry("tsserver.spawned",{localTypeScriptVersion:this.versionProvider.localVersion?this.versionProvider.localVersion.displayName:"",typeScriptVersionSource:t.source}),s.onError((e=>{this.token===r&&(e&&i.window.showErrorMessage(x("serverExitedWithError","TypeScript language server exited with error. Error message is: {0}",e.message||e.name)),this.serverState=new T.Errored(e,s.tsServerLogFile),this.error("TSServer errored with error.",e),s.tsServerLogFile&&this.error(`TSServer log file: ${s.tsServerLogFile}`),this.logTelemetry("tsserver.error"),this.serviceExited(!1))})),s.onExit((e=>{if(this.token!==r)return;const{code:t,signal:n}=e;null==t?this.info(`TSServer exited. Signal: ${n}`):(this.error(`TSServer exited with code: ${t}. Signal: ${n}`),this.logTelemetry("tsserver.exitWithCode",{code:t,signal:n??void 0})),s.tsServerLogFile&&this.info(`TSServer log file: ${s.tsServerLogFile}`),this.serviceExited(!this.isRestarting),this.isRestarting=!1})),s.onEvent((e=>this.dispatchEvent(e))),n.gte(g.default.v300)&&this.capabilities.has(p.ClientCapability.Semantic)&&this.loadingIndicator.startedLoadingProject(void 0),this.serviceStarted(e),this._onReady.resolve(),this._onTsServerStarted.fire({version:t,usedApiVersion:n}),this._onDidChangeCapabilities.fire(),this.serverState}async showVersionPicker(){this._versionManager.promptUserForVersion()}async openTsServerLogFile(){if(this._configuration.tsServerLogLevel===h.TsServerLogLevel.Off)return i.window.showErrorMessage(x("typescript.openTsServerLog.loggingNotEnabled","TS Server logging is off. Please set `typescript.tsserver.log` and restart the TS server to enable logging"),{title:x("typescript.openTsServerLog.enableAndReloadOption","Enable logging and restart TS server")}).then((e=>{if(e)return i.workspace.getConfiguration().update("typescript.tsserver.log","verbose",!0).then((()=>{this.restartTsServer()}))})),!1;if(1!==this.serverState.type||!this.serverState.server.tsServerLogFile)return i.window.showWarningMessage(x("typescript.openTsServerLog.noLogFile","TS Server has not started logging.")),!1;try{const e=await i.workspace.openTextDocument(i.Uri.file(this.serverState.server.tsServerLogFile));return await i.window.showTextDocument(e),!0}catch{}try{return await i.commands.executeCommand("revealFileInOS",i.Uri.file(this.serverState.server.tsServerLogFile)),!0}catch{return i.window.showWarningMessage(x("openTsServerLog.openFileFailedFailed","Could not open TS Server log file")),!1}}serviceStarted(e){this.bufferSyncSupport.reset();const t=this.apiVersion.gte(g.default.v380)?this.configuration.watchOptions:void 0,n={hostInfo:"vscode",preferences:{providePrefixAndSuffixTextForRename:!0,allowRenameOfImportPath:!0,includePackageJsonAutoImports:this._configuration.includePackageJsonAutoImports},watchOptions:t};this.executeWithoutWaitingForResponse("configure",n),this.setCompilerOptionsForInferredProjects(this._configuration),e&&(this._onResendModelsRequested.fire(),this.bufferSyncSupport.reinitialize(),this.bufferSyncSupport.requestAllDiagnostics());for(const[e,t]of this.pluginManager.configurations())this.configurePlugin(e,t)}setCompilerOptionsForInferredProjects(e){const t={options:this.getCompilerOptionsForInferredProjects(e)};this.executeWithoutWaitingForResponse("compilerOptionsForInferredProjects",t)}getCompilerOptionsForInferredProjects(e){return{...(0,b.inferredProjectCompilerOptions)(0,e),allowJs:!0,allowSyntheticDefaultImports:!0,allowNonTsExtensions:!0,resolveJsonModule:!0}}serviceExited(e){this.loadingIndicator.reset();const t=this.serverState;if(this.serverState=T.None,e){const e=Date.now()-this.lastStart;this.numberRestarts++;let n=!0;const r={title:x("serverDiedReportIssue","Report Issue")};let s;this.numberRestarts>5?(this.numberRestarts=0,e<1e4?(this.lastStart=Date.now(),n=!1,this.hasServerFatallyCrashedTooManyTimes=!0,s=i.window.showErrorMessage(x("serverDiedAfterStart","The TypeScript language service died 5 times right after it got started. The service will not be restarted."),r),this.logTelemetry("serviceExited")):e<3e5&&(this.lastStart=Date.now(),s=i.window.showWarningMessage(x("serverDied","The TypeScript language service died unexpectedly 5 times in the last 5 Minutes."),r))):["vscode-insiders","code-oss"].includes(i.env.uriScheme)&&!this._isPromptingAfterCrash&&2===t.type&&t.error instanceof l.TypeScriptServerError&&(this.numberRestarts=0,this._isPromptingAfterCrash=!0,s=i.window.showWarningMessage(x("serverDiedOnce","The TypeScript language service died unexpectedly."),r)),s?.then((e=>{if(this._isPromptingAfterCrash=!1,e===r){const e=this.versionProvider.bundledVersion.apiVersion;if(e&&this.apiVersion.lt(e))i.window.showWarningMessage(x("usingOldTsVersion.title","Please update your TypeScript version"),{modal:!0,detail:x("usingOldTsVersion.detail","The workspace is using an old version of TypeScript ({0}).\n\nBefore reporting an issue, please update the workspace to use the latest stable TypeScript release to make sure the bug has not already been fixed.",2===t.type&&t.error instanceof l.TypeScriptServerError?t.error.version.apiVersion?.displayName:void 0),useCustom:!0});else{const e=2===t.type&&t.error instanceof l.TypeScriptServerError?function(e,t){if(!e.serverStack||!e.serverMessage)return;const n=["❗️❗️❗️ Please fill in the sections below to help us diagnose the issue ❗️❗️❗️",`**TypeScript Version:** ${e.version.apiVersion?.fullVersionString}`,"**Steps to reproduce crash**\n\n1.\n2.\n3."];return t?n.push(`**TS Server Log**\n\n❗️ Please review and upload this log file to help us diagnose this crash:\n\n\`${t}\`\n\nThe log file may contain personal data, including full paths and source code from your workspace. You can scrub the log file to remove paths or other personal information.\n`):n.push('**TS Server Log**\n\n❗️Server logging disabled. To help us fix crashes like this, please enable logging by setting:\n\n```json\n"typescript.tsserver.log": "verbose"\n```\n\nAfter enabling this setting, future crash reports will include the server log.'),n.push(`**TS Server Error Stack**\n\nServer: \`${e.serverId}\`\n\n\`\`\`\n${e.serverStack}\n\`\`\``),{extensionId:"vscode.typescript-language-features",issueTitle:`TS Server fatal error:  ${e.serverMessage}`,issueBody:n.join("\n\n")}}(t.error,t.tsServerLogFile):void 0;i.commands.executeCommand("workbench.action.openIssueReporter",e)}}})),n&&this.startService(!0)}}normalizedPath(e){if(!m.disabledSchemes.has(e.scheme))switch(e.scheme){case m.file:{let t=e.fsPath;if(!t)return;return t=r.normalize(t),t.replace(new RegExp("\\"+this.pathSeparator,"g"),"/")}default:return this.inMemoryResourcePrefix+"/"+e.scheme+"/"+(e.authority||this.emptyAuthority)+(e.path.startsWith("/")?e.path:"/"+e.path)+(e.fragment?"#"+e.fragment:"")}}toPath(e){return this.normalizedPath(e)}toOpenedFilePath(e,t={}){if(this.bufferSyncSupport.ensureHasBuffer(e.uri))return this.toPath(e.uri);t.suppressAlertOnFailure||m.disabledSchemes.has(e.uri.scheme)||console.error(`Unexpected resource ${e.uri}`)}hasCapabilityForResource(e,t){if(!this.capabilities.has(t))return!1;switch(t){case p.ClientCapability.Semantic:return m.semanticSupportedSchemes.includes(e.scheme);case p.ClientCapability.Syntax:case p.ClientCapability.EnhancedSyntax:return!0}}toResource(e){if((0,y.isWeb)()&&e.startsWith("/lib.")&&e.endsWith(".d.ts"))return i.Uri.joinPath(this.context.extensionUri,"dist","browser","typescript",e.slice(1));if(e.startsWith(this.inMemoryResourcePrefix)){const t=e.match(/^\^\/([^\/]+)\/([^\/]*)\/(.+)$/);if(t){const e=i.Uri.parse(t[1]+"://"+(t[2]===this.emptyAuthority?"":t[2])+"/"+t[3]);return this.bufferSyncSupport.toVsCodeResource(e)}}return this.bufferSyncSupport.toResource(e)}getWorkspaceRootForResource(e){const t=i.workspace.workspaceFolders?Array.from(i.workspace.workspaceFolders):void 0;if(!t?.length)return e.scheme===m.officeScript?"/":void 0;switch(e.scheme){case m.file:case m.untitled:case m.vscodeNotebookCell:case m.memFs:case m.vscodeVfs:case m.officeScript:for(const n of t.sort(((e,t)=>e.uri.fsPath.length-t.uri.fsPath.length)))if(e.fsPath.startsWith(n.uri.fsPath+r.sep))return n.uri.fsPath;return t[0].uri.fsPath;default:return}}execute(e,t,n,r){let s;if(r?.cancelOnResourceChange){const o=this.serverState;if(1===o.type){const a=new i.CancellationTokenSource;n.onCancellationRequested((()=>a.cancel()));const c={resource:r.cancelOnResourceChange,cancel:()=>a.cancel()};o.toCancelOnResourceChange.add(c),s=this.executeImpl(e,t,{isAsync:!1,token:a.token,expectsResult:!0,...r}),s[0].finally((()=>{o.toCancelOnResourceChange.delete(c),a.dispose()}))}}return s||(s=this.executeImpl(e,t,{isAsync:!1,token:n,expectsResult:!0,...r})),r?.nonRecoverable&&s[0].catch((t=>this.fatalError(e,t))),"updateOpen"===e&&Promise.all(s).then((()=>{this.loadingIndicator.reset()})),s[0]}executeWithoutWaitingForResponse(e,t){this.executeImpl(e,t,{isAsync:!1,token:void 0,expectsResult:!1})}executeAsync(e,t,n){return this.executeImpl(e,t,{isAsync:!0,token:n,expectsResult:!0})[0]}executeImpl(e,t,n){const r=this.serverState;return 1===r.type?(this.bufferSyncSupport.beforeCommand(e),r.server.executeImpl(e,t,n)):[Promise.resolve(p.ServerResponse.NoServer)]}interruptGetErr(e){return this.bufferSyncSupport.interruptGetErr(e)}fatalError(e,t){if(this.logTelemetry("fatalError",{...t instanceof l.TypeScriptServerError?t.telemetry:{command:e}}),console.error(`A non-recoverable error occurred while executing tsserver command: ${e}`),t instanceof l.TypeScriptServerError&&t.serverErrorText&&console.error(t.serverErrorText),1===this.serverState.type){this.info("Killing TS Server");const e=this.serverState.server.tsServerLogFile;this.serverState.server.kill(),t instanceof l.TypeScriptServerError&&(this.serverState=new T.Errored(t,e))}}dispatchEvent(e){switch(e.event){case a.EventName.syntaxDiag:case a.EventName.semanticDiag:case a.EventName.suggestionDiag:{this.loadingIndicator.reset();const t=e;t.body&&t.body.diagnostics&&this._onDiagnosticsReceived.fire({kind:k(e),resource:this.toResource(t.body.file),diagnostics:t.body.diagnostics});break}case a.EventName.configFileDiag:this._onConfigDiagnosticsReceived.fire(e);break;case a.EventName.telemetry:{const t=e.body;this.dispatchTelemetryEvent(t);break}case a.EventName.projectLanguageServiceState:{const t=e.body;1===this.serverState.type&&this.serverState.updateLanguageServiceEnabled(t.languageServiceEnabled),this._onProjectLanguageServiceStateChanged.fire(t);break}case a.EventName.projectsUpdatedInBackground:{this.loadingIndicator.reset();const t=e.body.openFiles.map((e=>this.toResource(e)));this.bufferSyncSupport.getErr(t);break}case a.EventName.beginInstallTypes:this._onDidBeginInstallTypings.fire(e.body);break;case a.EventName.endInstallTypes:this._onDidEndInstallTypings.fire(e.body);break;case a.EventName.typesInstallerInitializationFailed:this._onTypesInstallerInitializationFailed.fire(e.body);break;case a.EventName.surveyReady:this._onSurveyReady.fire(e.body);break;case a.EventName.projectLoadingStart:this.loadingIndicator.startedLoadingProject(e.body.projectName);break;case a.EventName.projectLoadingFinish:this.loadingIndicator.finishedLoadingProject(e.body.projectName)}}dispatchTelemetryEvent(e){const t=Object.create(null);switch(e.telemetryEventName){case"typingsInstalled":{const n=e.payload;t.installedPackages=n.installedPackages,"boolean"==typeof n.installSuccess&&(t.installSuccess=n.installSuccess.toString()),"string"==typeof n.typingsInstallerVersion&&(t.typingsInstallerVersion=n.typingsInstallerVersion);break}default:{const n=e.payload;n&&Object.keys(n).forEach((e=>{try{n.hasOwnProperty(e)&&(t[e]="string"==typeof n[e]?n[e]:JSON.stringify(n[e]))}catch(e){}}));break}}"projectInfo"===e.telemetryEventName&&1===this.serverState.type&&this.serverState.updateTsserverVersion(t.version),this.logTelemetry(e.telemetryEventName,t)}configurePlugin(e,t){this.apiVersion.gte(g.default.v314)&&this.executeWithoutWaitingForResponse("configurePlugin",{pluginName:e,configuration:t})}}function k(e){switch(e.event){case"syntaxDiag":return 0;case"semanticDiag":return 1;case"suggestionDiag":return 2}throw new Error("Unknown dignostics kind")}t.default=I;class _ extends f.Disposable{reset(){this._task&&(this._task.resolve(),this._task=void 0)}startedLoadingProject(e){this.reset(),i.window.withProgress({location:i.ProgressLocation.Window,title:x("serverLoading.progress","Initializing JS/TS language features")},(()=>new Promise((t=>{this._task={project:e,resolve:t}}))))}finishedLoadingProject(e){this._task&&this._task.project===e&&(this._task.resolve(),this._task=void 0)}}},8892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntellisenseStatus=void 0;const r=n(7549),i=n(189),s=n(5162),o=n(4009),a=n(3683),c=n(1807),l=i.loadMessageBundle();var u;!function(e){e.None=Object.freeze({type:0}),e.SyntaxOnly=Object.freeze({type:3}),e.Pending=class{constructor(e,t){this.resource=e,this.projectType=t,this.type=1,this.cancellation=new r.CancellationTokenSource}},e.Resolved=class{constructor(e,t,n){this.resource=e,this.projectType=t,this.configFile=n,this.type=2}}}(u||(u={}));class d extends o.Disposable{constructor(e,t,n){super(),this._client=e,this._activeTextEditorManager=n,this.openOpenConfigCommandId="_typescript.openConfig",this.createConfigCommandId="_typescript.createConfig",this._ready=!1,this._state=u.None,t.register({id:this.openOpenConfigCommandId,execute:async(e,t)=>{2===this._state.type?await(0,c.openProjectConfigOrPromptToCreate)(t,this._client,e,this._state.configFile):1===this._state.type&&await(0,c.openProjectConfigForFile)(t,this._client,this._state.resource)}}),t.register({id:this.createConfigCommandId,execute:async(e,t)=>{await(0,c.openOrCreateConfig)(t,e,this._client.configuration)}}),n.onDidChangeActiveJsTsEditor(this.updateStatus,this,this._disposables),this._client.onReady((()=>{this._ready=!0,this.updateStatus()}))}dispose(){super.dispose(),this._statusItem?.dispose()}async updateStatus(){const e=this._activeTextEditorManager.activeJsTsEditor?.document;if(!e||!(0,a.isSupportedLanguageMode)(e))return void this.updateState(u.None);if(!this._client.hasCapabilityForResource(e.uri,s.ClientCapability.Semantic))return void this.updateState(u.SyntaxOnly);const t=this._client.toOpenedFilePath(e,{suppressAlertOnFailure:!0});if(!t)return void this.updateState(u.None);if(!this._ready)return;const n=(0,a.isTypeScriptDocument)(e)?0:1,r=new u.Pending(e.uri,n);this.updateState(r);const i=await this._client.execute("projectInfo",{file:t,needFileNameList:!1},r.cancellation.token);"response"===i.type&&i.body&&this._state===r&&this.updateState(new u.Resolved(e.uri,n,i.body.configFileName))}updateState(e){if(this._state!==e)switch(1===this._state.type&&(this._state.cancellation.cancel(),this._state.cancellation.dispose()),this._state=e,this._state.type){case 0:this._statusItem?.dispose(),this._statusItem=void 0;break;case 1:{const e=this.ensureStatusItem();e.severity=r.LanguageStatusSeverity.Information,e.text=l("pending.detail","Loading IntelliSense status"),e.detail=void 0,e.command=void 0,e.busy=!0;break}case 2:{const e=0===this._state.projectType?l("resolved.detail.noTsConfig","No tsconfig"):l("resolved.detail.noJsConfig","No jsconfig"),t=this._client.getWorkspaceRootForResource(this._state.resource);if(!t)return void(this._statusItem&&(this._statusItem.text=e,this._statusItem.detail=r.workspace.workspaceFolders?l("resolved.detail.notInOpenedFolder","File is not part opened folders"):l("resolved.detail.noOpenedFolders","No opened folders"),this._statusItem.busy=!1));const n=this.ensureStatusItem();n.busy=!1,n.detail=void 0,n.severity=r.LanguageStatusSeverity.Information,(0,c.isImplicitProjectConfigFile)(this._state.configFile)?(n.text=e,n.detail=void 0,n.command={command:this.createConfigCommandId,title:0===this._state.projectType?l("resolved.command.title.createTsconfig","Create tsconfig"):l("resolved.command.title.createJsconfig","Create jsconfig"),arguments:[t]}):(n.text=r.workspace.asRelativePath(this._state.configFile),n.detail=void 0,n.command={command:this.openOpenConfigCommandId,title:l("resolved.command.title.open","Open config file"),arguments:[t]});break}case 3:{const e=this.ensureStatusItem();e.severity=r.LanguageStatusSeverity.Warning,e.text=l("syntaxOnly.text","Partial Mode"),e.detail=l("syntaxOnly.detail","Project Wide IntelliSense not available"),e.busy=!1,e.command={title:l("syntaxOnly.command.title.learnMore","Learn More"),command:"vscode.open",arguments:[r.Uri.parse("https://aka.ms/vscode/jsts/partial-mode")]};break}}}ensureStatusItem(){return this._statusItem||(this._statusItem=r.languages.createLanguageStatusItem("typescript.projectStatus",a.jsTsLanguageModes),this._statusItem.name=l("statusItem.name","JS/TS IntelliSense Status")),this._statusItem}}t.IntellisenseStatus=d},8390:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VersionStatus=void 0;const r=n(7549),i=n(189),s=n(3276),o=n(4009),a=n(3683),c=i.loadMessageBundle();class l extends o.Disposable{constructor(e){super(),this._client=e,this._statusItem=this._register(r.languages.createLanguageStatusItem("typescript.version",a.jsTsLanguageModes)),this._statusItem.name=c("versionStatus.name","TypeScript Version"),this._statusItem.detail=c("versionStatus.detail","TypeScript Version"),this._register(this._client.onTsServerStarted((({version:e})=>this.onDidChangeTypeScriptVersion(e))))}onDidChangeTypeScriptVersion(e){this._statusItem.text=e.displayName,this._statusItem.command={command:s.SelectTypeScriptVersionCommand.id,title:c("versionStatus.command","Select Version"),tooltip:e.path}}}t.VersionStatus=l},5372:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveJsTsEditorTracker=void 0;const r=n(7549),i=n(4009),s=n(2503),o=n(3683);class a extends i.Disposable{constructor(){super(),this._onDidChangeActiveJsTsEditor=this._register(new r.EventEmitter),this.onDidChangeActiveJsTsEditor=this._onDidChangeActiveJsTsEditor.event,r.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,this._disposables),r.window.onDidChangeVisibleTextEditors((()=>{this._activeJsTsEditor&&(r.window.visibleTextEditors.some((e=>e===this._activeJsTsEditor))||this.onDidChangeActiveTextEditor(void 0))}),this,this._disposables),this.onDidChangeActiveTextEditor(r.window.activeTextEditor)}get activeJsTsEditor(){return this._activeJsTsEditor}onDidChangeActiveTextEditor(e){e!==this._activeJsTsEditor&&(e&&!e.viewColumn||(e&&this.isManagedFile(e)?this._activeJsTsEditor=e:this._activeJsTsEditor=void 0,this._onDidChangeActiveJsTsEditor.fire(this._activeJsTsEditor)))}isManagedFile(e){return this.isManagedScriptFile(e)||this.isManagedConfigFile(e)}isManagedScriptFile(e){return(0,o.isSupportedLanguageMode)(e.document)}isManagedConfigFile(e){return(0,s.isJsConfigOrTsConfigFileName)(e.document.fileName)}}t.ActiveJsTsEditorTracker=a},9638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6625),i=n(189).loadMessageBundle();class s{constructor(e,t,n){this.displayName=e,this.version=t,this.fullVersionString=n}static fromSimpleString(e){return new s(e,e,e)}static fromVersionString(e){let t=r.valid(e);if(!t)return new s(i("invalidVersion","invalid version"),"1.0.0","1.0.0");const n=e.indexOf("-");return n>=0&&(t=t.substr(0,n)),new s(e,t,e)}eq(e){return r.eq(this.version,e.version)}gte(e){return r.gte(this.version,e.version)}lt(e){return!this.gte(e)}}t.default=s,s.defaultVersion=s.fromSimpleString("1.0.0"),s.v240=s.fromSimpleString("2.4.0"),s.v250=s.fromSimpleString("2.5.0"),s.v260=s.fromSimpleString("2.6.0"),s.v270=s.fromSimpleString("2.7.0"),s.v280=s.fromSimpleString("2.8.0"),s.v290=s.fromSimpleString("2.9.0"),s.v291=s.fromSimpleString("2.9.1"),s.v300=s.fromSimpleString("3.0.0"),s.v310=s.fromSimpleString("3.1.0"),s.v314=s.fromSimpleString("3.1.4"),s.v320=s.fromSimpleString("3.2.0"),s.v333=s.fromSimpleString("3.3.3"),s.v340=s.fromSimpleString("3.4.0"),s.v345=s.fromSimpleString("3.4.5"),s.v350=s.fromSimpleString("3.5.0"),s.v370=s.fromSimpleString("3.7.0"),s.v380=s.fromSimpleString("3.8.0"),s.v381=s.fromSimpleString("3.8.1"),s.v390=s.fromSimpleString("3.9.0"),s.v400=s.fromSimpleString("4.0.0"),s.v401=s.fromSimpleString("4.0.1"),s.v420=s.fromSimpleString("4.2.0"),s.v430=s.fromSimpleString("4.3.0"),s.v440=s.fromSimpleString("4.4.0"),s.v460=s.fromSimpleString("4.6.0"),s.v470=s.fromSimpleString("4.7.0")},6929:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coalesce=t.equals=t.empty=void 0,t.empty=Object.freeze([]),t.equals=function(e,t,n=((e,t)=>e===t)){return e===t||e.length===t.length&&e.every(((e,r)=>n(e,t[r])))},t.coalesce=function(e){return e.filter((e=>!!e))}},7544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImmediate=t.Delayer=void 0,t.Delayer=class{constructor(e){this.defaultDelay=e,this.timeout=null,this.completionPromise=null,this.onSuccess=null,this.task=null}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((e=>{this.onSuccess=e})).then((()=>{this.completionPromise=null,this.onSuccess=null;const e=this.task&&this.task();return this.task=null,e}))),(t>=0||null===this.timeout)&&(this.timeout=setTimeout((()=>{this.timeout=null,this.onSuccess?.(void 0)}),t>=0?t:this.defaultDelay)),this.completionPromise}cancelTimeout(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}},t.setImmediate=function(e,...t){if(n.g.setImmediate){const r=n.g.setImmediate(e,...t);return{dispose:()=>n.g.clearImmediate(r)}}{const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}}}},3219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nulToken=void 0;const r=n(7549).Disposable.from();t.nulToken={isCancellationRequested:!1,onCancellationRequested:()=>r}},4654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyCodeActionCommands=t.applyCodeAction=t.getEditForCodeAction=void 0;const r=n(7549),i=n(231);function s(e,t){return t.changes&&t.changes.length?i.WorkspaceEdit.fromFileCodeEdits(e,t.changes):void 0}async function o(e,t,n){if(t&&t.length)for(const r of t)await e.execute("applyCodeActionCommand",{command:r},n);return!0}t.getEditForCodeAction=s,t.applyCodeAction=async function(e,t,n){const i=s(e,t);return!(i&&!await r.workspace.applyEdit(i))&&o(e,t.commands,n)},t.applyCodeActionCommands=o},7216:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserServiceConfigurationProvider=void 0;const r=n(9550);class i extends r.BaseServiceConfigurationProvider{readGlobalTsdk(e){return null}readLocalTsdk(e){return null}}t.BrowserServiceConfigurationProvider=i},9550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseServiceConfigurationProvider=t.areServiceConfigurationsEqual=t.ImplicitProjectConfiguration=t.TsServerLogLevel=void 0;const r=n(7549),i=n(1745);var s;!function(e){e[e.Off=0]="Off",e[e.Normal=1]="Normal",e[e.Terse=2]="Terse",e[e.Verbose=3]="Verbose"}(s=t.TsServerLogLevel||(t.TsServerLogLevel={})),function(e){e.fromString=function(t){switch(t&&t.toLowerCase()){case"normal":return e.Normal;case"terse":return e.Terse;case"verbose":return e.Verbose;case"off":default:return e.Off}},e.toString=function(t){switch(t){case e.Normal:return"normal";case e.Terse:return"terse";case e.Verbose:return"verbose";case e.Off:default:return"off"}}}(s=t.TsServerLogLevel||(t.TsServerLogLevel={}));class o{constructor(e){this.target=o.readTarget(e),this.module=o.readModule(e),this.checkJs=o.readCheckJs(e),this.experimentalDecorators=o.readExperimentalDecorators(e),this.strictNullChecks=o.readImplicitStrictNullChecks(e),this.strictFunctionTypes=o.readImplicitStrictFunctionTypes(e)}isEqualTo(e){return i.equals(this,e)}static readTarget(e){return e.get("js/ts.implicitProjectConfig.target")}static readModule(e){return e.get("js/ts.implicitProjectConfig.module")}static readCheckJs(e){return e.get("js/ts.implicitProjectConfig.checkJs")??e.get("javascript.implicitProjectConfig.checkJs",!1)}static readExperimentalDecorators(e){return e.get("js/ts.implicitProjectConfig.experimentalDecorators")??e.get("javascript.implicitProjectConfig.experimentalDecorators",!1)}static readImplicitStrictNullChecks(e){return e.get("js/ts.implicitProjectConfig.strictNullChecks",!1)}static readImplicitStrictFunctionTypes(e){return e.get("js/ts.implicitProjectConfig.strictFunctionTypes",!0)}}t.ImplicitProjectConfiguration=o,t.areServiceConfigurationsEqual=function(e,t){return i.equals(e,t)},t.BaseServiceConfigurationProvider=class{loadFromWorkspace(){const e=r.workspace.getConfiguration();return{locale:this.readLocale(e),globalTsdk:this.readGlobalTsdk(e),localTsdk:this.readLocalTsdk(e),npmLocation:this.readNpmLocation(e),tsServerLogLevel:this.readTsServerLogLevel(e),tsServerPluginPaths:this.readTsServerPluginPaths(e),implicitProjectConfiguration:new o(e),disableAutomaticTypeAcquisition:this.readDisableAutomaticTypeAcquisition(e),useSyntaxServer:this.readUseSyntaxServer(e),enableProjectDiagnostics:this.readEnableProjectDiagnostics(e),maxTsServerMemory:this.readMaxTsServerMemory(e),enablePromptUseWorkspaceTsdk:this.readEnablePromptUseWorkspaceTsdk(e),watchOptions:this.readWatchOptions(e),includePackageJsonAutoImports:this.readIncludePackageJsonAutoImports(e),enableTsServerTracing:this.readEnableTsServerTracing(e)}}readTsServerLogLevel(e){const t=e.get("typescript.tsserver.log","off");return s.fromString(t)}readTsServerPluginPaths(e){return e.get("typescript.tsserver.pluginPaths",[])}readNpmLocation(e){return e.get("typescript.npm",null)}readDisableAutomaticTypeAcquisition(e){return e.get("typescript.disableAutomaticTypeAcquisition",!1)}readLocale(e){const t=e.get("typescript.locale","auto");return t&&"auto"!==t?t:null}readUseSyntaxServer(e){switch(e.get("typescript.tsserver.useSyntaxServer")){case"never":return 0;case"always":return 1;case"auto":return 2}const t=e.get("typescript.tsserver.useSeparateSyntaxServer",!0);return"forAllRequests"===t?1:!0===t?2:0}readEnableProjectDiagnostics(e){return e.get("typescript.tsserver.experimental.enableProjectDiagnostics",!1)}readWatchOptions(e){return e.get("typescript.tsserver.watchOptions")}readIncludePackageJsonAutoImports(e){return e.get("typescript.preferences.includePackageJsonAutoImports")}readMaxTsServerMemory(e){const t=e.get("typescript.tsserver.maxTsServerMemory",3072);return Number.isSafeInteger(t)?Math.max(t,128):3072}readEnablePromptUseWorkspaceTsdk(e){return e.get("typescript.enablePromptUseWorkspaceTsdk",!1)}readEnableTsServerTracing(e){return e.get("typescript.tsserver.enableTracing",!1)}}},2298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requireSomeCapability=t.requireGlobalConfiguration=t.requireMinVersion=t.conditionalRegistration=t.Condition=void 0;const r=n(7549),i=n(4009);class s extends i.Disposable{constructor(e,t){super(),this.getValue=e,this._onDidChange=this._register(new r.EventEmitter),this.onDidChange=this._onDidChange.event,this._value=this.getValue(),t((()=>{const e=this.getValue();e!==this._value&&(this._value=e,this._onDidChange.fire())}))}get value(){return this._value}}t.Condition=s;class o{constructor(e,t){this.conditions=e,this.doRegister=t,this.registration=void 0;for(const t of e)t.onDidChange((()=>this.update()));this.update()}dispose(){this.registration?.dispose(),this.registration=void 0}update(){this.conditions.every((e=>e.value))?this.registration||(this.registration=this.doRegister()):this.registration&&(this.registration.dispose(),this.registration=void 0)}}t.conditionalRegistration=function(e,t){return new o(e,t)},t.requireMinVersion=function(e,t){return new s((()=>e.apiVersion.gte(t)),e.onTsServerStarted)},t.requireGlobalConfiguration=function(e,t){return new s((()=>!!r.workspace.getConfiguration(e,null).get(t)),r.workspace.onDidChangeConfiguration)},t.requireSomeCapability=function(e,...t){return new s((()=>t.some((t=>e.capabilities.has(t)))),e.onDidChangeCapabilities)}},4009:(e,t)=>{"use strict";function n(e){for(;e.length;)e.pop()?.dispose()}Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=t.disposeAll=void 0,t.disposeAll=n,t.Disposable=class{constructor(){this._isDisposed=!1,this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,n(this._disposables))}_register(e){return this._isDisposed?e.dispose():this._disposables.push(e),e}get isDisposed(){return this._isDisposed}}},1395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncOnlyAllowedInAsyncFunctions=t.extendsShouldBeImplements=t.cannotFindName=t.incorrectlyImplementsInterface=t.notAllCodePathsReturnAValue=t.fallThroughCaseInSwitch=t.unusedLabel=t.unreachableCode=t.allImportsAreUnused=t.propertyDeclaretedButNeverUsed=t.variableDeclaredButNeverUsed=void 0,t.variableDeclaredButNeverUsed=new Set([6196,6133]),t.propertyDeclaretedButNeverUsed=new Set([6138]),t.allImportsAreUnused=new Set([6192]),t.unreachableCode=new Set([7027]),t.unusedLabel=new Set([7028]),t.fallThroughCaseInSwitch=new Set([7029]),t.notAllCodePathsReturnAValue=new Set([7030]),t.incorrectlyImplementsInterface=new Set([2420]),t.cannotFindName=new Set([2552,2304]),t.extendsShouldBeImplements=new Set([2689]),t.asyncOnlyAllowedInAsyncFunctions=new Set([1308])},6797:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disabledSchemes=t.semanticSupportedSchemes=t.officeScript=t.vscodeVfs=t.memFs=t.vscodeNotebookCell=t.walkThroughSnippet=t.vsls=t.git=t.untitled=t.file=void 0,t.file="file",t.untitled="untitled",t.git="git",t.vsls="vsls",t.walkThroughSnippet="walkThroughSnippet",t.vscodeNotebookCell="vscode-notebook-cell",t.memFs="memfs",t.vscodeVfs="vscode-vfs",t.officeScript="office-script",t.semanticSupportedSchemes=[t.file,t.untitled,t.walkThroughSnippet,t.vscodeNotebookCell],t.disabledSchemes=new Set([t.git,t.vsls])},1648:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addMissingOverride=t.addMissingAwait=t.fixImport=t.spelling=t.forgottenThisPropertyAccess=t.unusedIdentifier=t.unreachableCode=t.classDoesntImplementInheritedAbstractMember=t.classIncorrectlyImplementsInterface=t.awaitInSyncFunction=t.extendsInterfaceBecomesImplements=t.constructorForDerivedNeedSuperCall=t.annotateWithTypeFromJSDoc=void 0,t.annotateWithTypeFromJSDoc="annotateWithTypeFromJSDoc",t.constructorForDerivedNeedSuperCall="constructorForDerivedNeedSuperCall",t.extendsInterfaceBecomesImplements="extendsInterfaceBecomesImplements",t.awaitInSyncFunction="fixAwaitInSyncFunction",t.classIncorrectlyImplementsInterface="fixClassIncorrectlyImplementsInterface",t.classDoesntImplementInheritedAbstractMember="fixClassDoesntImplementInheritedAbstractMember",t.unreachableCode="fixUnreachableCode",t.unusedIdentifier="unusedIdentifier",t.forgottenThisPropertyAccess="forgottenThisPropertyAccess",t.spelling="spelling",t.fixImport="import",t.addMissingAwait="addMissingAwait",t.addMissingOverride="fixOverrideModifier"},1595:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exists=void 0;const r=n(7549);t.exists=async e=>{try{return!!((await r.workspace.fs.stat(e)).type&r.FileType.File)}catch{return!1}}},2503:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesResourceLookLikeAJavaScriptFile=t.doesResourceLookLikeATypeScriptFile=t.isJsConfigOrTsConfigFileName=t.isTsConfigFileName=t.standardLanguageDescriptions=t.allDiagnosticLanguages=void 0;const r=n(1023),i=n(3683);t.allDiagnosticLanguages=[0,1],t.standardLanguageDescriptions=[{id:"typescript",diagnosticOwner:"typescript",diagnosticSource:"ts",diagnosticLanguage:1,languageIds:[i.typescript,i.typescriptreact],configFilePattern:/^tsconfig(\..*)?\.json$/gi,standardFileExtensions:["ts","tsx","cts","mts"]},{id:"javascript",diagnosticOwner:"typescript",diagnosticSource:"ts",diagnosticLanguage:0,languageIds:[i.javascript,i.javascriptreact],configFilePattern:/^jsconfig(\..*)?\.json$/gi,standardFileExtensions:["js","jsx","cjs","mjs","es6","pac"]}],t.isTsConfigFileName=function(e){return/^tsconfig\.(.+\.)?json$/i.test((0,r.basename)(e))},t.isJsConfigOrTsConfigFileName=function(e){return/^[jt]sconfig\.(.+\.)?json$/i.test((0,r.basename)(e))},t.doesResourceLookLikeATypeScriptFile=function(e){return/\.(tsx?|mts|cts)$/i.test(e.fsPath)},t.doesResourceLookLikeAJavaScriptFile=function(e){return/\.(jsx?|mjs|cjs)$/i.test(e.fsPath)}},3683:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTypeScriptDocument=t.isSupportedLanguageMode=t.jsTsLanguageModes=t.jsxTags=t.javascriptreact=t.javascript=t.typescriptreact=t.typescript=void 0;const r=n(7549);t.typescript="typescript",t.typescriptreact="typescriptreact",t.javascript="javascript",t.javascriptreact="javascriptreact",t.jsxTags="jsx-tags",t.jsTsLanguageModes=[t.javascript,t.javascriptreact,t.typescript,t.typescriptreact],t.isSupportedLanguageMode=function(e){return r.languages.match([t.typescript,t.typescriptreact,t.javascript,t.javascriptreact],e)>0},t.isTypeScriptDocument=function(e){return r.languages.match([t.typescript,t.typescriptreact],e)>0}},309:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;const r=n(7549),i=n(189),s=n(1807),o=(0,i.loadMessageBundle)();class a{constructor(e){this.telemetryReporter=e,this._item=r.window.createStatusBarItem("status.typescript.exclude",r.StatusBarAlignment.Right,98),this._item.name=o("statusExclude","TypeScript: Configure Excludes"),this._item.command="js.projectStatus.command"}getCurrentHint(){return this._currentHint}hide(){this._item.hide()}show(e){this._currentHint={message:e?o("hintExclude","To enable project-wide JavaScript/TypeScript language features, exclude folders with many files, like: {0}",e):o("hintExclude.generic","To enable project-wide JavaScript/TypeScript language features, exclude large folders with source files that you do not work on.")},this._item.tooltip=this._currentHint.message,this._item.text=o("large.label","Configure Excludes"),this._item.tooltip=o("hintExclude.tooltip","To enable project-wide JavaScript/TypeScript language features, exclude large folders with source files that you do not work on."),this._item.color="#A5DF3B",this._item.show(),this.telemetryReporter.logTelemetry("js.hintProjectExcludes")}}function c(e,t){if((0,s.isImplicitProjectConfigFile)(t)){const n=e.getWorkspaceRootForResource(r.Uri.file(t));n&&(0,s.openOrCreateConfig)(/tsconfig\.?.*\.json/.test(t)?0:1,n,e.configuration)}else r.workspace.openTextDocument(t).then(r.window.showTextDocument)}t.create=function(e){const t=[],n=new a(e.telemetryReporter);return t.push(r.commands.registerCommand("js.projectStatus.command",(()=>{n.configFileName&&c(e,n.configFileName);const{message:t}=n.getCurrentHint();return r.window.showInformationMessage(t)}))),t.push(function(e,t){return t.onProjectLanguageServiceStateChanged((n=>{if(n.languageServiceEnabled)e.hide();else{e.show();const i=n.projectName;i&&(e.configFileName=i,r.window.showWarningMessage(e.getCurrentHint().message,{title:o("large.label","Configure Excludes"),index:0}).then((e=>{e&&0===e.index&&c(t,i)})))}}))}(n,e)),r.Disposable.from(...t)}},8277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lazy=void 0;class n{constructor(e){this._getValue=e,this._hasValue=!1}get value(){return this._hasValue||(this._hasValue=!0,this._value=this._getValue()),this._value}get hasValue(){return this._hasValue}map(e){return new n((()=>e(this.value)))}}t.lazy=function(e){return new n(e)}},6590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevelMonitor=void 0;const r=n(7549),i=n(371),s=n(9550),o=n(4009);class a extends o.Disposable{constructor(e){super(),this.context=e,this._register(r.workspace.onDidChangeConfiguration(this.onConfigurationChange,this,this._disposables)),this.shouldNotifyExtendedLogging()&&this.notifyExtendedLogging()}onConfigurationChange(e){e.affectsConfiguration(a.logLevelConfigKey)&&this.context.globalState.update(a.logLevelChangedStorageKey,new Date)}get logLevel(){return s.TsServerLogLevel.fromString(r.workspace.getConfiguration().get(a.logLevelConfigKey,"off"))}get lastLogLevelChange(){const e=this.context.globalState.get(a.logLevelChangedStorageKey);if(e){const t=new Date(e);if(t instanceof Date&&!isNaN(t.valueOf()))return t}}get doNotPrompt(){return this.context.globalState.get(a.doNotPromptLogLevelStorageKey)||!1}shouldNotifyExtendedLogging(){const e=this.lastLogLevelChange?new Date(this.lastLogLevelChange).valueOf():0,t=new Date(e+6048e5);return!this.doNotPrompt&&this.logLevel!==s.TsServerLogLevel.Off&&t.valueOf()<Date.now()}notifyExtendedLogging(){r.window.showInformationMessage((0,i.localize)("typescript.extendedLogging.isEnabled","TS Server logging is currently enabled which may impact performance."),{title:(0,i.localize)("typescript.extendedLogging.disableLogging","Disable logging"),choice:0},{title:(0,i.localize)("typescript.extendedLogging.doNotShowAgain","Don't show again"),choice:1}).then((e=>{if(e)return 0===e.choice?r.workspace.getConfiguration().update(a.logLevelConfigKey,"off",!0):1===e.choice?this.context.globalState.update(a.doNotPromptLogLevelStorageKey,!0):void 0}))}}t.LogLevelMonitor=a,a.logLevelConfigKey="typescript.tsserver.log",a.logLevelChangedStorageKey="typescript.tsserver.logLevelChanged",a.doNotPromptLogLevelStorageKey="typescript.tsserver.doNotPromptLogLevel"},3631:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const i=n(7549),s=n(189),o=n(6620),a=s.loadMessageBundle();class c{get output(){return i.window.createOutputChannel(a("channelName","TypeScript"))}data2String(e){return e instanceof Error?e.stack||e.message:!1===e.success&&e.message?e.message:e.toString()}info(e,t){this.logLevel("Info",e,t)}error(e,t){t&&"No content available."===t.message||this.logLevel("Error",e,t)}logLevel(e,t,n){this.output.appendLine(`[${e}  - ${this.now()}] ${t}`),n&&this.output.appendLine(this.data2String(n))}now(){const e=new Date;return l(e.getUTCHours()+"",2,"0")+":"+l(e.getMinutes()+"",2,"0")+":"+l(e.getUTCSeconds()+"",2,"0")+"."+e.getMilliseconds()}}function l(e,t,n=" "){return n.repeat(Math.max(0,t-e.length))+e}r([o.memoize],c.prototype,"output",null),t.Logger=c},7953:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7549),i=n(4009),s=n(2503),o=n(3683);class a extends i.Disposable{constructor(e,t){super(),this.normalizePath=t,this.isInManagedFileContext=!1,e.onDidChangeActiveJsTsEditor(this.onDidChangeActiveTextEditor,this,this._disposables),this.onDidChangeActiveTextEditor(e.activeJsTsEditor)}onDidChangeActiveTextEditor(e){e?this.updateContext(this.isManagedFile(e)):this.updateContext(!1)}updateContext(e){e!==this.isInManagedFileContext&&(r.commands.executeCommand("setContext",a.contextName,e),this.isInManagedFileContext=e)}isManagedFile(e){return this.isManagedScriptFile(e)||this.isManagedConfigFile(e)}isManagedScriptFile(e){return(0,o.isSupportedLanguageMode)(e.document)&&null!==this.normalizePath(e.document.uri)}isManagedConfigFile(e){return(0,s.isJsConfigOrTsConfigFileName)(e.document.fileName)}}t.default=a,a.contextName="typescript.isManagedFile"},6620:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=void 0,t.memoize=function(e,t,n){let r,i;if("function"==typeof n.value)r="value",i=n.value;else{if("function"!=typeof n.get)throw new Error("not supported");r="get",i=n.get}const s=`$memoize$${t}`;n[r]=function(...e){return this.hasOwnProperty(s)||Object.defineProperty(this,s,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,e)}),this[s]}}},308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseKindModifier=void 0,t.parseKindModifier=function(e){return new Set(e.split(/,|\s+/g))}},1745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equals=void 0;const r=n(6929);t.equals=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(typeof t!=typeof n)return!1;if("object"!=typeof t)return!1;if(Array.isArray(t)!==Array.isArray(n))return!1;if(Array.isArray(t))return r.equals(t,n,e);{const i=[];for(const e in t)i.push(e);i.sort();const s=[];for(const e in n)s.push(e);return s.sort(),!!r.equals(i,s)&&i.every((r=>e(t[r],n[r])))}}},1339:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWeb=void 0;const r=n(7549);t.isWeb=function(){return"undefined"!=typeof navigator&&r.env.uiKind===r.UIKind.Web}},5712:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeScriptPluginPathsProvider=void 0;const r=n(1023),i=n(7549),s=n(343);t.TypeScriptPluginPathsProvider=class{constructor(e){this.configuration=e}updateConfiguration(e){this.configuration=e}getPluginPaths(){const e=[];for(const t of this.configuration.tsServerPluginPaths)e.push(...this.resolvePluginPath(t));return e}resolvePluginPath(e){if(r.isAbsolute(e))return[e];const t=s.RelativeWorkspacePathResolver.asAbsoluteWorkspacePath(e);return void 0!==t?[t]:(i.workspace.workspaceFolders||[]).map((t=>r.join(t.uri.fsPath,e)))}}},3090:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginManager=void 0;const r=n(7549),i=n(6929),s=n(4009);var o;!function(e){e.equals=function(e,t){return e.uri.toString()===t.uri.toString()&&e.name===t.name&&e.enableForWorkspaceTypeScriptVersions===t.enableForWorkspaceTypeScriptVersions&&i.equals(e.languages,t.languages)}}(o||(o={}));class a extends s.Disposable{constructor(){super(),this._pluginConfigurations=new Map,this._onDidUpdatePlugins=this._register(new r.EventEmitter),this.onDidChangePlugins=this._onDidUpdatePlugins.event,this._onDidUpdateConfig=this._register(new r.EventEmitter),this.onDidUpdateConfig=this._onDidUpdateConfig.event,r.extensions.onDidChange((()=>{if(!this._plugins)return;const e=this.readPlugins();i.equals(Array.from(this._plugins.values()).flat(),Array.from(e.values()).flat(),o.equals)||(this._plugins=e,this._onDidUpdatePlugins.fire(this))}),void 0,this._disposables)}get plugins(){return this._plugins||(this._plugins=this.readPlugins()),Array.from(this._plugins.values()).flat()}setConfiguration(e,t){this._pluginConfigurations.set(e,t),this._onDidUpdateConfig.fire({pluginId:e,config:t})}configurations(){return this._pluginConfigurations.entries()}readPlugins(){const e=new Map;for(const t of r.extensions.all){const n=t.packageJSON;if(n.contributes&&Array.isArray(n.contributes.typescriptServerPlugins)){const r=[];for(const e of n.contributes.typescriptServerPlugins)r.push({name:e.name,enableForWorkspaceTypeScriptVersions:!!e.enableForWorkspaceTypeScriptVersions,uri:t.extensionUri,languages:Array.isArray(e.languages)?e.languages:[],configNamespace:e.configNamespace});r.length&&e.set(t.id,r)}}return e}}t.PluginManager=a},3539:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addMarkdownDocumentation=t.markdownDocumentation=t.tagsMarkdownPreview=t.plainWithLinks=void 0;const r=n(7549);function i(e){return function(e){return e.replace(/\{@(link|linkplain|linkcode) (https?:\/\/[^ |}]+?)(?:[| ]([^{}\n]+?))?\}/gi,((e,t,n,r)=>{switch(t){case"linkcode":return`[\`${r?r.trim():n}\`](${n})`;default:return`[${r?r.trim():n}](${n})`}}))}(e)}function s(e,t){return i(o(e,t))}function o(e,t){if(!e)return"";if("string"==typeof e)return e;const n=[];let r;for(const i of e)switch(i.kind){case"link":if(r){if(r.target){const e=t.toResource(r.target.file).with({fragment:`L${r.target.start.line},${r.target.start.offset}`}),i=r.text?r.text:l(r.name??"");n.push(`[${r.linkcode?"`"+i+"`":i}](${e.toString()})`)}else{const e=r.text??r.name;if(e)if(/^https?:/.test(e)){const t=e.split(" ");if(1===t.length)n.push(t[0]);else if(t.length>1){const e=l(t.slice(1).join(" "));n.push(`[${r.linkcode?"`"+e+"`":e}](${t[0]})`)}}else n.push(l(e))}r=void 0}else r={linkcode:"{@linkcode "===i.text};break;case"linkName":r&&(r.name=i.text,r.target=i.target);break;case"linkText":r&&(r.text=i.text);break;default:n.push(i.text)}return i(n.join(""))}function a(e,t){return e.map((e=>function(e,t){switch(e.name){case"augments":case"extends":case"param":case"template":{const n=o(e.text,t).split(/^(\S+)\s*-?\s*/);if(3===n?.length){const t=n[1],r=n[2],s=`*@${e.name}* \`${t}\``;return r?s+(r.match(/\r\n|\n/g)?"  \n"+i(r):` — ${i(r)}`):s}}}const n=`*@${e.name}*`,r=function(e,t){if(!e.text)return;function n(e){return/^\s*[~`]{3}/m.test(e)?e:"```\n"+e+"\n```"}const r=o(e.text,t);switch(e.name){case"example":{const e=r.match(/<caption>(.*?)<\/caption>\s*(\r\n|\n)/);return e&&0===e.index?e[1]+"\n"+n(r.substr(e[0].length)):n(r)}case"author":{const e=r.match(/(.+)\s<([-.\w]+@[-.\w]+)>/);return null===e?r:`${e[1]} ${e[2]}`}case"default":return n(r)}return i(r)}(e,t);return r?n+(r.match(/\r\n|\n/g)?"  \n"+r:` — ${r}`):n}(e,t))).join("  \n\n")}function c(e,t,n,r){if(t&&e.appendMarkdown(s(t,r)),n){const t=a(n,r);t&&e.appendMarkdown("\n\n"+t)}return e}function l(e){return e.replace(/`/g,"\\$&")}t.plainWithLinks=s,t.tagsMarkdownPreview=a,t.markdownDocumentation=function(e,t,n,i){const s=new r.MarkdownString;return c(s,e,t,n),s.baseUri=i,s},t.addMarkdownDocumentation=c},8568:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeRegExp=void 0,t.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelativeWorkspacePathResolver=void 0;const r=n(1023),i=n(7549);t.RelativeWorkspacePathResolver=class{static asAbsoluteWorkspacePath(e){for(const t of i.workspace.workspaceFolders||[]){const n=[`./${t.name}/`,`${t.name}/`,`.\\${t.name}\\`,`${t.name}\\`];for(const i of n)if(e.startsWith(i))return r.join(t.uri.fsPath,e.replace(i,""))}}}},7478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceMap=void 0;const r=n(6797);class i{constructor(e=i.defaultPathNormalizer,t){this._normalizePath=e,this.config=t,this._map=new Map}get size(){return this._map.size}has(e){const t=this.toKey(e);return!!t&&this._map.has(t)}get(e){const t=this.toKey(e);if(!t)return;const n=this._map.get(t);return n?n.value:void 0}set(e,t){const n=this.toKey(e);if(!n)return;const r=this._map.get(n);r?r.value=t:this._map.set(n,{resource:e,value:t})}delete(e){const t=this.toKey(e);t&&this._map.delete(t)}clear(){this._map.clear()}get values(){return Array.from(this._map.values(),(e=>e.value))}get entries(){return this._map.values()}toKey(e){const t=this._normalizePath(e);return t&&this.isCaseInsensitivePath(t)?t.toLowerCase():t}isCaseInsensitivePath(e){return!!function(e){return/^[a-zA-Z]:[\/\\]/.test(e)}(e)||"/"===e[0]&&this.config.onCaseInsensitiveFileSystem}}t.ResourceMap=i,i.defaultPathNormalizer=e=>e.scheme===r.file?e.fsPath:e.toString(!0)},7201:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snippetForFunctionCall=void 0;const r=n(7549),i=n(4156);t.snippetForFunctionCall=function(e,t){if(e.insertText&&"string"!=typeof e.insertText)return{snippet:e.insertText,parameterCount:0};const n=function(e){const t=[];let n=!1,r=!1,s=0,o=0;e:for(let a=0;a<e.length;++a){const c=e[a];switch(c.kind){case i.DisplayPartKind.methodName:case i.DisplayPartKind.functionName:case i.DisplayPartKind.text:case i.DisplayPartKind.propertyName:0===s&&0===o&&(n=!0);break;case i.DisplayPartKind.parameterName:if(1===s&&0===o&&n){const n=e[a+1],i=n&&"?"===n.text,s="this"===c.text;i||s||t.push(c),r=r||i}break;case i.DisplayPartKind.punctuation:if("("===c.text)++s;else if(")"===c.text){if(--s,s<=0&&n)break e}else{if("..."===c.text&&1===s){r=!0;break e}"{"===c.text?++o:"}"===c.text&&--o}}}return{hasOptionalParameters:r,parts:t}}(t),s=new r.SnippetString;return s.appendText(`${e.insertText||e.label}(`),function(e,t,n){for(let n=0;n<t.length;++n){const r=t[n];e.appendPlaceholder(r.text),n!==t.length-1&&e.appendText(", ")}}(s,n.parts),n.hasOptionalParameters&&s.appendTabstop(),s.appendText(")"),s.appendTabstop(0),{snippet:s,parameterCount:n.parts.length+(n.hasOptionalParameters?1:0)}}},1687:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.VSCodeTelemetryReporter=void 0;const i=n(7549),s=n(8331),o=n(6620);class a{constructor(e){this.clientVersionDelegate=e,this._reporter=null}logTelemetry(e,t={}){const n=this.reporter;n&&(t.version=this.clientVersionDelegate(),n.sendTelemetryEvent(e,t))}dispose(){this._reporter&&(this._reporter.dispose(),this._reporter=null)}get reporter(){return this.packageInfo&&this.packageInfo.aiKey?(this._reporter=new s.default(this.packageInfo.name,this.packageInfo.version,this.packageInfo.aiKey),this._reporter):null}get packageInfo(){const{packageJSON:e}=i.extensions.getExtension("vscode.typescript-language-features");return e?{name:e.name,version:e.version,aiKey:e.aiKey}:null}}r([o.memoize],a.prototype,"reporter",null),r([o.memoize],a.prototype,"packageInfo",null),t.VSCodeTelemetryReporter=a},3815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7549);var i;!function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(i||(i={})),function(e){e.fromString=function(t){switch(t=t.toLowerCase()){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}}}(i||(i={}));class s{constructor(e){this.logger=e,this.updateConfiguration()}updateConfiguration(){this.trace=s.readTrace()}static readTrace(){let e=i.fromString(r.workspace.getConfiguration().get("typescript.tsserver.trace","off"));return e===i.Off&&{}.TSS_TRACE&&(e=i.Messages),e}traceRequest(e,t,n,r){if(this.trace===i.Off)return;let s;this.trace===i.Verbose&&t.arguments&&(s=`Arguments: ${JSON.stringify(t.arguments,null,4)}`),this.logTrace(e,`Sending request: ${t.command} (${t.seq}). Response expected: ${n?"yes":"no"}. Current queue length: ${r}`,s)}traceResponse(e,t,n){if(this.trace===i.Off)return;let r;this.trace===i.Verbose&&t.body&&(r=`Result: ${JSON.stringify(t.body,null,4)}`),this.logTrace(e,`Response received: ${t.command} (${t.request_seq}). Request took ${Date.now()-n.queuingStartTime} ms. Success: ${t.success} ${t.success?"":". Message: "+t.message}`,r)}traceRequestCompleted(e,t,n,r){this.trace!==i.Off&&this.logTrace(e,`Async response received: ${t} (${n}). Request took ${Date.now()-r.queuingStartTime} ms.`)}traceEvent(e,t){if(this.trace===i.Off)return;let n;this.trace===i.Verbose&&t.body&&(n=`Data: ${JSON.stringify(t.body,null,4)}`),this.logTrace(e,`Event received: ${t.event} (${t.seq}).`,n)}logTrace(e,t,n){this.trace!==i.Off&&this.logger.logLevel("Trace",`<${e}> ${t}`,n)}}t.default=s},1807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openProjectConfigForFile=t.openProjectConfigOrPromptToCreate=t.openOrCreateConfig=t.inferredProjectCompilerOptions=t.isImplicitProjectConfigFile=void 0;const r=n(1023),i=n(7549),s=n(189),o=n(3219),a=s.loadMessageBundle();function c(e){return e.startsWith("/dev/null/")}t.isImplicitProjectConfigFile=c;const l=Object.freeze({module:"ESNext",moduleResolution:"Node",target:"ES2020",jsx:"preserve"});function u(e,t){const n={...l};return t.implicitProjectConfiguration.checkJs&&(n.checkJs=!0,0===e&&(n.allowJs=!0)),t.implicitProjectConfiguration.experimentalDecorators&&(n.experimentalDecorators=!0),t.implicitProjectConfiguration.strictNullChecks&&(n.strictNullChecks=!0),t.implicitProjectConfiguration.strictFunctionTypes&&(n.strictFunctionTypes=!0),t.implicitProjectConfiguration.module&&(n.module=t.implicitProjectConfiguration.module),t.implicitProjectConfiguration.target&&(n.target=t.implicitProjectConfiguration.target),0===e&&(n.sourceMap=!0),n}async function d(e,t,n){const s=i.Uri.file(r.join(t,0===e?"tsconfig.json":"jsconfig.json")),o=i.window.activeTextEditor?.viewColumn;try{const e=await i.workspace.openTextDocument(s);return i.window.showTextDocument(e,o)}catch{const t=await i.workspace.openTextDocument(s.with({scheme:"untitled"})),r=await i.window.showTextDocument(t,o);return 0===r.document.getText().length&&await r.insertSnippet(function(e,t){const n=u(e,t),r=Object.keys(n).map((e=>`"${e}": ${JSON.stringify(n[e])}`));return new i.SnippetString(`{\n\t"compilerOptions": {\n\t\t${r.join(",\n\t\t")}$0\n\t},\n\t"exclude": [\n\t\t"node_modules",\n\t\t"**/node_modules/*"\n\t]\n}`)}(e,n)),r}}async function p(e,t,n,r){if(!c(r)){const e=await i.workspace.openTextDocument(r);return void i.window.showTextDocument(e,i.window.activeTextEditor?.viewColumn)}const s={title:0===e?a("typescript.configureTsconfigQuickPick","Configure tsconfig.json"):a("typescript.configureJsconfigQuickPick","Configure jsconfig.json")};switch(await i.window.showInformationMessage(0===e?a("typescript.noTypeScriptProjectConfig","File is not part of a TypeScript project. View the [tsconfig.json documentation]({0}) to learn more.","https://go.microsoft.com/fwlink/?linkid=841896"):a("typescript.noJavaScriptProjectConfig","File is not part of a JavaScript project. View the [jsconfig.json documentation]({0}) to learn more.","https://go.microsoft.com/fwlink/?linkid=759670"),s)){case s:return void d(e,n,t.configuration)}}t.inferredProjectCompilerOptions=u,t.openOrCreateConfig=d,t.openProjectConfigOrPromptToCreate=p,t.openProjectConfigForFile=async function(e,t,n){const r=t.getWorkspaceRootForResource(n);if(!r)return void i.window.showInformationMessage(a("typescript.projectConfigNoWorkspace","Please open a folder in VS Code to use a TypeScript or JavaScript project"));const s=t.toPath(n);if(!s||!await t.toPath(n))return void i.window.showWarningMessage(a("typescript.projectConfigUnsupportedFile","Could not determine TypeScript or JavaScript project. Unsupported file type"));let c;try{c=await t.execute("projectInfo",{file:s,needFileNameList:!1},o.nulToken)}catch{}if("response"===c?.type&&c.body)return p(e,t,r,c.body.configFileName);i.window.showWarningMessage(a("typescript.projectConfigCouldNotGetInfo","Could not determine TypeScript or JavaScript project"))}},231:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionTriggerKind=t.SymbolKind=t.WorkspaceEdit=t.TextEdit=t.Location=t.Position=t.Range=void 0;const r=n(7549),i=n(4156);var s,o;!function(e){e.fromTextSpan=t=>e.fromLocations(t.start,t.end),e.toTextSpan=e=>({start:o.toLocation(e.start),end:o.toLocation(e.end)}),e.fromLocations=(e,t)=>new r.Range(Math.max(0,e.line-1),Math.max(e.offset-1,0),Math.max(0,t.line-1),Math.max(0,t.offset-1)),e.toFileRangeRequestArgs=(e,t)=>({file:e,startLine:t.start.line+1,startOffset:t.start.character+1,endLine:t.end.line+1,endOffset:t.end.character+1}),e.toFormattingRequestArgs=(e,t)=>({file:e,line:t.start.line+1,offset:t.start.character+1,endLine:t.end.line+1,endOffset:t.end.character+1})}(s=t.Range||(t.Range={})),function(e){e.fromLocation=e=>new r.Position(e.line-1,e.offset-1),e.toLocation=e=>({line:e.line+1,offset:e.character+1}),e.toFileLocationRequestArgs=(e,t)=>({file:e,line:t.line+1,offset:t.character+1})}(o=t.Position||(t.Position={})),(t.Location||(t.Location={})).fromTextSpan=(e,t)=>new r.Location(e,s.fromTextSpan(t)),(t.TextEdit||(t.TextEdit={})).fromCodeEdit=e=>new r.TextEdit(s.fromTextSpan(e),e.newText),function(e){function t(e,t,n){for(const r of n){const n=t.toResource(r.fileName);for(const t of r.textChanges)e.replace(n,s.fromTextSpan(t),t.newText)}return e}e.fromFileCodeEdits=function(e,n){return t(new r.WorkspaceEdit,e,n)},e.withFileCodeEdits=t}(t.WorkspaceEdit||(t.WorkspaceEdit={})),(t.SymbolKind||(t.SymbolKind={})).fromProtocolScriptElementKind=function(e){switch(e){case i.Kind.module:return r.SymbolKind.Module;case i.Kind.class:return r.SymbolKind.Class;case i.Kind.enum:return r.SymbolKind.Enum;case i.Kind.enumMember:return r.SymbolKind.EnumMember;case i.Kind.interface:return r.SymbolKind.Interface;case i.Kind.indexSignature:case i.Kind.callSignature:case i.Kind.method:return r.SymbolKind.Method;case i.Kind.memberVariable:case i.Kind.memberGetAccessor:case i.Kind.memberSetAccessor:return r.SymbolKind.Property;case i.Kind.variable:case i.Kind.let:case i.Kind.const:case i.Kind.localVariable:case i.Kind.alias:return r.SymbolKind.Variable;case i.Kind.function:case i.Kind.localFunction:return r.SymbolKind.Function;case i.Kind.constructSignature:case i.Kind.constructorImplementation:return r.SymbolKind.Constructor;case i.Kind.typeParameter:return r.SymbolKind.TypeParameter;case i.Kind.string:return r.SymbolKind.String;default:return r.SymbolKind.Variable}},(t.CompletionTriggerKind||(t.CompletionTriggerKind={})).toProtocolCompletionTriggerKind=function(e){switch(e){case r.CompletionTriggerKind.Invoke:return 1;case r.CompletionTriggerKind.TriggerCharacter:return 2;case r.CompletionTriggerKind.TriggerForIncompleteCompletions:return 3}}},9292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtaProgressReporter=void 0;const r=n(7549),i=n(189),s=n(4009),o=(0,i.loadMessageBundle)();class a extends s.Disposable{constructor(e){super(),this._acquiringTypings=new Map,this._client=e,this._register(this._client.onDidBeginInstallTypings((e=>this.onBeginInstallTypings(e.eventId)))),this._register(this._client.onDidEndInstallTypings((e=>this.onEndInstallTypings(e.eventId))))}dispose(){super.dispose();for(const e of this._acquiringTypings.values())clearTimeout(e)}get isAcquiringTypings(){return Object.keys(this._acquiringTypings).length>0}onBeginInstallTypings(e){this._acquiringTypings.has(e)||this._acquiringTypings.set(e,setTimeout((()=>{this.onEndInstallTypings(e)}),3e4))}onEndInstallTypings(e){const t=this._acquiringTypings.get(e);t&&clearTimeout(t),this._acquiringTypings.delete(e)}}t.default=a;class c extends s.Disposable{constructor(e){super(),this._promises=new Map,this._register(e.onDidBeginInstallTypings((e=>this._onBegin(e.eventId)))),this._register(e.onDidEndInstallTypings((e=>this._onEndOrTimeout(e.eventId)))),this._register(e.onTypesInstallerInitializationFailed((e=>this.onTypesInstallerInitializationFailed())))}dispose(){super.dispose(),this._promises.forEach((e=>e()))}_onBegin(e){const t=setTimeout((()=>this._onEndOrTimeout(e)),3e4),n=new Promise((n=>{this._promises.set(e,(()=>{clearTimeout(t),n()}))}));r.window.withProgress({location:r.ProgressLocation.Window,title:o("installingPackages","Fetching data for better TypeScript IntelliSense")},(()=>n))}_onEndOrTimeout(e){const t=this._promises.get(e);t&&(this._promises.delete(e),t())}async onTypesInstallerInitializationFailed(){const e=r.workspace.getConfiguration("typescript");if(e.get("check.npmIsInstalled",!0)){const t={title:o("typesInstallerInitializationFailed.doNotCheckAgain","Don't Show Again")};await r.window.showWarningMessage(o("typesInstallerInitializationFailed.title","Could not install typings files for JavaScript language features. Please ensure that NPM is installed, or configure 'typescript.npm' in your user settings. Alternatively, check the [documentation]({0}) to learn more.","https://go.microsoft.com/fwlink/?linkid=847635"),t)===t&&e.update("check.npmIsInstalled",!1,!0)}}}t.AtaProgressReporter=c},7549:e=>{"use strict";e.exports=require("vscode")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=void 0;const t=n(7549),i=n(1097),s=n(6460),o=n(4201),a=n(9491),c=n(5299),l=n(1660),u=n(2059),d=n(371),p=n(5372),g=n(9638),h=n(7216),f=n(3090);class m{constructor(e){this._version=e,this.globalVersion=void 0,this.localVersion=void 0,this.localVersions=[]}updateConfiguration(e){}get defaultVersion(){return this._version}get bundledVersion(){return this._version}}e.activate=function(e){const r=new f.PluginManager;e.subscriptions.push(r);const v=new s.CommandManager;e.subscriptions.push(v);const y=new t.EventEmitter;e.subscriptions.push(y);const C=new p.ActiveJsTsEditorTracker;e.subscriptions.push(C);const S=new m(new d.TypeScriptVersion("bundled",t.Uri.joinPath(e.extensionUri,"dist/browser/typescript/tsserver.web.js").toString(),g.default.fromSimpleString("4.5.4"))),w=(0,a.createLazyClientHost)(e,!1,{pluginManager:r,commandManager:v,logDirectoryProvider:l.noopLogDirectoryProvider,cancellerFactory:c.noopRequestCancellerFactory,versionProvider:S,processFactory:u.WorkerServerProcess,activeJsTsEditorTracker:C,serviceConfigurationProvider:new h.BrowserServiceConfigurationProvider},(e=>{y.fire(e)}));return(0,o.registerBaseCommands)(v,w,r,C),Promise.resolve().then((()=>n(6270))).then((t=>{e.subscriptions.push(t.register())})),e.subscriptions.push((0,a.lazilyActivateClient)(w,r,C)),(0,i.getExtensionApi)(y.event,r)}})();var i=exports;for(var s in r)i[s]=r[s];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/9c29becfad5f68270b9b23efeafb147722c5feba/extensions/typescript-language-features/dist/browser/extension.js.map