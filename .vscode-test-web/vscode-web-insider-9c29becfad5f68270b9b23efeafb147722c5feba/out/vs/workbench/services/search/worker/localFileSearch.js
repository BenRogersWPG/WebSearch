/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/strings","vs/base/common/platform","vs/base/common/path","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/arrays","vs/base/common/network","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],se=function(Y){for(var t=[],p=0,b=Y.length;p<b;p++)t[p]=ne[Y[p]];return t},oe=this&&this.__classPrivateFieldSet||function(Y,t,p,b,T){if(b==="m")throw new TypeError("Private method is not writable");if(b==="a"&&!T)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?Y!==t||!T:!t.has(Y))throw new TypeError("Cannot write private member to an object whose class did not declare it");return b==="a"?T.call(Y,p):T?T.value=p:t.set(Y,p),p},ae=this&&this.__classPrivateFieldGet||function(Y,t,p,b){if(p==="a"&&!b)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?Y!==t||!b:!t.has(Y))throw new TypeError("Cannot read private member from an object whose class did not declare it");return p==="m"?b:p==="a"?b.call(Y):b?b.value:t.get(Y)};define(ne[10],se([0,1,11,2]),function(Y,t,p,b){"use strict";var T,O,k,g;Object.defineProperty(t,"__esModule",{value:!0}),t.ReadonlyMapView=t.LRUCache=t.LinkedMap=t.Touch=t.ResourceSet=t.ResourceMap=t.TernarySearchTree=t.UriIterator=t.PathIterator=t.ConfigKeysIterator=t.StringIterator=t.setToString=t.mapToString=t.getOrSet=void 0;function R(n,e,r){let a=n.get(e);return a===void 0&&(a=r,n.set(e,a)),a}t.getOrSet=R;function F(n){const e=[];return n.forEach((r,a)=>{e.push(`${a} => ${r}`)}),`Map(${n.size}) {${e.join(", ")}}`}t.mapToString=F;function S(n){const e=[];return n.forEach(r=>{e.push(r)}),`Set(${n.size}) {${e.join(", ")}}`}t.setToString=S;class Q{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),a=this._value.charCodeAt(this._pos);return r-a}value(){return this._value[this._pos]}}t.StringIterator=Q;class G{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?(0,b.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,b.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}t.ConfigKeysIterator=G;class q{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let r=e.length-1;r>=0;r--,this._valueLen--){const a=this._value.charCodeAt(r);if(!(a===47||this._splitOnBackslash&&a===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?(0,b.compareSubstring)(e,this._value,0,e.length,this._from,this._to):(0,b.compareSubstringIgnoreCase)(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}t.PathIterator=q;var o;(function(n){n[n.Scheme=1]="Scheme",n[n.Authority=2]="Authority",n[n.Path=3]="Path",n[n.Query=4]="Query",n[n.Fragment=5]="Fragment"})(o||(o={}));class v{constructor(e,r){this._ignorePathCasing=e,this._ignoreQueryAndFragment=r,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new q(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return(0,b.compareIgnoreCase)(e,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,b.compareIgnoreCase)(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return(0,b.compare)(e,this._value.query);if(this._states[this._stateIdx]===5)return(0,b.compare)(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}t.UriIterator=v;class w{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var B;(function(n){n[n.Left=-1]="Left",n[n.Mid=0]="Mid",n[n.Right=1]="Right"})(B||(B={}));class N{constructor(e){this._iter=e}static forUris(e=()=>!1,r=()=>!1){return new N(new v(e,r))}static forPaths(e=!1){return new N(new q(void 0,!e))}static forStrings(){return new N(new Q)}static forConfigKeys(){return new N(new G)}clear(){this._root=void 0}fill(e,r){if(r){const a=r.slice(0);(0,p.shuffle)(a);for(let l of a)this.set(l,e)}else{const a=e.slice(0);(0,p.shuffle)(a);for(let l of a)this.set(l[0],l[1])}}set(e,r){const a=this._iter.reset(e);let l;this._root||(this._root=new w,this._root.segment=a.value());const f=[];for(l=this._root;;){const L=a.cmp(l.segment);if(L>0)l.left||(l.left=new w,l.left.segment=a.value()),f.push([-1,l]),l=l.left;else if(L<0)l.right||(l.right=new w,l.right.segment=a.value()),f.push([1,l]),l=l.right;else if(a.hasNext())a.next(),l.mid||(l.mid=new w,l.mid.segment=a.value()),f.push([0,l]),l=l.mid;else break}const D=l.value;l.value=r,l.key=e;for(let L=f.length-1;L>=0;L--){const z=f[L][1];z.updateHeight();const Z=z.balanceFactor();if(Z<-1||Z>1){const X=f[L][0],te=f[L+1][0];if(X===1&&te===1)f[L][1]=z.rotateLeft();else if(X===-1&&te===-1)f[L][1]=z.rotateRight();else if(X===1&&te===-1)z.right=f[L+1][1]=f[L+1][1].rotateRight(),f[L][1]=z.rotateLeft();else if(X===-1&&te===1)z.left=f[L+1][1]=f[L+1][1].rotateLeft(),f[L][1]=z.rotateRight();else throw new Error;if(L>0)switch(f[L-1][0]){case-1:f[L-1][1].left=f[L][1];break;case 1:f[L-1][1].right=f[L][1];break;case 0:f[L-1][1].mid=f[L][1];break}else this._root=f[0][1]}}return D}get(e){return this._getNode(e)?.value}_getNode(e){const r=this._iter.reset(e);let a=this._root;for(;a;){const l=r.cmp(a.segment);if(l>0)a=a.left;else if(l<0)a=a.right;else if(r.hasNext())r.next(),a=a.mid;else break}return a}has(e){const r=this._getNode(e);return!(r?.value===void 0&&r?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const a=this._iter.reset(e),l=[];let f=this._root;for(;f;){const D=a.cmp(f.segment);if(D>0)l.push([-1,f]),f=f.left;else if(D<0)l.push([1,f]),f=f.right;else if(a.hasNext())a.next(),l.push([0,f]),f=f.mid;else break}if(!!f){if(r?(f.left=void 0,f.mid=void 0,f.right=void 0,f.height=1):(f.key=void 0,f.value=void 0),!f.mid&&!f.value)if(f.left&&f.right){const D=this._min(f.right),{key:L,value:z,segment:Z}=D;this._delete(D.key,!1),f.key=L,f.value=z,f.segment=Z}else{const D=f.left??f.right;if(l.length>0){const[L,z]=l[l.length-1];switch(L){case-1:z.left=D;break;case 0:z.mid=D;break;case 1:z.right=D;break}}else this._root=D}for(let D=l.length-1;D>=0;D--){const L=l[D][1];L.updateHeight();const z=L.balanceFactor();if(z>1?(L.right.balanceFactor()>=0||(L.right=L.right.rotateRight()),l[D][1]=L.rotateLeft()):z<-1&&(L.left.balanceFactor()<=0||(L.left=L.left.rotateLeft()),l[D][1]=L.rotateRight()),D>0)switch(l[D-1][0]){case-1:l[D-1][1].left=l[D][1];break;case 1:l[D-1][1].right=l[D][1];break;case 0:l[D-1][1].mid=l[D][1];break}else this._root=l[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const r=this._iter.reset(e);let a=this._root,l;for(;a;){const f=r.cmp(a.segment);if(f>0)a=a.left;else if(f<0)a=a.right;else if(r.hasNext())r.next(),l=a.value||l,a=a.mid;else break}return a&&a.value||l}findSuperstr(e){const r=this._iter.reset(e);let a=this._root;for(;a;){const l=r.cmp(a.segment);if(l>0)a=a.left;else if(l<0)a=a.right;else if(r.hasNext())r.next(),a=a.mid;else return a.mid?this._entries(a.mid):void 0}}forEach(e){for(const[r,a]of this)e(a,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){!e||(e.left&&(yield*this._entries(e.left)),e.value&&(yield[e.key,e.value]),e.mid&&(yield*this._entries(e.mid)),e.right&&(yield*this._entries(e.right)))}_isBalanced(){const e=r=>{if(!r)return!0;const a=r.balanceFactor();return a<-1||a>1?!1:e(r.left)&&e(r.right)};return e(this._root)}}t.TernarySearchTree=N;class I{constructor(e,r){this.uri=e,this.value=r}}class U{constructor(e,r){this[T]="ResourceMap",e instanceof U?(this.map=new Map(e.map),this.toKey=r??U.defaultToKey):(this.map=new Map,this.toKey=e??U.defaultToKey)}set(e,r){return this.map.set(this.toKey(e),new I(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r!="undefined"&&(e=e.bind(r));for(let[a,l]of this.map)e(l.value,l.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(T=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}}t.ResourceMap=U,U.defaultToKey=n=>n.toString();class J{constructor(e,r){this[O]="ResourceSet",!e||typeof e=="function"?this._map=new U(e):(this._map=new U(r),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((a,l)=>e.call(r,l,l,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=J;var C;(function(n){n[n.None=0]="None",n[n.AsOld=1]="AsOld",n[n.AsNew=2]="AsNew"})(C=t.Touch||(t.Touch={}));class W{constructor(){this[k]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){const a=this._map.get(e);if(!!a)return r!==0&&this.touch(a,r),a.value}set(e,r,a=0){let l=this._map.get(e);if(l)l.value=r,a!==0&&this.touch(l,a);else{switch(l={key:e,value:r,next:void 0,previous:void 0},a){case 0:this.addItemLast(l);break;case 1:this.addItemFirst(l);break;case 2:this.addItemLast(l);break;default:this.addItemLast(l);break}this._map.set(e,l),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const r=this._map.get(e);if(!!r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){const a=this._state;let l=this._head;for(;l;){if(r?e.bind(r)(l.value,l.key,this):e(l.value,l.key,this),this._state!==a)throw new Error("LinkedMap got modified during iteration.");l=l.next}}keys(){const e=this,r=this._state;let a=this._head;const l={[Symbol.iterator](){return l},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(a){const f={value:a.key,done:!1};return a=a.next,f}else return{value:void 0,done:!0}}};return l}values(){const e=this,r=this._state;let a=this._head;const l={[Symbol.iterator](){return l},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(a){const f={value:a.value,done:!1};return a=a.next,f}else return{value:void 0,done:!0}}};return l}entries(){const e=this,r=this._state;let a=this._head;const l={[Symbol.iterator](){return l},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(a){const f={value:[a.key,a.value],done:!1};return a=a.next,f}else return{value:void 0,done:!0}}};return l}[(k=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,a=this.size;for(;r&&a>e;)this._map.delete(r.key),r=r.next,a--;this._head=r,this._size=a,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const r=e.next,a=e.previous;if(!r||!a)throw new Error("Invalid list");r.previous=a,a.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;const a=e.next,l=e.previous;e===this._tail?(l.next=void 0,this._tail=l):(a.previous=l,l.next=a),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;const a=e.next,l=e.previous;e===this._head?(a.previous=void 0,this._head=a):(a.previous=l,l.next=a),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((r,a)=>{e.push([a,r])}),e}fromJSON(e){this.clear();for(const[r,a]of e)this.set(r,a)}}t.LinkedMap=W;class A extends W{constructor(e,r=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}t.LRUCache=A;class H{constructor(e){g.set(this,void 0),oe(this,g,e,"f")}get size(){return ae(this,g,"f").size}forEach(e,r){ae(this,g,"f").forEach(e,r)}get(e){return ae(this,g,"f").get(e)}has(e){return ae(this,g,"f").has(e)}entries(){return ae(this,g,"f").entries()}keys(){return ae(this,g,"f").keys()}values(){return ae(this,g,"f").values()}[(g=new WeakMap,Symbol.iterator)](){return ae(this,g,"f").entries()}}t.ReadonlyMapView=H}),define(ne[5],se([0,1,4,3,2,16]),function(Y,t,p,b,T,O){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomPath=t.parseLineAndColumnAware=t.indexOfPath=t.getDriveLetter=t.hasDriveLetter=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;function k(n){return n===47||n===92}t.isPathSeparator=k;function g(n){return n.replace(/[\\/]/g,p.posix.sep)}t.toSlashes=g;function R(n){return n.indexOf("/")===-1&&(n=g(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),n}t.toPosixPath=R;function F(n,e=p.posix.sep){if(!n)return"";const r=n.length,a=n.charCodeAt(0);if(k(a)){if(k(n.charCodeAt(1))&&!k(n.charCodeAt(2))){let f=3;const D=f;for(;f<r&&!k(n.charCodeAt(f));f++);if(D!==f&&!k(n.charCodeAt(f+1))){for(f+=1;f<r;f++)if(k(n.charCodeAt(f)))return n.slice(0,f+1).replace(/[\\/]/g,e)}}return e}else if(B(a)&&n.charCodeAt(1)===58)return k(n.charCodeAt(2))?n.slice(0,2)+e:n.slice(0,2);let l=n.indexOf("://");if(l!==-1){for(l+=3;l<r;l++)if(k(n.charCodeAt(l)))return n.slice(0,l+1)}return""}t.getRoot=F;function S(n){if(!b.isWindows||!n||n.length<5)return!1;let e=n.charCodeAt(0);if(e!==92||(e=n.charCodeAt(1),e!==92))return!1;let r=2;const a=r;for(;r<n.length&&(e=n.charCodeAt(r),e!==92);r++);return!(a===r||(e=n.charCodeAt(r+1),isNaN(e)||e===92))}t.isUNC=S;const Q=/[\\/:\*\?"<>\|]/g,G=/[\\/]/g,q=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function o(n,e=b.isWindows){const r=e?Q:G;return!(!n||n.length===0||/^\s+$/.test(n)||(r.lastIndex=0,r.test(n))||e&&q.test(n)||n==="."||n===".."||e&&n[n.length-1]==="."||e&&n.length!==n.trim().length||n.length>255)}t.isValidBasename=o;function v(n,e,r){const a=n===e;return!r||a?a:!n||!e?!1:(0,T.equalsIgnoreCase)(n,e)}t.isEqual=v;function w(n,e,r,a=p.sep){if(n===e)return!0;if(!n||!e||e.length>n.length)return!1;if(r){if(!(0,T.startsWithIgnoreCase)(n,e))return!1;if(e.length===n.length)return!0;let f=e.length;return e.charAt(e.length-1)===a&&f--,n.charAt(f)===a}return e.charAt(e.length-1)!==a&&(e+=a),n.indexOf(e)===0}t.isEqualOrParent=w;function B(n){return n>=65&&n<=90||n>=97&&n<=122}t.isWindowsDriveLetter=B;function N(n,e){return b.isWindows&&n.endsWith(":")&&(n+=p.sep),(0,p.isAbsolute)(n)||(n=(0,p.join)(e,n)),n=(0,p.normalize)(n),b.isWindows?(n=(0,T.rtrim)(n,p.sep),n.endsWith(":")&&(n+=p.sep)):(n=(0,T.rtrim)(n,p.sep),n||(n=p.sep)),n}t.sanitizeFilePath=N;function I(n){const e=(0,p.normalize)(n);return b.isWindows?n.length>3?!1:U(e)&&(n.length===2||e.charCodeAt(2)===92):e===p.posix.sep}t.isRootOrDriveLetter=I;function U(n,e=b.isWindows){return e?B(n.charCodeAt(0))&&n.charCodeAt(1)===58:!1}t.hasDriveLetter=U;function J(n){return U(n)?n[0]:void 0}t.getDriveLetter=J;function C(n,e,r){return e.length>n.length?-1:n===e?0:(r&&(n=n.toLowerCase(),e=e.toLowerCase()),n.indexOf(e))}t.indexOfPath=C;function W(n){const e=n.split(":");let r,a,l;for(const f of e){const D=Number(f);(0,O.isNumber)(D)?a===void 0?a=D:l===void 0&&(l=D):r=r?[r,f].join(":"):f}if(!r)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:r,line:a!==void 0?a:void 0,column:l!==void 0?l:a!==void 0?1:void 0}}t.parseLineAndColumnAware=W;const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function H(n,e,r=8){let a="";for(let f=0;f<r;f++)a+=A.charAt(Math.floor(Math.random()*A.length));let l;return e?l=`${e}-${a}`:l=a,n?(0,p.join)(n,l):l}t.randomPath=H}),define(ne[12],se([0,1,3,6]),function(Y,t,p,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileAccess=t.RemoteAuthorities=t.connectionTokenQueryName=t.connectionTokenCookieName=t.Schemas=void 0;var T;(function(g){g.inMemory="inmemory",g.vscode="vscode",g.internal="private",g.walkThrough="walkThrough",g.walkThroughSnippet="walkThroughSnippet",g.http="http",g.https="https",g.file="file",g.mailto="mailto",g.untitled="untitled",g.data="data",g.command="command",g.vscodeRemote="vscode-remote",g.vscodeRemoteResource="vscode-remote-resource",g.vscodeUserData="vscode-userdata",g.vscodeCustomEditor="vscode-custom-editor",g.vscodeNotebook="vscode-notebook",g.vscodeNotebookCell="vscode-notebook-cell",g.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",g.vscodeNotebookCellOutput="vscode-notebook-cell-output",g.vscodeInteractive="vscode-interactive",g.vscodeInteractiveInput="vscode-interactive-input",g.vscodeSettings="vscode-settings",g.vscodeWorkspaceTrust="vscode-workspace-trust",g.vscodeTerminal="vscode-terminal",g.webviewPanel="webview-panel",g.vscodeWebview="vscode-webview",g.extension="extension",g.vscodeFileResource="vscode-file",g.tmp="tmp",g.vsls="vsls"})(T=t.Schemas||(t.Schemas={})),t.connectionTokenCookieName="vscode-tkn",t.connectionTokenQueryName="tkn";class O{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath=`/${T.vscodeRemoteResource}`}setPreferredWebSchema(R){this._preferredWebSchema=R}setDelegate(R){this._delegate=R}setServerRootPath(R){this._remoteResourcesPath=`${R}/${T.vscodeRemoteResource}`}set(R,F,S){this._hosts[R]=F,this._ports[R]=S}setConnectionToken(R,F){this._connectionTokens[R]=F}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(R){if(this._delegate)return this._delegate(R);const F=R.authority;let S=this._hosts[F];S&&S.indexOf(":")!==-1&&(S=`[${S}]`);const Q=this._ports[F],G=this._connectionTokens[F];let q=`path=${encodeURIComponent(R.path)}`;return typeof G=="string"&&(q+=`&${t.connectionTokenQueryName}=${encodeURIComponent(G)}`),b.URI.from({scheme:p.isWeb?this._preferredWebSchema:T.vscodeRemoteResource,authority:`${S}:${Q}`,path:this._remoteResourcesPath,query:q})}}t.RemoteAuthorities=new O;class k{asBrowserUri(R,F){const S=this.toUri(R,F);return S.scheme===T.vscodeRemote?t.RemoteAuthorities.rewrite(S):S.scheme===T.file&&(p.isNative||p.isWebWorker&&p.globals.origin===`${T.vscodeFileResource}://${k.FALLBACK_AUTHORITY}`)?S.with({scheme:T.vscodeFileResource,authority:S.authority||k.FALLBACK_AUTHORITY,query:null,fragment:null}):S}asFileUri(R,F){const S=this.toUri(R,F);return S.scheme===T.vscodeFileResource?S.with({scheme:T.file,authority:S.authority!==k.FALLBACK_AUTHORITY?S.authority:null,query:null,fragment:null}):S}toUri(R,F){return b.URI.isUri(R)?R:b.URI.parse(F.toUrl(R))}}k.FALLBACK_AUTHORITY="vscode-app",t.FileAccess=new k}),define(ne[7],se([0,1,5,12,4,3,2,6]),function(Y,t,p,b,T,O,k,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalResource=t.DataUri=t.distinctParents=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;function R(q){return(0,g.uriToFsPath)(q,!0)}t.originalFSPath=R;class F{constructor(o){this._ignorePathCasing=o}compare(o,v,w=!1){return o===v?0:(0,k.compare)(this.getComparisonKey(o,w),this.getComparisonKey(v,w))}isEqual(o,v,w=!1){return o===v?!0:!o||!v?!1:this.getComparisonKey(o,w)===this.getComparisonKey(v,w)}getComparisonKey(o,v=!1){return o.with({path:this._ignorePathCasing(o)?o.path.toLowerCase():void 0,fragment:v?null:void 0}).toString()}ignorePathCasing(o){return this._ignorePathCasing(o)}isEqualOrParent(o,v,w=!1){if(o.scheme===v.scheme){if(o.scheme===b.Schemas.file)return p.isEqualOrParent(R(o),R(v),this._ignorePathCasing(o))&&o.query===v.query&&(w||o.fragment===v.fragment);if((0,t.isEqualAuthority)(o.authority,v.authority))return p.isEqualOrParent(o.path,v.path,this._ignorePathCasing(o),"/")&&o.query===v.query&&(w||o.fragment===v.fragment)}return!1}joinPath(o,...v){return g.URI.joinPath(o,...v)}basenameOrAuthority(o){return(0,t.basename)(o)||o.authority}basename(o){return T.posix.basename(o.path)}extname(o){return T.posix.extname(o.path)}dirname(o){if(o.path.length===0)return o;let v;return o.scheme===b.Schemas.file?v=g.URI.file(T.dirname(R(o))).path:(v=T.posix.dirname(o.path),o.authority&&v.length&&v.charCodeAt(0)!==47&&(console.error(`dirname("${o.toString})) resulted in a relative path`),v="/")),o.with({path:v})}normalizePath(o){if(!o.path.length)return o;let v;return o.scheme===b.Schemas.file?v=g.URI.file(T.normalize(R(o))).path:v=T.posix.normalize(o.path),o.with({path:v})}relativePath(o,v){if(o.scheme!==v.scheme||!(0,t.isEqualAuthority)(o.authority,v.authority))return;if(o.scheme===b.Schemas.file){const N=T.relative(R(o),R(v));return O.isWindows?p.toSlashes(N):N}let w=o.path||"/",B=v.path||"/";if(this._ignorePathCasing(o)){let N=0;for(const I=Math.min(w.length,B.length);N<I&&!(w.charCodeAt(N)!==B.charCodeAt(N)&&w.charAt(N).toLowerCase()!==B.charAt(N).toLowerCase());N++);w=B.substr(0,N)+w.substr(N)}return T.posix.relative(w,B)}resolvePath(o,v){if(o.scheme===b.Schemas.file){const w=g.URI.file(T.resolve(R(o),v));return o.with({authority:w.authority,path:w.path})}return v=p.toPosixPath(v),o.with({path:T.posix.resolve(o.path,v)})}isAbsolutePath(o){return!!o.path&&o.path[0]==="/"}isEqualAuthority(o,v){return o===v||o!==void 0&&v!==void 0&&(0,k.equalsIgnoreCase)(o,v)}hasTrailingPathSeparator(o,v=T.sep){if(o.scheme===b.Schemas.file){const w=R(o);return w.length>p.getRoot(w).length&&w[w.length-1]===v}else{const w=o.path;return w.length>1&&w.charCodeAt(w.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(o.fsPath)}}removeTrailingPathSeparator(o,v=T.sep){return(0,t.hasTrailingPathSeparator)(o,v)?o.with({path:o.path.substr(0,o.path.length-1)}):o}addTrailingPathSeparator(o,v=T.sep){let w=!1;if(o.scheme===b.Schemas.file){const B=R(o);w=B!==void 0&&B.length===p.getRoot(B).length&&B[B.length-1]===v}else{v="/";const B=o.path;w=B.length===1&&B.charCodeAt(B.length-1)===47}return!w&&!(0,t.hasTrailingPathSeparator)(o,v)?o.with({path:o.path+"/"}):o}}t.ExtUri=F,t.extUri=new F(()=>!1),t.extUriBiasedIgnorePathCase=new F(q=>q.scheme===b.Schemas.file?!O.isLinux:!0),t.extUriIgnorePathCase=new F(q=>!0),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri);function S(q,o){const v=[];for(let w=0;w<q.length;w++){const B=o(q[w]);q.some((N,I)=>I===w?!1:(0,t.isEqualOrParent)(B,o(N)))||v.push(q[w])}return v}t.distinctParents=S;var Q;(function(q){q.META_DATA_LABEL="label",q.META_DATA_DESCRIPTION="description",q.META_DATA_SIZE="size",q.META_DATA_MIME="mime";function o(v){const w=new Map;v.path.substring(v.path.indexOf(";")+1,v.path.lastIndexOf(";")).split(";").forEach(I=>{const[U,J]=I.split(":");U&&J&&w.set(U,J)});const N=v.path.substring(0,v.path.indexOf(";"));return N&&w.set(q.META_DATA_MIME,N),w}q.parseMetaData=o})(Q=t.DataUri||(t.DataUri={}));function G(q,o,v){if(o){let w=q.path;return w&&w[0]!==T.posix.sep&&(w=T.posix.sep+w),q.with({scheme:v,authority:o,path:w})}return q.with({scheme:v})}t.toLocalResource=G}),define(ne[8],se([0,1,13,17,18,19,7,3]),function(Y,t,p,b,T,O,k,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelableAsyncIterable=t.CancelableAsyncIterableObject=t.AsyncIterableObject=t.Promises=t.DeferredPromise=t.IntervalCounter=t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.ThrottledWorker=t.RunOnceWorker=t.ProcessTimeRunOnceScheduler=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.firstParallel=t.first=t.sequence=t.disposableTimeout=t.timeout=t.AutoOpenBarrier=t.Barrier=t.ThrottledDelayer=t.Delayer=t.MicrotaskDelay=t.SequencerByKey=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellablePromises=t.raceCancellationError=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0;function R(h){return!!h&&typeof h.then=="function"}t.isThenable=R;function F(h){const i=new p.CancellationTokenSource,s=h(i.token),u=new Promise((c,y)=>{const $=i.token.onCancellationRequested(()=>{$.dispose(),i.dispose(),y(new b.CancellationError)});Promise.resolve(s).then(K=>{$.dispose(),i.dispose(),c(K)},K=>{$.dispose(),i.dispose(),y(K)})});return new class{cancel(){i.cancel()}then(c,y){return u.then(c,y)}catch(c){return this.then(void 0,c)}finally(c){return u.finally(c)}}}t.createCancelablePromise=F;function S(h,i,s){return new Promise((u,c)=>{const y=i.onCancellationRequested(()=>{y.dispose(),u(s)});h.then(u,c).finally(()=>y.dispose())})}t.raceCancellation=S;function Q(h,i){return new Promise((s,u)=>{const c=i.onCancellationRequested(()=>{c.dispose(),u(new b.CancellationError)});h.then(s,u).finally(()=>c.dispose())})}t.raceCancellationError=Q;async function G(h){let i=-1;const s=h.map((c,y)=>c.then($=>(i=y,$))),u=await Promise.race(s);return h.forEach((c,y)=>{y!==i&&c.cancel()}),u}t.raceCancellablePromises=G;function q(h,i,s){let u;const c=setTimeout(()=>{u?.(void 0),s?.()},i);return Promise.race([h.finally(()=>clearTimeout(c)),new Promise(y=>u=y)])}t.raceTimeout=q;function o(h){return new Promise((i,s)=>{const u=h();R(u)?u.then(i,s):i(u)})}t.asPromise=o;class v{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(i){if(this.activePromise){if(this.queuedPromiseFactory=i,!this.queuedPromise){const s=()=>{this.queuedPromise=null;const u=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,u};this.queuedPromise=new Promise(u=>{this.activePromise.then(s,s).then(u)})}return new Promise((s,u)=>{this.queuedPromise.then(s,u)})}return this.activePromise=i(),new Promise((s,u)=>{this.activePromise.then(c=>{this.activePromise=null,s(c)},c=>{this.activePromise=null,u(c)})})}}t.Throttler=v;class w{constructor(){this.current=Promise.resolve(null)}queue(i){return this.current=this.current.then(()=>i(),()=>i())}}t.Sequencer=w;class B{constructor(){this.promiseMap=new Map}queue(i,s){const c=(this.promiseMap.get(i)??Promise.resolve()).catch(()=>{}).then(s).finally(()=>{this.promiseMap.get(i)===c&&this.promiseMap.delete(i)});return this.promiseMap.set(i,c),c}}t.SequencerByKey=B;const N=(h,i)=>{let s=!0;const u=setTimeout(()=>{s=!1,i()},h);return{isTriggered:()=>s,dispose:()=>{clearTimeout(u),s=!1}}},I=h=>{let i=!0;return queueMicrotask(()=>{i&&(i=!1,h())}),{isTriggered:()=>i,dispose:()=>{i=!1}}};t.MicrotaskDelay=Symbol("MicrotaskDelay");class U{constructor(i){this.defaultDelay=i,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(i,s=this.defaultDelay){this.task=i,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((c,y)=>{this.doResolve=c,this.doReject=y}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const c=this.task;return this.task=null,c()}}));const u=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=s===t.MicrotaskDelay?I(u):N(s,u),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new b.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}t.Delayer=U;class J{constructor(i){this.delayer=new U(i),this.throttler=new v}trigger(i,s){return this.delayer.trigger(()=>this.throttler.queue(i),s)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}t.ThrottledDelayer=J;class C{constructor(){this._isOpen=!1,this._promise=new Promise((i,s)=>{this._completePromise=i})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}t.Barrier=C;class W extends C{constructor(i){super();this._timeout=setTimeout(()=>this.open(),i)}open(){clearTimeout(this._timeout),super.open()}}t.AutoOpenBarrier=W;function A(h,i){return i?new Promise((s,u)=>{const c=setTimeout(()=>{y.dispose(),s()},h),y=i.onCancellationRequested(()=>{clearTimeout(c),y.dispose(),u(new b.CancellationError)})}):F(s=>A(h,s))}t.timeout=A;function H(h,i=0){const s=setTimeout(h,i);return(0,O.toDisposable)(()=>clearTimeout(s))}t.disposableTimeout=H;function n(h){const i=[];let s=0;const u=h.length;function c(){return s<u?h[s++]():null}function y($){$!=null&&i.push($);const K=c();return K?K.then(y):Promise.resolve(i)}return Promise.resolve(null).then(y)}t.sequence=n;function e(h,i=u=>!!u,s=null){let u=0;const c=h.length,y=()=>{if(u>=c)return Promise.resolve(s);const $=h[u++];return Promise.resolve($()).then(ee=>i(ee)?Promise.resolve(ee):y())};return y()}t.first=e;function r(h,i=u=>!!u,s=null){if(h.length===0)return Promise.resolve(s);let u=h.length;const c=()=>{u=-1;for(const y of h)y.cancel?.()};return new Promise((y,$)=>{for(const K of h)K.then(ee=>{--u>=0&&i(ee)?(c(),y(ee)):u===0&&y(s)}).catch(ee=>{--u>=0&&(c(),$(ee))})})}t.firstParallel=r;class a{constructor(i){this._size=0,this.maxDegreeOfParalellism=i,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new T.Emitter}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(i){return this._size++,new Promise((s,u)=>{this.outstandingPromises.push({factory:i,c:s,e:u}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const i=this.outstandingPromises.shift();this.runningPromises++;const s=i.factory();s.then(i.c,i.e),s.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onDrained.fire()}dispose(){this._onDrained.dispose()}}t.Limiter=a;class l extends a{constructor(){super(1)}}t.Queue=l;class f{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const i=new m;return this.drainers.add(i),i.p}isDrained(){for(const[,i]of this.queues)if(i.size>0)return!1;return!0}queueFor(i,s=k.extUri){const u=s.getComparisonKey(i);let c=this.queues.get(u);return c||(c=new l,T.Event.once(c.onDrained)(()=>{c?.dispose(),this.queues.delete(u),this.onDidQueueDrain()}),this.queues.set(u,c)),c}onDidQueueDrain(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const i of this.drainers)i.complete();this.drainers.clear()}dispose(){for(const[,i]of this.queues)i.dispose();this.queues.clear(),this.releaseDrainers()}}t.ResourceQueue=f;class D{constructor(i,s){this._token=-1,typeof i=="function"&&typeof s=="number"&&this.setIfNotSet(i,s)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(i,s){this.cancel(),this._token=setTimeout(()=>{this._token=-1,i()},s)}setIfNotSet(i,s){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,i()},s))}}t.TimeoutTimer=D;class L{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(i,s){this.cancel(),this._token=setInterval(()=>{i()},s)}}t.IntervalTimer=L;class z{constructor(i,s){this.timeoutToken=-1,this.runner=i,this.timeout=s,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(i=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,i)}get delay(){return this.timeout}set delay(i){this.timeout=i}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}t.RunOnceScheduler=z;class Z{constructor(i,s){s%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${s}ms is not a multiple of 1000ms.`),this.runner=i,this.timeout=s,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(i=this.timeout){i%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(i/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner&&this.runner())}}t.ProcessTimeRunOnceScheduler=Z;class X extends z{constructor(i,s){super(i,s);this.units=[]}work(i){this.units.push(i),this.isScheduled()||this.schedule()}doRun(){const i=this.units;this.units=[],this.runner&&this.runner(i)}dispose(){this.units=[],super.dispose()}}t.RunOnceWorker=X;class te extends O.Disposable{constructor(i,s){super();this.options=i,this.handler=s,this.pendingWork=[],this.throttler=this._register(new O.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(i){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+i.length>this.options.maxBufferedWork)return!1}else if(this.pending+i.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...i),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new z(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}t.ThrottledWorker=te,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?t.runWhenIdle=h=>{(0,g.setTimeout0)(()=>{if(i)return;const s=Date.now()+15;h(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:t.runWhenIdle=(h,i)=>{const s=requestIdleCallback(h,typeof i=="number"?{timeout:i}:void 0);let u=!1;return{dispose(){u||(u=!0,cancelIdleCallback(s))}}}}();class j{constructor(i){this._didRun=!1,this._executor=()=>{try{this._value=i()}catch(s){this._error=s}finally{this._didRun=!0}},this._handle=(0,t.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}t.IdleValue=j;async function x(h,i,s){let u;for(let c=0;c<s;c++)try{return await h()}catch(y){u=y,await A(i)}throw u}t.retry=x;class V{hasPending(i){return this._pending?typeof i=="number"?this._pending.taskId===i:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(i,s,u){return this._pending={taskId:i,cancel:()=>u?.(),promise:s},s.then(()=>this.donePending(i),()=>this.donePending(i)),s}donePending(i){this._pending&&i===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const i=this._next;this._next=void 0,i.run().then(i.promiseResolve,i.promiseReject)}}setNext(i){if(this._next)this._next.run=i;else{let s,u;const c=new Promise((y,$)=>{s=y,u=$});this._next={run:i,promise:c,promiseResolve:s,promiseReject:u}}return this._next.promise}}t.TaskSequentializer=V;class ie{constructor(i,s=()=>Date.now()){this.interval=i,this.nowFn=s,this.lastIncrementTime=0,this.value=0}increment(){const i=this.nowFn();return i-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=i,this.value=0),this.value++,this.value}}t.IntervalCounter=ie;class m{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((i,s)=>{this.completeCallback=i,this.errorCallback=s})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(i){return new Promise(s=>{this.completeCallback(i),this.resolved=!0,s()})}error(i){return new Promise(s=>{this.errorCallback(i),this.rejected=!0,s()})}cancel(){new Promise(i=>{this.errorCallback(new b.CancellationError),this.rejected=!0,i()})}}t.DeferredPromise=m;var _;(function(h){async function i(u){let c;const y=await Promise.all(u.map($=>$.then(K=>K,K=>{c||(c=K)})));if(typeof c!="undefined")throw c;return y}h.settled=i;function s(u){return new Promise(async(c,y)=>{try{await u(c,y)}catch($){y($)}})}h.withAsyncBody=s})(_=t.Promises||(t.Promises={}));var d;(function(h){h[h.Initial=0]="Initial",h[h.DoneOK=1]="DoneOK",h[h.DoneError=2]="DoneError"})(d||(d={}));class P{constructor(i){this._state=0,this._results=[],this._error=null,this._onStateChanged=new T.Emitter,queueMicrotask(async()=>{const s={emitOne:u=>this.emitOne(u),emitMany:u=>this.emitMany(u),reject:u=>this.reject(u)};try{await Promise.resolve(i(s)),this.resolve()}catch(u){this.reject(u)}finally{s.emitOne=void 0,s.emitMany=void 0,s.reject=void 0}})}static fromArray(i){return new P(s=>{s.emitMany(i)})}static fromPromise(i){return new P(async s=>{s.emitMany(await i)})}static fromPromises(i){return new P(async s=>{await Promise.all(i.map(async u=>s.emitOne(await u)))})}static merge(i){return new P(async s=>{await Promise.all(i.map(async u=>{for await(const c of u)s.emitOne(c)}))})}[Symbol.asyncIterator](){let i=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(i<this._results.length)return{done:!1,value:this._results[i++]};if(this._state===1)return{done:!0,value:void 0};await T.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(i,s){return new P(async u=>{for await(const c of i)u.emitOne(s(c))})}map(i){return P.map(this,i)}static filter(i,s){return new P(async u=>{for await(const c of i)s(c)&&u.emitOne(c)})}filter(i){return P.filter(this,i)}static coalesce(i){return P.filter(i,s=>!!s)}coalesce(){return P.coalesce(this)}static async toPromise(i){const s=[];for await(const u of i)s.push(u);return s}toPromise(){return P.toPromise(this)}emitOne(i){this._state===0&&(this._results.push(i),this._onStateChanged.fire())}emitMany(i){this._state===0&&(this._results=this._results.concat(i),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(i){this._state===0&&(this._state=2,this._error=i,this._onStateChanged.fire())}}t.AsyncIterableObject=P,P.EMPTY=P.fromArray([]);class E extends P{constructor(i,s){super(s);this._source=i}cancel(){this._source.cancel()}}t.CancelableAsyncIterableObject=E;function M(h){const i=new p.CancellationTokenSource,s=h(i.token);return new E(i,async u=>{const c=i.token.onCancellationRequested(()=>{c.dispose(),i.dispose(),u.reject(new b.CancellationError)});try{for await(const y of s){if(i.token.isCancellationRequested)return;u.emitOne(y)}c.dispose(),i.dispose()}catch(y){c.dispose(),i.dispose(),u.reject(y)}})}t.createCancelableAsyncIterable=M}),define(ne[9],se([0,1,11,8,5,10,4,3,2]),function(Y,t,p,b,T,O,k,g,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patternsEquals=t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.parse=t.match=t.splitGlobAware=t.GLOB_SPLIT=t.GLOBSTAR=t.getEmptyExpression=void 0;function F(){return Object.create(null)}t.getEmptyExpression=F,t.GLOBSTAR="**",t.GLOB_SPLIT="/";const S="[/\\\\]",Q="[^/\\\\]",G=/\//g;function q(m,_){switch(m){case 0:return"";case 1:return`${Q}*?`;default:return`(?:${S}|${Q}+${S}${_?`|${S}${Q}+`:""})*?`}}function o(m,_){if(!m)return[];const d=[];let P=!1,E=!1,M="";for(const h of m){switch(h){case _:if(!P&&!E){d.push(M),M="";continue}break;case"{":P=!0;break;case"}":P=!1;break;case"[":E=!0;break;case"]":E=!1;break}M+=h}return M&&d.push(M),d}t.splitGlobAware=o;function v(m){if(!m)return"";let _="";const d=o(m,t.GLOB_SPLIT);if(d.every(P=>P===t.GLOBSTAR))_=".*";else{let P=!1;d.forEach((E,M)=>{if(E===t.GLOBSTAR){if(P)return;_+=q(2,M===d.length-1)}else{let h=!1,i="",s=!1,u="";for(const c of E){if(c!=="}"&&h){i+=c;continue}if(s&&(c!=="]"||!u)){let y;c==="-"?y=c:(c==="^"||c==="!")&&!u?y="^":c===t.GLOB_SPLIT?y="":y=(0,R.escapeRegExpCharacters)(c),u+=y;continue}switch(c){case"{":h=!0;continue;case"[":s=!0;continue;case"}":{_+=`(?:${o(i,",").map(K=>v(K)).join("|")})`,h=!1,i="";break}case"]":{_+="["+u+"]",s=!1,u="";break}case"?":_+=Q;continue;case"*":_+=q(1);continue;default:_+=(0,R.escapeRegExpCharacters)(c)}}M<d.length-1&&(d[M+1]!==t.GLOBSTAR||M+2<d.length)&&(_+=S)}P=E===t.GLOBSTAR})}return _}const w=/^\*\*\/\*\.[\w\.-]+$/,B=/^\*\*\/([\w\.-]+)\/?$/,N=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,I=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,U=/^\*\*((\/[\w\.-]+)+)\/?$/,J=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,C=new O.LRUCache(1e4),W=function(){return!1},A=function(){return null};function H(m,_){if(!m)return A;let d;typeof m!="string"?d=m.pattern:d=m,d=d.trim();const P=`${d}_${!!_.trimForExclusions}`;let E=C.get(P);if(E)return n(E,m);let M;return w.test(d)?E=r(d.substr(4),d):(M=B.exec(e(d,_)))?E=a(M[1],d):(_.trimForExclusions?I:N).test(d)?E=l(d,_):(M=U.exec(e(d,_)))?E=f(M[1].substr(1),d,!0):(M=J.exec(e(d,_)))?E=f(M[1],d,!1):E=D(d),C.set(P,E),n(E,m)}function n(m,_){if(typeof _=="string")return m;const d=function(P,E){return(0,T.isEqualOrParent)(P,_.base,!g.isLinux)?m(P.substr(_.base.length+1),E):null};return d.allBasenames=m.allBasenames,d.allPaths=m.allPaths,d.basenames=m.basenames,d.patterns=m.patterns,d}function e(m,_){return _.trimForExclusions&&m.endsWith("/**")?m.substr(0,m.length-2):m}function r(m,_){return function(d,P){return typeof d=="string"&&d.endsWith(m)?_:null}}function a(m,_){const d=`/${m}`,P=`\\${m}`,E=function(h,i){return typeof h!="string"?null:i?i===m?_:null:h===m||h.endsWith(d)||h.endsWith(P)?_:null},M=[m];return E.basenames=M,E.patterns=[_],E.allBasenames=M,E}function l(m,_){const d=V(m.slice(1,-1).split(",").map(i=>H(i,_)).filter(i=>i!==A),m),P=d.length;if(!P)return A;if(P===1)return d[0];const E=function(i,s){for(let u=0,c=d.length;u<c;u++)if(d[u](i,s))return m;return null},M=d.find(i=>!!i.allBasenames);M&&(E.allBasenames=M.allBasenames);const h=d.reduce((i,s)=>s.allPaths?i.concat(s.allPaths):i,[]);return h.length&&(E.allPaths=h),E}function f(m,_,d){const P=k.sep===k.posix.sep,E=P?m:m.replace(G,k.sep),M=k.sep+E,h=k.posix.sep+m;let i;return d?i=function(s,u){return typeof s=="string"&&(s===E||s.endsWith(M)||!P&&(s===m||s.endsWith(h)))?_:null}:i=function(s,u){return typeof s=="string"&&(s===E||!P&&s===m)?_:null},i.allPaths=[(d?"*/":"./")+m],i}function D(m){try{const _=new RegExp(`^${v(m)}$`);return function(d){return _.lastIndex=0,typeof d=="string"&&_.test(d)?m:null}}catch{return A}}function L(m,_,d){return!m||typeof _!="string"?!1:z(m)(_,void 0,d)}t.match=L;function z(m,_={}){if(!m)return W;if(typeof m=="string"||Z(m)){const d=H(m,_);if(d===A)return W;const P=function(E,M){return!!d(E,M)};return d.allBasenames&&(P.allBasenames=d.allBasenames),d.allPaths&&(P.allPaths=d.allPaths),P}return j(m,_)}t.parse=z;function Z(m){const _=m;return _?typeof _.base=="string"&&typeof _.pattern=="string":!1}t.isRelativePattern=Z;function X(m){return m.allBasenames||[]}t.getBasenameTerms=X;function te(m){return m.allPaths||[]}t.getPathTerms=te;function j(m,_){const d=V(Object.getOwnPropertyNames(m).map(i=>x(i,m[i],_)).filter(i=>i!==A)),P=d.length;if(!P)return A;if(!d.some(i=>!!i.requiresSiblings)){if(P===1)return d[0];const i=function(c,y){let $;for(let K=0,ee=d.length;K<ee;K++){const re=d[K](c,y);if(typeof re=="string")return re;(0,b.isThenable)(re)&&($||($=[]),$.push(re))}return $?(async()=>{for(const K of $){const ee=await K;if(typeof ee=="string")return ee}return null})():null},s=d.find(c=>!!c.allBasenames);s&&(i.allBasenames=s.allBasenames);const u=d.reduce((c,y)=>y.allPaths?c.concat(y.allPaths):c,[]);return u.length&&(i.allPaths=u),i}const E=function(i,s,u){let c,y;for(let $=0,K=d.length;$<K;$++){const ee=d[$];ee.requiresSiblings&&u&&(s||(s=(0,k.basename)(i)),c||(c=s.substr(0,s.length-(0,k.extname)(i).length)));const re=ee(i,s,c,u);if(typeof re=="string")return re;(0,b.isThenable)(re)&&(y||(y=[]),y.push(re))}return y?(async()=>{for(const $ of y){const K=await $;if(typeof K=="string")return K}return null})():null},M=d.find(i=>!!i.allBasenames);M&&(E.allBasenames=M.allBasenames);const h=d.reduce((i,s)=>s.allPaths?i.concat(s.allPaths):i,[]);return h.length&&(E.allPaths=h),E}function x(m,_,d){if(_===!1)return A;const P=H(m,d);if(P===A)return A;if(typeof _=="boolean")return P;if(_){const E=_.when;if(typeof E=="string"){const M=(h,i,s,u)=>{if(!u||!P(h,i))return null;const c=E.replace("$(basename)",s),y=u(c);return(0,b.isThenable)(y)?y.then($=>$?m:null):y?m:null};return M.requiresSiblings=!0,M}}return P}function V(m,_){const d=m.filter(i=>!!i.basenames);if(d.length<2)return m;const P=d.reduce((i,s)=>{const u=s.basenames;return u?i.concat(u):i},[]);let E;if(_){E=[];for(let i=0,s=P.length;i<s;i++)E.push(_)}else E=d.reduce((i,s)=>{const u=s.patterns;return u?i.concat(u):i},[]);const M=function(i,s){if(typeof i!="string")return null;if(!s){let c;for(c=i.length;c>0;c--){const y=i.charCodeAt(c-1);if(y===47||y===92)break}s=i.substr(c)}const u=P.indexOf(s);return u!==-1?E[u]:null};M.basenames=P,M.patterns=E,M.allBasenames=P;const h=m.filter(i=>!i.basenames);return h.push(M),h}function ie(m,_){return(0,p.equals)(m,_,(d,P)=>typeof d=="string"&&typeof P=="string"?d===P:typeof d!="string"&&typeof P!="string"?d.base===P.base&&d.pattern===P.pattern:!1)}t.patternsEquals=ie}),define(ne[14],se([0,1,20]),function(Y,t,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileResults=void 0;const b=(T,O,k)=>{let g;if(T[0]===255&&T[1]===254)g=new TextDecoder("utf-16le").decode(T);else if(T[0]===254&&T[1]===255)g=new TextDecoder("utf-16be").decode(T);else if(g=new TextDecoder("utf8").decode(T),g.slice(0,1e3).includes("\uFFFD")&&T.includes(0))return[];const R=[],F=[];let S=null,Q=k.remainingResultQuota;for(;Q>=0&&(S=O.exec(g));)F.push({matchStartIndex:S.index,matchedText:S[0]}),Q--;if(F.length){const G=new Set,q=new Set,o=[],v=U=>g.slice(o[U].start,o[U].end);let w=0,B=null;const N=/\r?\n/g;for(;B=N.exec(g);)o.push({start:w,end:B.index}),w=B.index+B[0].length;w<g.length&&o.push({start:w,end:g.length});let I=0;for(const{matchStartIndex:U,matchedText:J}of F){if(Q<0)break;for(;Boolean(o[I+1])&&U>o[I].end;)I++;let C=I;for(;Boolean(o[C+1])&&U+J.length>o[C].end;)C++;if(k.beforeContext)for(let r=Math.max(0,I-k.beforeContext);r<I;r++)G.add(r);let W="",A=0;for(let r=I;r<=C;r++){let a=v(r);k.previewOptions?.charsPerLine&&a.length>k.previewOptions.charsPerLine&&(A=Math.max(U-o[I].start-20,0),a=a.substr(A,k.previewOptions.charsPerLine)),W+=`${a}
`,q.add(r)}const H=new p.Range(I,U-o[I].start,C,U+J.length-o[C].start),n=new p.Range(0,U-o[I].start-A,C-I,U+J.length-o[C].start-(C===I?A:0)),e={ranges:H,preview:{text:W,matches:n}};if(R.push(e),k.afterContext)for(let r=C+1;r<=Math.min(C+k.afterContext,o.length-1);r++)G.add(r)}for(const U of G)q.has(U)||R.push({text:v(U),lineNumber:U+1})}return R};t.getFileResults=b}),define(ne[15],se([0,1,9]),function(Y,t,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IgnoreFile=void 0;class b{constructor(O,k,g){this.isPathIgnored=this.parseIgnoreFile(O,k,g)}isPathIncludedInTraversal(O,k){if(O[0]!=="/"||O[O.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+O);return!this.isPathIgnored(O,k)}isArbitraryPathIgnored(O,k){if(O[0]!=="/"||O[O.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+O);const g=O.split("/").filter(S=>S);let R=!1,F="";for(let S=0;S<g.length;S++){const Q=S===g.length-1,G=g[S];if(F=F+"/"+G,!this.isPathIncludedInTraversal(F,Q?k:!0)){R=!0;break}}return R}gitignoreLinesToExpression(O,k,g){const R=O.map(S=>this.gitignoreLineToGlob(S,k)),F=Object.create(null);for(const S of R)F[S]=!0;return p.parse(F,{trimForExclusions:g})}parseIgnoreFile(O,k,g){const R=O.split(`
`).map(I=>I.trim()).filter(I=>I&&I[0]!=="#"),F=R.filter(I=>!I.endsWith("/")),S=F.filter(I=>!I.includes("!")),Q=this.gitignoreLinesToExpression(S,k,!0),G=F.filter(I=>I.includes("!")).map(I=>I.replace(/!/g,"")),q=this.gitignoreLinesToExpression(G,k,!1),o=R.filter(I=>!I.includes("!")),v=this.gitignoreLinesToExpression(o,k,!0),w=R.filter(I=>I.includes("!")).map(I=>I.replace(/!/g,"")),B=this.gitignoreLinesToExpression(w,k,!1);return(I,U)=>I.startsWith(k)?U&&v(I)&&!B(I)||Q(I)&&!q(I)?!0:g?g.isPathIgnored(I,U):!1:!1}gitignoreLineToGlob(O,k){const g=O.indexOf("/");return g===-1||g===O.length-1?O="**/"+O:(g===0&&(O=O.slice(1)),O=k+O),O}}t.IgnoreFile=b}),define(ne[21],se([0,1,9,6,4,13,14,15,2,8,7]),function(Y,t,p,b,T,O,k,g,R,F,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalFileSearchSimpleWorker=t.create=void 0;const Q=!1,G=+new Date,q={},o=async(C,W)=>{if(!Q)return W();const A=Date.now(),H=(q[C]??0)+1;console.info(C,H,"starting",Math.round((A-G)*10)/1e4),q[C]=H;const n=await W(),e=Date.now();return console.info(C,H,"took",e-A),n};function v(C){return new w(C)}t.create=v;class w{constructor(W){this.host=W,this.cancellationTokens=new Map}cancelQuery(W){this.cancellationTokens.get(W)?.cancel()}registerCancellationToken(W){const A=new O.CancellationTokenSource;return this.cancellationTokens.set(W,A),A}async listDirectory(W,A,H,n,e){const r=N(H),a=new S.ExtUri(()=>n),l=this.registerCancellationToken(e),f=[];let D=!1,L=0;const z=A.maxResults||512,Z=A.filePattern?X=>A.filePattern.split("").every(te=>X.includes(te)):X=>!0;return await o("listDirectory",()=>this.walkFolderQuery(W,I(A),r,a,X=>{if(!!Z(X.name))return L++,z&&L>z&&(D=!0,l.cancel()),f.push(X.path)},l.token)),{results:f,limitHit:D}}async searchDirectory(W,A,H,n,e){const r=N(H),a=new S.ExtUri(()=>n);return o("searchInFiles",async()=>{const l=this.registerCancellationToken(e),f=[],D=B(A.contentPattern),L=[];let z=0,Z=0,X=!1;const te=async j=>{if(l.token.isCancellationRequested)return;z++;const x=await j.resolve();if(l.token.isCancellationRequested)return;const V=new Uint8Array(x),ie=(0,k.getFileResults)(V,D,{afterContext:A.afterContext??0,beforeContext:A.beforeContext??0,previewOptions:A.previewOptions,remainingResultQuota:A.maxResults?A.maxResults-Z:1e4});if(ie.length){Z+=ie.length,A.maxResults&&Z>A.maxResults&&l.cancel();const m={resource:b.URI.joinPath(r.folder,j.path),results:ie};this.host.sendTextSearchMatch(m,e),f.push(m)}};return await o("walkFolderToResolve",()=>this.walkFolderQuery(W,I(A),r,a,async j=>L.push(te(j)),l.token)),await o("resolveOngoingProcesses",()=>Promise.all(L)),Q&&console.log("Searched in",z,"files"),{results:f,limitHit:X}})}async walkFolderQuery(W,A,H,n,e,r){const a=p.parse(H.excludePattern??{},{trimForExclusions:!0}),l=(j,x,V)=>(j=j.slice(1),!!(a(j,x,V)||U(A,j))),f=(j,x,V)=>(j=j.slice(1),!(a(j,x,V)||!J(A,j,n))),D=(j,x)=>({type:"file",name:j.name,path:x,resolve:()=>j.getFile().then(ie=>ie.arrayBuffer())}),L=j=>j.kind==="directory",z=j=>j.kind==="file",Z=async(j,x,V)=>{if(!H.disregardIgnoreFiles){const m=await Promise.all([j.getFileHandle(".gitignore").catch(_=>{}),j.getFileHandle(".ignore").catch(_=>{})]);await Promise.all(m.map(async _=>{if(!_)return;const d=new TextDecoder("utf8").decode(new Uint8Array(await(await _.getFile()).arrayBuffer()));V=new g.IgnoreFile(d,x,V)}))}const ie=F.Promises.withAsyncBody(async m=>{const _=[],d=[],P=[],E=new Set;for await(const M of j.entries())P.push(M),E.add(M[0]);for(const[M,h]of P){if(r.isCancellationRequested)break;const i=x+M;if(V&&!V.isPathIncludedInTraversal(i,h.kind==="directory"))continue;const s=u=>E.has(u);L(h)&&!l(i,M,s)?d.push(Z(h,i+"/",V)):z(h)&&f(i,M,s)&&_.push(D(h,i))}m([...await Promise.all(d),..._])});return{type:"dir",name:j.name,entries:ie}},X=async(j,x)=>{r.isCancellationRequested||await Promise.all((await j.entries).sort((V,ie)=>-(V.type==="dir"?0:1)+(ie.type==="dir"?0:1)).map(async V=>V.type==="dir"?X(V,x):x(V)))},te=await o("process",()=>Z(W,"/"));await o("resolve",()=>X(te,e))}}t.LocalFileSearchSimpleWorker=w;function B(C){return(0,R.createRegExp)(C.pattern,!!C.isRegExp,{wholeWord:C.isWordMatch,global:!0,matchCase:C.isCaseSensitive,multiline:!0,unicode:!0})}function N(C){return{...C,folder:b.URI.revive(C.folder)}}function I(C){return{...C,extraFileResources:C.extraFileResources?.map(W=>b.URI.revive(W)),folderQueries:C.folderQueries.map(W=>N(W))}}function U(C,W){return!!(C.excludePattern&&p.match(C.excludePattern,W))}function J(C,W,A){return C.excludePattern&&p.match(C.excludePattern,W)?!1:C.includePattern||C.usingSearchPaths?C.includePattern&&p.match(C.includePattern,W)?!0:C.usingSearchPaths?!!C.folderQueries&&C.folderQueries.some(H=>{const n=H.folder,e=b.URI.file(W);if(A.isEqualOrParent(e,n)){const r=T.relative(n.path,e.path);return!H.includePattern||!!p.match(H.includePattern,r)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/9c29becfad5f68270b9b23efeafb147722c5feba/core/vs/workbench/services/search/worker/localFileSearch.js.map
